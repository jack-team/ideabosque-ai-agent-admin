import{j as t,P as p,B as x,q as s,a1 as c,k as u,t as j,b as y,u as g,p as _,S as k}from"./libs-DKvGRd2v.js";import{c as I,f as h}from"./index-hLuO1L00.js";import{T as m}from"./index-BVeCJB01.js";import{L as l}from"./index-BWkvZ9kS.js";import{b as A}from"./generate-DahBUJdW.js";import"./index-O1RFasQ-.js";const T={},b=i=>{const n=i.value||[];return t.jsx("div",{className:T.messages,children:t.jsx(p,{options:!1,search:!1,dataSource:n,pagination:{pageSize:5},className:"shopify",columns:[{title:"Role",key:"role",render:(a,{message:e})=>(e==null?void 0:e.role)||"-"},{title:"Prompt Tokens",key:"prompt_tokens",render:(a,{message:e})=>{var r;return((r=e==null?void 0:e.run)==null?void 0:r.prompt_tokens)||"-"}},{title:"Completion Tokens",key:"completion_tokens",render:(a,{message:e})=>{var r;return((r=e==null?void 0:e.run)==null?void 0:r.completion_tokens)||"-"}},{title:"Total Tokens",key:"total_tokens",render:(a,{message:e})=>{var r;return((r=e==null?void 0:e.run)==null?void 0:r.total_tokens)||"-"}},{title:"content",key:"content",render:(a,{message:e})=>t.jsx(m,{width:760,hasFooter:!1,title:"Message Content",trigger:t.jsx(x,{className:"shopify",size:"small",children:"View"}),children:t.jsx("div",{style:{padding:"24px 0"},children:t.jsx(l,{pre:!0,value:e==null?void 0:e.content})})})}]})})},N=i=>{const{formData:n}=i,[a]=s.useForm();return t.jsxs(s,{form:a,submitter:!1,layout:"horizontal",labelAlign:"left",labelCol:{flex:"140px"},initialValues:n,style:{padding:"24px 0"},children:[t.jsx(c,{orientation:"left",children:"Agent"}),t.jsxs(u,{className:"shopify",children:[t.jsx(s.Item,{label:"Agent UUID",name:["agent","agent_uuid"],children:t.jsx(l,{})}),t.jsx(s.Item,{label:"Agent Name",name:["agent","agent_name"],children:t.jsx(l,{})}),t.jsx(s.Item,{label:"Agent Description",name:["agent","agent_description"],children:t.jsx(l,{})})]}),t.jsx(c,{orientation:"left",children:"Messages"}),t.jsx(u,{className:"shopify",children:t.jsx(s.Item,{name:"messages",children:t.jsx(b,{})})})]})},S=async i=>{const n=await A({type:"Query",name:"threadList"});return I.graphql({query:n,variables:i})},L=()=>{const i=j(),n=y.useRef(null),a=g(()=>{var e;(e=n.current)==null||e.reload()});return t.jsx(_,{title:"Threads",onBack:()=>i(-1),children:t.jsx(p,{pagination:{pageSize:10},actionRef:n,search:!1,options:!1,rowKey:"threadUuid",className:"shopify",request:async e=>{const{current:r,pageSize:o,...f}=e,{threadList:d}=await S({limit:o,pageNumber:r,...f});return{total:d.total,data:d.threadList}},columns:[{title:"Thread UUID",dataIndex:"threadUuid"},{title:"Agent UUID",key:"agentUuid",render:(e,r)=>{var o;return(o=r.agent)==null?void 0:o.agent_uuid}},{title:"Create at",dataIndex:"createdAt",hideInSearch:!0,render:(e,r)=>h(r.createdAt)},{title:"Update at",dataIndex:"updatedAt",hideInSearch:!0,render:(e,r)=>h(r.updatedAt)},{width:"120px",key:"action",title:"Action",align:"center",hideInSearch:!0,render:(e,r)=>t.jsx(k,{children:t.jsx(m,{width:700,hasFooter:!1,destroyOnHidden:!0,className:"shopify",title:"Thread",trigger:t.jsx(x,{size:"small",className:"shopify",children:"View"}),children:t.jsx(N,{formData:r,onSuccess:a})})})}]})})};export{L as default};
