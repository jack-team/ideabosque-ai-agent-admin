import{v as f,A as T,e as p,b as C,j as e,W as s,G as y,l as j,m as d,x as E,t as w,P as D,S as P,B as m}from"./libs-Da1xhxe8.js";import"./index-BDycVQol.js";import{T as b}from"./index-CToefxk5.js";import{f as g}from"./index-WkG41BTg.js";import{W as N}from"./map-BPCwAIgA.js";import{b as I,u as F}from"./hooks-Dx89hw0v.js";import{f as q,h as B,e as S}from"./wizard-FFaH7Gsj.js";import"./index-deFZkbnd.js";import"./enum-Ct7sVdAK.js";import"./generate-D8LX3fmF.js";const U=a=>{if(!a)return;const{elements:l,...n}=a;return{...n}},v=a=>({...a,updatedBy:"Admin"}),A=a=>{const{formData:l}=a,[n]=f.useForm(),{message:i}=T.useApp(),[o]=I(),c=p(()=>{n.setFieldsValue(U(l))});return C.useEffect(()=>{l&&c()},[l]),F(async()=>{var u;const r=await n.validateFields(),t=v(r);try{await q(t),o(),(u=a.onSuccess)==null||u.call(a),i.success(`Element ${l?"updated":"created"} successfully.`)}catch{i.error(`Failed to ${l?"update":"create"} Element.`)}}),e.jsxs(f,{form:n,layout:"horizontal",submitter:!1,labelCol:{flex:"140px"},labelAlign:"left",style:{padding:"24px 0 0 0"},children:[e.jsx(s,{hidden:!0,name:"elementUuid"}),e.jsx(s,{label:"Element Title",name:"elementTitle",rules:[{required:!0}]}),e.jsx(s,{label:"Data Type",name:"dataType",rules:[{required:!0}]}),e.jsx(s,{label:"Attribute Name",name:"attributeName",rules:[{required:!0}]}),e.jsx(s,{label:"Attribute Type",name:"attributeType",rules:[{required:!0}]}),e.jsx(s,{label:"Priority",name:"priority",rules:[{required:!0}]}),e.jsx(y,{label:"Option Values",name:"optionValues",creatorButtonProps:{creatorButtonText:"Add Option"},children:e.jsxs(j,{gutter:16,children:[e.jsx(d,{span:12,children:e.jsx(s,{name:"name",label:"Name",labelCol:{span:24},wrapperCol:{span:24},rules:[{required:!0}]})}),e.jsx(d,{span:12,children:e.jsx(s,{name:"value",label:"Value",labelCol:{span:24},wrapperCol:{span:24},rules:[{required:!0}]})})]})}),e.jsx(y,{label:"Conditions",name:"conditions",creatorButtonProps:{creatorButtonText:"Add Condition"},children:e.jsxs(j,{gutter:16,children:[e.jsx(d,{span:12,children:e.jsx(s,{name:"attribute",label:"Attribute",labelCol:{span:24},wrapperCol:{span:24},rules:[{required:!0}]})}),e.jsx(d,{span:12,children:e.jsx(s,{name:"value",label:"Value",labelCol:{span:24},wrapperCol:{span:24},rules:[{required:!0}]})})]})})]})},G=()=>{const{modal:a,message:l}=T.useApp(),n=E(),i=C.useRef(null),o=p(()=>{var r;(r=i.current)==null||r.reload()}),c=p(r=>{a.confirm({title:"Are you sure you want to delete?",okText:"Delete",okButtonProps:{danger:!0,className:"shopify"},cancelButtonProps:{className:"shopify"},onOk:async()=>{try{await B({elementUuid:r.elementUuid}),o(),l.success("Deletion successful.")}catch(t){return l.error("Deletion failed."),Promise.reject(t)}}})});return e.jsx(w,{title:"Elements",onBack:()=>n(-1),extra:e.jsx(b,{width:500,className:"shopify",title:"Create Element",trigger:e.jsx(m,{className:"shopify",type:"primary",children:"Create Element"}),children:e.jsx(A,{})}),children:e.jsx(D,{actionRef:i,search:!1,options:!1,scroll:{x:"max-content"},rowKey:"elementUuid",className:"shopify",request:async r=>{const{current:t,pageSize:u,...x}=r,{elementList:h}=await S({limit:u,pageNumber:t,...x});return{total:h.total,data:h.elementList}},columns:[{title:"Element UUID",dataIndex:"elementUuid",hideInSearch:!0},{title:"Element Title",dataIndex:"elementTitle"},{title:"Data Type",dataIndex:"dataType",valueEnum:N},{hideInSearch:!0,title:"Priority",dataIndex:"priority"},{title:"Create at",dataIndex:"createdAt",hideInSearch:!0,render:(r,t)=>g(t.createdAt)},{title:"Update at",dataIndex:"updatedAt",hideInSearch:!0,render:(r,t)=>g(t.updatedAt)},{width:"120px",key:"action",title:"Action",align:"center",fixed:"right",hideInSearch:!0,render:(r,t)=>e.jsxs(P,{children:[e.jsx(b,{width:500,destroyOnHidden:!0,className:"shopify",title:"Update Wizard",trigger:e.jsx(m,{size:"small",type:"primary",className:"shopify",children:"Edit"}),children:e.jsx(A,{formData:t,onSuccess:o})}),e.jsx(m,{danger:!0,size:"small",className:"shopify",onClick:()=>c(t),children:"Delete"})]})}]})})};export{G as default};
