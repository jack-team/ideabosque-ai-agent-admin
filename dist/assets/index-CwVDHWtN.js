import{q as a,j as e,a1 as i,k as p,t as f,b as j,u as g,p as b,P as y,S as m,B as d}from"./libs-DKvGRd2v.js";import{c as I,f as x}from"./index-hLuO1L00.js";import{T as C}from"./index-BVeCJB01.js";import{L as s}from"./index-BWkvZ9kS.js";import{b as k}from"./generate-DahBUJdW.js";import"./index-O1RFasQ-.js";const T=l=>{const{formData:n}=l,[o]=a.useForm();return e.jsxs(a,{form:o,disabled:!0,submitter:!1,layout:"horizontal",labelAlign:"left",initialValues:n,style:{padding:"24px 0"},children:[e.jsx(a.Item,{label:"Role",name:"role",labelCol:{flex:"166px"},children:e.jsx(s,{})}),e.jsx(i,{orientation:"left",children:"Message"}),e.jsx(a.Item,{name:"message",children:e.jsx(s,{pre:!0})}),e.jsx(i,{orientation:"left",children:"Run"}),e.jsxs(p,{className:"shopify",children:[e.jsx(a.Item,{label:"Prompt Tokens",name:["run","prompt_tokens"],labelCol:{flex:"150px"},children:e.jsx(s,{})}),e.jsx(a.Item,{label:"Completion Tokens",name:["run","completion_tokens"],labelCol:{flex:"150px"},children:e.jsx(s,{})}),e.jsx(a.Item,{label:"Total Tokens",name:["run","total_tokens"],labelCol:{flex:"150px"},children:e.jsx(s,{})}),e.jsx(i,{orientation:"left",children:"Thread"}),e.jsx(a.Item,{label:"Agent UUID",name:["run","thread","agent_uuid"],labelCol:{flex:"150px"},children:e.jsx(s,{})}),e.jsx(a.Item,{label:"Thread UUID",name:["run","thread","thread_uuid"],labelCol:{flex:"150px"},children:e.jsx(s,{})}),e.jsx(a.Item,{label:"User ID",name:["run","thread","user_id"],labelCol:{flex:"150px"},children:e.jsx(s,{})})]})]})},U=async l=>{const n=await k({type:"Query",name:"messageList"});return I.graphql({query:n,variables:l})},S=()=>{const l=f(),n=j.useRef(null),o=g(()=>{var t;(t=n.current)==null||t.reload()});return e.jsx(b,{title:"Messages",extra:e.jsxs(m,{children:[e.jsx(d,{className:"shopify",onClick:()=>l("/threads"),children:"Threads"}),e.jsx(d,{className:"shopify",onClick:()=>l("/async-tasks"),children:"Async Tasks"})]}),children:e.jsx(y,{actionRef:n,search:!1,options:!1,rowKey:"questionGroupUuid",className:"shopify",request:async t=>{const{current:r,pageSize:u,...h}=t,{messageList:c}=await U({limit:u,pageNumber:r,...h});return{total:c.total,data:c.messageList}},columns:[{title:"Message UUID",dataIndex:"messageUuid"},{title:"Role",dataIndex:"role"},{title:"Create at",dataIndex:"createdAt",hideInSearch:!0,render:(t,r)=>x(r.createdAt)},{title:"Update at",dataIndex:"updatedAt",hideInSearch:!0,render:(t,r)=>x(r.updatedAt)},{width:"120px",key:"action",title:"Action",align:"center",hideInSearch:!0,render:(t,r)=>e.jsx(m,{children:e.jsx(C,{width:640,hasFooter:!1,destroyOnHidden:!0,className:"shopify",title:"Message",trigger:e.jsx(d,{size:"small",className:"shopify",children:"View"}),children:e.jsx(T,{formData:r,onSuccess:o})})})}]})})};export{S as default};
