import{m as p,u as i,b as y,x as C}from"./libs-CxhqsusD.js";import{b as N,e as T,q}from"./workflow-Cy4gCUZY.js";const z=(t=1)=>{const[o,n]=p(t),[e,a]=p(),r=y.useRef(null),l=i(()=>{a(Date.now())}),m=i((s,u)=>{l(),n(s),r.current=u});return C(()=>{var s;(s=r.current)==null||s.call(r)},[o,e]),[o,m]};function f(t,o){const[a,r]=z(1),[l,m]=p(!1),[s,u]=p(!0);let[c,S]=p([]);const v=!s&&a===1&&!c.length,M=a===1&&s,d=i(async()=>{u(!0);try{const g=(await t({page:a,pageSize:15})).data||[];a>1?c=[...c,...g]:c=g,u(!1),S([...c]);const b=g.length<15;b||r(U=>U+1),m(b)}catch(L){console.error(L)}finally{u(!1)}}),h=i(async()=>{if(!(l||s||a===1))return d()}),w=i(()=>{r(1,d)});return y.useEffect(()=>{d()},[!0]),{page:a,empty:v,noMore:l,records:c,loading:s,initLoading:M,onRefresh:w,onLoadMore:h}}const P=()=>{const{records:t,loading:o}=f(async()=>{const{promptTemplateList:e}=await q({pageNumber:1,limit:1e3});return{data:e.promptTemplateList}}),n=t.map(e=>({label:e.promptName,value:e.promptUuid,realData:e}));return{loading:o,options:n}},R=()=>{const{records:t,loading:o}=f(async()=>{const{uiComponentList:e}=await N({pageNumber:1,limit:1e3});return{data:e.uiComponentList}}),n=t.map(e=>({label:e.tagName,value:[e.uiComponentUuid,e.uiComponentType].join("__"),realData:e}));return{loading:o,options:n}},x=()=>{const{records:t,loading:o}=f(async()=>{const{mcpServerList:e}=await T({pageNumber:1,limit:1e3});return{data:e.mcpServerList}});return{options:t.map(e=>({realData:e,label:e.mcpLabel,value:e.mcpServerUuid})),loading:o}};export{x as a,P as b,R as u};
