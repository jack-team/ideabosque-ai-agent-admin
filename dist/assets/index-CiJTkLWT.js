import{o as h,A as j,j as e,W as l,p as w,w as A,f as b,g as f,b as y,u as C,n as I,P,d as g,S as T}from"./libs-Clw9C49h.js";import"./index-D3QcqB_5.js";import{b as N,u as S}from"./hooks-V0qdfiJ4.js";import{a as U,b as M,d as D}from"./workflow-DhBfg7d4.js";import{T as E}from"./index-g0lC1wlR.js";import{S as p}from"./index-DxFRfNm6.js";import"./request-BPdAPW8d.js";import"./generate-C1aCBGPy.js";var c=(r=>(r.wizardGroup="wizard_group",r.externalIntegration="external_integration",r))(c||{});const _={[c.wizardGroup]:"Wizard group",[c.externalIntegration]:"External integration"},F="_edit_form_k8an2_1",v={edit_form:F},z=r=>{const{formData:m,onSuccess:n}=r,[o]=h.useForm(),{message:i}=j.useApp(),[d]=N();return S(async()=>{const a=await o.validateFields();try{await U({...a,updatedBy:"Admin"}),d(),n==null||n(),i.success(`Successfully ${m?"updated":"created"} UI component.`)}catch(t){return i.error(t.message),Promise.reject(t)}}),e.jsxs(h,{form:o,submitter:!1,initialValues:m,className:v.edit_form,children:[e.jsx(l,{hidden:!0,name:"uiComponentUuid"}),e.jsx(l,{label:"Tag name",name:"tagName",rules:[{required:!0}]}),e.jsx(w,{name:"uiComponentType",label:"Component type",rules:[{required:!0}],valueEnum:_}),e.jsx(l,{name:"waitFor",label:"Wait for",rules:[{required:!0}]}),e.jsx(A,{label:"Parameters",name:"parameters",alwaysShowItemLabel:!0,className:"custom_form_list",required:!0,rules:[{validator:(a,t=[],s)=>{if(!t.length){s("Please add parameter");return}s()}}],children:e.jsxs(b,{gutter:16,children:[e.jsx(f,{span:12,children:e.jsx(l,{name:"name",label:"Name",rules:[{required:!0}]})}),e.jsx(f,{span:12,children:e.jsx(l,{name:"parameter",label:"Parameter",rules:[{required:!0}]})})]})})]})},O=()=>{const{modal:r,message:m}=j.useApp(),n=y.useRef(null),o=C(()=>{var a;(a=n.current)==null||a.reload()}),i=(a,t)=>e.jsx(E,{width:600,destroyOnHidden:!0,trigger:a,title:`${t?"Edit":"Create"} Component`,children:e.jsx(z,{formData:t,onSuccess:o})}),d=C(a=>{r.confirm({title:"Are you sure you want to delete the component?",okText:"Delete",cancelButtonProps:{className:"shopify"},okButtonProps:{className:"shopify"},onOk:async()=>{await D({uiComponentType:a.uiComponentType,uiComponentUuid:a.uiComponentUuid}),o(),m.success("Component deleted successfully.")}})});return e.jsx(I,{className:"shopify",title:"Ui Components",extra:i(e.jsx(p,{type:"primary",children:"Create Component"})),children:e.jsx(P,{className:"shopify",actionRef:n,rowKey:"uiComponentUuid",options:!1,search:{layout:"vertical",optionRender:(a,t,s)=>s.map(u=>y.cloneElement(u,{className:"shopify"}))},columns:[{dataIndex:"tagName",title:"Tag Name"},{dataIndex:"uiComponentType",title:"Component Type",valueEnum:_},{dataIndex:"createdAt",title:"Created At",hideInSearch:!0,render:(a,t)=>g(t.createdAt).format("YYYY/MM/DD HH:mm:ss")},{dataIndex:"updatedAt",title:"Updated at",hideInSearch:!0,render:(a,t)=>g(t.updatedAt).format("YYYY/MM/DD HH:mm:ss")},{dataIndex:"updatedBy",title:"Updated by",hideInSearch:!0},{key:"action",title:"Action",width:"100px",align:"center",hideInSearch:!0,fixed:"right",render:(a,t)=>e.jsxs(T,{children:[e.jsx(p,{danger:!0,size:"small",onClick:()=>d(t),children:"Delete"}),i(e.jsx(p,{type:"primary",size:"small",children:"Edit"}),t)]})}],scroll:{x:"max-content"},request:async a=>{const{current:t=1,pageSize:s=10,...u}=a,{uiComponentList:x}=await M({pageNumber:t,limit:s,...u});return{total:x.total,data:x.uiComponentList}}})})};export{O as default};
