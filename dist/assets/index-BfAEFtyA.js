import{j as e,P as p,au as x,y as i,a9 as d,w as y,x as f,S as c,B as u}from"./libs-D2z24ZcL.js";import{c as j,f as h}from"./index-CjVHxAwp.js";import{T as m}from"./index-C_oswNc6.js";import{I as g}from"./index-QK4s8deF.js";import{L as o}from"./index-C9Nxg-gV.js";import{b as k}from"./generate-CSGT65a3.js";import"./index-CVzXAJsn.js";const _={},I=s=>{const n=s.value||[];return e.jsx("div",{className:_.messages,children:e.jsx(p,{options:!1,search:!1,dataSource:n,pagination:{pageSize:5},className:"shopify",columns:[{title:"Role",key:"role",render:(r,{message:t})=>(t==null?void 0:t.role)||"-"},{title:"Prompt Tokens",key:"prompt_tokens",render:(r,{message:t})=>{var a;return((a=t==null?void 0:t.run)==null?void 0:a.prompt_tokens)||"-"}},{title:"Completion Tokens",key:"completion_tokens",render:(r,{message:t})=>{var a;return((a=t==null?void 0:t.run)==null?void 0:a.completion_tokens)||"-"}},{title:"Total Tokens",key:"total_tokens",render:(r,{message:t})=>{var a;return((a=t==null?void 0:t.run)==null?void 0:a.total_tokens)||"-"}},{title:"Actions",key:"action",width:"80px",render:(r,{message:t})=>e.jsx(m,{width:620,hasFooter:!1,title:"Message Content",trigger:e.jsx(g,{icon:x}),children:e.jsx("div",{style:{padding:"24px 0"},children:e.jsx(o,{pre:!0,value:t==null?void 0:t.content})})})}]})})},A=s=>{const{formData:n}=s,[r]=i.useForm();return e.jsxs(i,{form:r,submitter:!1,initialValues:n,style:{padding:"0 0 24px 0"},children:[e.jsx(d,{orientation:"left",children:"Agent details"}),e.jsx(i.Item,{label:"Agent UUID",name:["agent","agent_uuid"],children:e.jsx(o,{})}),e.jsx(i.Item,{label:"Agent Name",name:["agent","agent_name"],children:e.jsx(o,{})}),e.jsx(i.Item,{label:"Agent Description",name:["agent","agent_description"],children:e.jsx(o,{})}),e.jsx(d,{orientation:"left",children:"Messages"}),e.jsx(i.Item,{name:"messages",children:e.jsx(I,{})})]})},T=async s=>{const n=await k({type:"Query",name:"threadList"});return j.graphql({query:n,variables:s})},L=()=>{const s=y();return e.jsx(f,{title:"Message Threads",extra:e.jsxs(c,{children:[e.jsx(u,{className:"shopify gray",onClick:()=>s("/messages"),children:"Messages"}),e.jsx(u,{className:"shopify gray",onClick:()=>s("/async-tasks"),children:"Async Tasks"})]}),children:e.jsx(p,{pagination:{pageSize:5},search:!1,options:!1,rowKey:"threadUuid",className:"shopify",scroll:{x:"max-content"},request:async n=>{const{current:r,pageSize:t,...a}=n,{threadList:l}=await T({limit:t,pageNumber:r,...a});return{total:l.total,data:l.threadList}},columns:[{title:"Thread UUID",dataIndex:"threadUuid"},{title:"Agent",key:"agentUuid",render:(n,r)=>{const t=r.agent;return t?`${t.agent_name}`:"-"}},{title:"Create at",dataIndex:"createdAt",hideInSearch:!0,render:(n,r)=>h(r.createdAt)},{title:"Last updated",dataIndex:"updatedAt",hideInSearch:!0,render:(n,r)=>h(r.updatedAt)},{width:"80px",key:"action",title:"Action",fixed:"right",hideInSearch:!0,render:(n,r)=>e.jsx(c,{children:e.jsx(m,{width:620,hasFooter:!1,destroyOnHidden:!0,className:"shopify",title:"Message thread Details",trigger:e.jsx(g,{icon:x}),children:e.jsx(A,{formData:r})})})}]})})};export{L as default};
