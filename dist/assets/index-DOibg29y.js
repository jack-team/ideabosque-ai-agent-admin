import{q as u,A as y,j as a,W as m,x as h,s as C,b as j,u as p,p as A,P as D,S as N,B as l}from"./libs-DKvGRd2v.js";import{f}from"./index-hLuO1L00.js";import{T as g}from"./index-BVeCJB01.js";import{j as P}from"./useFetchData-D6kGbjfh.js";import{b as F,u as w}from"./hooks-D-cV3eAe.js";import{i as T,g as U,d as b}from"./contactProfiles-vu9VszYf.js";import"./index-O1RFasQ-.js";import"./workflow-v4leCDxK.js";import"./generate-DahBUJdW.js";import"./wizard-Dw4k91bU.js";import"./enum-Ct7sVdAK.js";const _=o=>{if(!o)return;const{agents:s=[],...r}=o;return{...r,agents:s.map(n=>n.agent_uuid)}},k=(o,s)=>{const{agents:r=[],...n}=o,i=r.map(t=>{var d;const e=(d=s.find(c=>c.value===t))==null?void 0:d.realData;return{agent_uuid:t,agent_type:"task",agent_name:e==null?void 0:e.agentName,agent_description:e==null?void 0:e.agentDescription}});return{...n,agents:i,updatedBy:"Admin"}},x=o=>{const{formData:s}=o,[r]=u.useForm(),{message:n}=y.useApp(),[i]=F(),t=P();return w(async()=>{var d;const e=await r.validateFields();try{const c=k(e,t.options);await T(c),n.success("Coordination created successfully."),i(),(d=o.onSuccess)==null||d.call(o)}catch{n.error("Failed to create Coordination.")}}),a.jsxs(u,{form:r,submitter:!1,style:{padding:"24px 0 0 0"},initialValues:_(s),children:[a.jsx(m,{name:"coordinationUuid",hidden:!0}),a.jsx(m,{label:"Coordination Name",name:"coordinationName",rules:[{required:!0}]}),a.jsx(h,{label:"Coordination Description",name:"coordinationDescription",rules:[{required:!0}]}),a.jsx(C,{label:"Agents",name:"agents",mode:"multiple",options:t.options,fieldProps:{maxTagCount:1,loading:t.loading}})]})},W=()=>{const{modal:o,message:s}=y.useApp(),r=j.useRef(null),n=p(()=>{var t;(t=r.current)==null||t.reload()}),i=p(t=>{o.confirm({title:"Are you sure you want to delete?",okText:"Delete",okButtonProps:{danger:!0,className:"shopify"},cancelButtonProps:{className:"shopify"},onOk:async()=>{try{await b({coordinationUuid:t.coordinationUuid}),n(),s.success("Deletion successful.")}catch(e){return s.error("Deletion failed."),Promise.reject(e)}}})});return a.jsx(A,{className:"shopify",title:"Coordinations",extra:a.jsx(g,{width:440,destroyOnHidden:!0,className:"shopify",title:"Create Coordination",trigger:a.jsx(l,{className:"shopify",type:"primary",children:"Create coordination"}),children:a.jsx(x,{onSuccess:n})}),children:a.jsx(D,{actionRef:r,className:"shopify",search:!1,toolBarRender:!1,rowKey:"coordinationUuid",columns:[{title:"Coordination UUID",dataIndex:"coordinationUuid"},{title:"Coordination Name",dataIndex:"coordinationName"},{title:"Create at",dataIndex:"createAt",render:(t,e)=>f(e.createAt)},{title:"Update at",dataIndex:"updateAt",render:(t,e)=>f(e.updateAt)},{title:"Action",key:"action",width:"150px",align:"center",render:(t,e)=>a.jsxs(N,{children:[a.jsx(g,{width:440,destroyOnHidden:!0,className:"shopify",title:"Edit Coordination",trigger:a.jsx(l,{className:"shopify",size:"small",type:"primary",children:"Edit"}),children:a.jsx(x,{formData:e,onSuccess:n})}),a.jsx(l,{danger:!0,size:"small",className:"shopify",onClick:()=>i(e),children:"Delete"})]})}],request:async t=>{const{coordinationList:e}=await U({limit:t.pageSize,pageNumber:t.current});return{total:e.total,data:e.coordinationList}}})})};export{W as default};
