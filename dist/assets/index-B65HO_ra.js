import{j as e,P as p,at as h,y as s,a7 as d,w as g,x as f,S as c,B as j}from"./libs-BaOSQqCJ.js";import{a as y,f as u}from"./index-CcqCcGsi.js";import{T as x}from"./index-D5b0HRSP.js";import{I as m}from"./index-CjwgjA-6.js";import{L as o}from"./index-CprjUkS9.js";import{g as k}from"./generate-CtPa01ee.js";import"./index-Dp2SYPoH.js";const _={},I=i=>{const n=i.value||[];return e.jsx("div",{className:_.messages,children:e.jsx(p,{options:!1,search:!1,dataSource:n,pagination:{pageSize:5},className:"shopify",columns:[{title:"Role",key:"role",render:(r,{message:t})=>(t==null?void 0:t.role)||"-"},{title:"Prompt Tokens",key:"prompt_tokens",render:(r,{message:t})=>{var a;return((a=t==null?void 0:t.run)==null?void 0:a.prompt_tokens)||"-"}},{title:"Completion Tokens",key:"completion_tokens",render:(r,{message:t})=>{var a;return((a=t==null?void 0:t.run)==null?void 0:a.completion_tokens)||"-"}},{title:"Total Tokens",key:"total_tokens",render:(r,{message:t})=>{var a;return((a=t==null?void 0:t.run)==null?void 0:a.total_tokens)||"-"}},{title:"Actions",key:"action",width:"80px",render:(r,{message:t})=>e.jsx(x,{width:620,hasFooter:!1,title:"Message Content",trigger:e.jsx(m,{icon:h}),children:e.jsx("div",{style:{padding:"24px 0"},children:e.jsx(o,{pre:!0,value:t==null?void 0:t.content})})})}]})})},A=i=>{const{formData:n}=i,[r]=s.useForm();return e.jsxs(s,{form:r,submitter:!1,initialValues:n,style:{padding:"0 0 24px 0"},children:[e.jsx(d,{orientation:"left",children:"Agent details"}),e.jsx(s.Item,{label:"Agent UUID",name:["agent","agent_uuid"],children:e.jsx(o,{})}),e.jsx(s.Item,{label:"Agent Name",name:["agent","agent_name"],children:e.jsx(o,{})}),e.jsx(s.Item,{label:"Agent Description",name:["agent","agent_description"],children:e.jsx(o,{})}),e.jsx(d,{orientation:"left",children:"Messages"}),e.jsx(s.Item,{name:"messages",children:e.jsx(I,{})})]})},T=async i=>{const n=await k({type:"Query",name:"threadList"});return y.graphql({query:n,variables:i})},C=()=>{const i=g();return e.jsx(f,{title:"Message Threads",extra:e.jsx(c,{children:e.jsx(j,{className:"shopify gray",onClick:()=>i("/async-tasks"),children:"Async Tasks"})}),children:e.jsx(p,{pagination:{pageSize:5},search:!1,options:!1,rowKey:"threadUuid",className:"shopify",scroll:{x:"max-content"},request:async n=>{const{current:r,pageSize:t,...a}=n,{threadList:l}=await T({limit:t,pageNumber:r,...a});return{total:l.total,data:l.threadList}},columns:[{title:"Thread UUID",dataIndex:"threadUuid"},{title:"Agent",key:"agentUuid",render:(n,r)=>{const t=r.agent;return t?`${t.agent_name}`:"-"}},{title:"Create at",dataIndex:"createdAt",hideInSearch:!0,render:(n,r)=>u(r.createdAt)},{title:"Last updated",dataIndex:"updatedAt",hideInSearch:!0,render:(n,r)=>u(r.updatedAt)},{width:"80px",key:"action",title:"Action",fixed:"right",hideInSearch:!0,render:(n,r)=>e.jsx(c,{children:e.jsx(x,{width:620,hasFooter:!1,destroyOnHidden:!0,className:"shopify",title:"Message thread Details",trigger:e.jsx(m,{icon:h}),children:e.jsx(A,{formData:r})})})}]})})};export{C as default};
