import{e as b,y as u,v as m,b as j,f as l,h as y,j as e,x as S,z as f,a1 as L}from"./libs-BaOSQqCJ.js";import{r as N,q as F}from"./index-B1tRpNl-.js";import{S as P}from"./index-B_I2FUKr.js";import{S as q}from"./index-BOSnnQEB.js";import{g as C}from"./contactProfiles-B01NUKRh.js";import"./generate-M9-bx87Q.js";const A=()=>b(async()=>{var s;const a=await N(C);return((s=a==null?void 0:a.coordinationList)==null?void 0:s.coordinationList).map(o=>({agents:o.agents,label:o.coordinationName,value:o.coordinationUuid}))}),E="_container_18rc8_1",z="_contrl_18rc8_8",D="_preview_18rc8_15",I="_preview_box_18rc8_21",U="_placeholder_18rc8_22",r={container:E,contrl:z,preview:D,preview_box:I,placeholder:U},k="https://ideabosque-ai-chat.pages.dev",H=()=>{const[a]=u.useForm(),[c,s]=m(!1),[o,h]=m(),{data:d=[],loading:g}=A(),p=j.useMemo(()=>F.stringify({...o,mode:"preview"}),[o]),v=l(async()=>{const n=await a.validateFields();h(n)}),x=l(()=>{s(!0)}),_=l(()=>{s(!1)});return y(x,[p]),e.jsx(S,{title:"Preview",className:"shopify full-screen",children:e.jsxs("div",{className:r.container,children:[e.jsx("div",{className:r.contrl,children:e.jsxs(u,{form:a,submitter:!1,className:r.form,children:[e.jsx(f,{label:"Coordination",name:"coordination",options:d,fieldProps:{loading:g,onChange:()=>{a.resetFields(["agent"])}},rules:[{required:!0}]}),e.jsx(L,{name:["coordination"],children:({coordination:n})=>{if(!n)return null;const i=d.find(t=>t.value===n),w=i==null?void 0:i.agents.map(t=>({label:t.agent_uuid,value:t.agent_uuid}));return e.jsx(f,{label:"Agent",name:"agent",options:w,rules:[{required:!0}]})}}),e.jsx("div",{className:r.submitter,children:e.jsx(P,{block:!0,type:"primary",size:"large",onClick:v,children:"Apply"})})]})}),e.jsx("div",{className:r.preview,children:e.jsx(q,{loading:c,children:e.jsx("div",{className:r.preview_box,children:o?e.jsx("iframe",{width:"100%",height:"100%",allow:"geolocation;",onLoad:_,src:`${k}?${p}`,sandbox:"allow-scripts allow-same-origin"}):e.jsx("div",{className:r.placeholder,children:"Please select Coordination and Agency to preview."})})})})]})})};export{H as default};
