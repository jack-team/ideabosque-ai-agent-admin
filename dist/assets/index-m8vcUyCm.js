import{A as f,b as m,u,j as t,P as w,T as x,S as y,o as d,W as g,v as c,p as h,n as S}from"./libs-DVH06oKf.js";import{f as p}from"./index-DI1MWXAu.js";import{u as k,T as A}from"./index-DHrhuTJB.js";import{S as n}from"./index-BQD2aveu.js";import{d as j,q as N,i as C}from"./workflow-DzDxRJlq.js";const v=o=>{const{modal:s}=f.useApp(),r=m.useRef(null),i=u(async e=>{s.confirm({rootClassName:"shopify",okButtonProps:{className:"shopify"},cancelButtonProps:{className:"shopify"},title:"Are you sure you want to delete this record?",onOk:async()=>{var a;await j(e),(a=r.current)==null||a.reload()}})});return t.jsx(w,{className:"shopify",options:!1,search:!1,actionRef:r,rowKey:"flowSnippetUuid",pagination:{pageSize:10},request:async()=>{const{flowSnippetList:e}=await N({pageNumber:1,limit:100});return{total:e.total,data:e.flowSnippetList}},columns:[{title:"Workflow",dataIndex:"flowName"},{title:"Status",dataIndex:"status",render:(e,a)=>t.jsx(x,{children:a.status})},{title:"Create at",dataIndex:"createdAt",render:(e,a)=>p(a.createdAt)},{title:"Update at",dataIndex:"updatedAt",render:(e,a)=>p(a.updatedAt)},{key:"action",title:"Action",width:"160px",render:(e,a)=>t.jsxs(y,{children:[t.jsx(n,{size:"small",type:"primary",onClick:()=>{var l;return(l=o.onEdit)==null?void 0:l.call(o,a)},children:"Edit"}),t.jsx(n,{danger:!0,size:"small",children:"Delete",onClick:()=>i(a)})]})}]})},F="_form_19wg4_1",P={form:F},U=o=>{const[s]=d.useForm();return k(async()=>{var e;const r=await s.validateFields(),{insertUpdateFlowSnippet:i}=await C({...r,updatedBy:"admin",flowContext:JSON.stringify({}),flowRelationship:JSON.stringify({}),promptUuid:`prompt-${c()}`,promptVersionUuid:`prompt-version-${c()}`});(e=o.onSuccess)==null||e.call(o,i.flowSnippet)}),t.jsx(d,{form:s,submitter:!1,className:P.form,children:t.jsx(g,{label:"Workflow name",name:"flowName",rules:[{required:!0}]})})},O=()=>{const o=h(),s=u(r=>{const{flowSnippetUuid:i,flowSnippetVersionUuid:e}=r;o(`/agent-workflows/detail/${i}/${e}`)});return t.jsx(S,{title:"Agent workflows",className:"shopify",extra:[t.jsx(A,{width:400,destroyOnHidden:!0,title:"Create workflow",okText:"Create",trigger:t.jsx(n,{type:"primary",children:"Create workflow"}),children:t.jsx(U,{onSuccess:s})},"add")],children:t.jsx(v,{onEdit:s})})};export{O as default};
