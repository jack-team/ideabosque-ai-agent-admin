import{v as m,A as y,j as a,W as u,F as h,w as C,b as j,e as p,t as A,P as D,S as N,B as l}from"./libs-C3B0mh5y.js";import"./index-C2rjxokF.js";import{T as f}from"./index-Crygcb5j.js";import{f as g}from"./index-DWEM5X_k.js";import{j as P}from"./useFetchData-CBMRYhOj.js";import{b as F,u as w}from"./hooks-B9oYRLOY.js";import{i as T,d as U,g as b}from"./contactProfiles-TG9ZtEdy.js";import"./index-DkLb8OB3.js";import"./workflow-qJJaIAWw.js";import"./generate-MBXqf0UO.js";import"./wizard-CI4gmNY6.js";import"./enum-Ct7sVdAK.js";const _=o=>{if(!o)return;const{agents:s=[],...n}=o;return{...n,agents:s.map(r=>r.agent_uuid)}},k=(o,s)=>{const{agents:n=[],...r}=o,i=n.map(t=>{var d;const e=(d=s.find(c=>c.value===t))==null?void 0:d.realData;return{agent_uuid:t,agent_type:"task",agent_name:e==null?void 0:e.agentName,agent_description:e==null?void 0:e.agentDescription}});return{...r,agents:i,updatedBy:"Admin"}},x=o=>{const{formData:s}=o,[n]=m.useForm(),{message:r}=y.useApp(),[i]=F(),t=P();return w(async()=>{var d;const e=await n.validateFields();try{const c=k(e,t.options);await T(c),r.success("Coordination created successfully."),i(),(d=o.onSuccess)==null||d.call(o)}catch{r.error("Failed to create Coordination.")}}),a.jsxs(m,{form:n,submitter:!1,style:{padding:"24px 0 0 0"},initialValues:_(s),children:[a.jsx(u,{name:"coordinationUuid",hidden:!0}),a.jsx(u,{label:"Coordination Name",name:"coordinationName",rules:[{required:!0}]}),a.jsx(h,{label:"Coordination Description",name:"coordinationDescription",rules:[{required:!0}]}),a.jsx(C,{label:"Agents",name:"agents",mode:"multiple",options:t.options,fieldProps:{maxTagCount:1,loading:t.loading}})]})},H=()=>{const{modal:o,message:s}=y.useApp(),n=j.useRef(null),r=p(()=>{var t;(t=n.current)==null||t.reload()}),i=p(t=>{o.confirm({title:"Are you sure you want to delete?",okText:"Delete",okButtonProps:{danger:!0,className:"shopify"},cancelButtonProps:{className:"shopify"},onOk:async()=>{try{await U({coordinationUuid:t.coordinationUuid}),r(),s.success("Deletion successful.")}catch(e){return s.error("Deletion failed."),Promise.reject(e)}}})});return a.jsx(A,{className:"shopify",title:"Coordinations",extra:a.jsx(f,{width:440,destroyOnHidden:!0,className:"shopify",title:"Create Coordination",trigger:a.jsx(l,{className:"shopify",type:"primary",children:"Create coordination"}),children:a.jsx(x,{onSuccess:r})}),children:a.jsx(D,{actionRef:n,className:"shopify",search:!1,toolBarRender:!1,rowKey:"coordinationUuid",columns:[{title:"Coordination UUID",dataIndex:"coordinationUuid"},{title:"Coordination Name",dataIndex:"coordinationName"},{title:"Create at",dataIndex:"createAt",render:(t,e)=>g(e.createAt)},{title:"Update at",dataIndex:"updateAt",render:(t,e)=>g(e.updateAt)},{title:"Action",key:"action",width:"150px",align:"center",render:(t,e)=>a.jsxs(N,{children:[a.jsx(f,{width:440,destroyOnHidden:!0,className:"shopify",title:"Edit Coordination",trigger:a.jsx(l,{className:"shopify",size:"small",type:"primary",children:"Edit"}),children:a.jsx(x,{formData:e,onSuccess:r})}),a.jsx(l,{danger:!0,size:"small",className:"shopify",onClick:()=>i(e),children:"Delete"})]})}],request:async t=>{const{coordinationList:e}=await b({limit:t.pageSize,pageNumber:t.current});return{total:e.total,data:e.coordinationList}}})})};export{H as default};
