import{o as f,A as j,b as p,j as e,W as u,w as v,f as M,g as x,u as y,n as b,P as _,d as S,S as g}from"./libs-CxhqsusD.js";import"./index-C4u-YTo0.js";import{b as A,u as w,T as P}from"./index-BIx9Le_D.js";import{c as D,e as I}from"./workflow-Cy4gCUZY.js";import{S as m}from"./index-sIVXsceN.js";import"./request-DCRxv3nq.js";const T=i=>{const{tools:n,headers:a,...l}=i,s=Object.keys(a).reduce((d,r)=>[...d,{key:r,value:a[r]}],[]);return{...l,headers:s}},q=i=>{const{headers:n,...a}=i,l=n.reduce((s,d)=>({...s,[d.key]:d.value}),{});return{...a,headers:l,updatedBy:"admin"}},C="_edit_form_1udw2_1",F={edit_form:C},L=i=>{const{formData:n,onSuccess:a}=i,[l]=f.useForm(),{message:s}=j.useApp(),[d]=A(),r=p.useMemo(()=>{if(n)return T(n)},[n]);return w(async()=>{const t=await l.validateFields(),c=q(t);try{await D(c),d(),a==null||a(),s.success(`Successfully ${n?"updated":"created"} Mcp server.`)}catch(o){return s.error(o.message),Promise.reject(o)}}),e.jsxs(f,{form:l,submitter:!1,scrollToFirstError:!0,initialValues:r,className:F.edit_form,children:[e.jsx(u,{hidden:!0,name:"mcpServerUuid"}),e.jsx(u,{label:"Mcp label",name:"mcpLabel",rules:[{required:!0}]}),e.jsx(u,{name:"mcpServerUrl",label:"Mcp server url",rules:[{required:!0,type:"url"}]}),e.jsx(v,{required:!0,label:"Headers",name:"headers",initialValue:[{}],alwaysShowItemLabel:!0,className:"custom_form_list",creatorButtonProps:{creatorButtonText:"Add Header"},rules:[{validator:(t,c=[],o)=>{if(!c.length){o("Please add Header");return}o()}}],children:e.jsxs(M,{gutter:16,children:[e.jsx(x,{span:12,children:e.jsx(u,{required:!0,label:"Key",name:"key",rules:[{required:!0}]})}),e.jsx(x,{span:12,children:e.jsx(u,{required:!0,label:"Value",name:"value",rules:[{required:!0}]})})]})})]})},E=()=>{const{modal:i,message:n}=j.useApp(),a=p.useRef(null),l=y(()=>{var r;(r=a.current)==null||r.reload()}),s=(r,t)=>e.jsx(P,{width:550,destroyOnHidden:!0,trigger:r,title:`${t?"Edit":"Create"} Mcp server`,children:e.jsx(L,{formData:t,onSuccess:l})}),d=y(r=>{i.confirm({title:"Are you sure you want to delete the component?",okText:"Delete",cancelButtonProps:{className:"shopify"},okButtonProps:{className:"shopify"},onOk:async()=>{}})});return e.jsx(b,{className:"shopify",title:"Mcp Servers",extra:s(e.jsx(m,{type:"primary",children:"Create Mcp Server"})),children:e.jsx(_,{className:"shopify",actionRef:a,rowKey:"mcpServerUuid",options:!1,search:{layout:"vertical",optionRender:(r,t,c)=>c.map(o=>p.cloneElement(o,{className:"shopify"}))},columns:[{dataIndex:"mcpLabel",title:"Mcp label"},{dataIndex:"mcpServerUrl",title:"Mcp Server Url",hideInSearch:!0},{dataIndex:"createdAt",title:"Created At",hideInSearch:!0,render:(r,t)=>S(t.createdAt).format("YYYY/MM/DD HH:mm:ss")},{dataIndex:"updatedAt",title:"Updated at",hideInSearch:!0,render:(r,t)=>S(t.updatedAt).format("YYYY/MM/DD HH:mm:ss")},{dataIndex:"updatedBy",title:"Updated by",hideInSearch:!0},{key:"action",title:"Action",width:"100px",align:"center",hideInSearch:!0,fixed:"right",render:(r,t)=>e.jsxs(g,{children:[e.jsx(m,{danger:!0,size:"small",onClick:()=>d(t),children:"Delete"}),s(e.jsx(m,{type:"primary",size:"small",children:"Edit"}),t)]})}],scroll:{x:"max-content"},request:async r=>{const{current:t=1,pageSize:c=10,...o}=r,{mcpServerList:h}=await I({pageNumber:t,limit:c,...o});return{total:h.total,data:h.mcpServerList}}})})};export{E as default};
