import{v as h,A as v,b as S,j as e,W as u,G as M,l as b,m as f,x as g,e as x,t as A,P as _,y,S as P}from"./libs-C3B0mh5y.js";import"./index-C2rjxokF.js";import{b as w,u as D}from"./hooks-B9oYRLOY.js";import{c as I,e as T}from"./workflow-qJJaIAWw.js";import{T as q}from"./index-Crygcb5j.js";import{S as m}from"./index-DkLb8OB3.js";import"./generate-MBXqf0UO.js";const C=d=>{const{tools:o,headers:a,...n}=d,l=Object.keys(a).reduce((s,c)=>[...s,{key:c,value:a[c]}],[]);return{...n,headers:l}},F=d=>{const{headers:o,...a}=d,n=o.reduce((l,s)=>({...l,[s.key]:s.value}),{});return{...a,headers:n,updatedBy:"admin"}},L="_edit_form_1udw2_1",k={edit_form:L},B=d=>{const{formData:o,onSuccess:a}=d,[n]=h.useForm(),{message:l}=v.useApp(),[s]=w(),c=S.useMemo(()=>{if(o)return C(o)},[o]);return D(async()=>{const t=await n.validateFields(),r=F(t);try{await I(r),s(),a==null||a(),l.success(`Successfully ${o?"updated":"created"} Mcp server.`)}catch(i){return l.error(i.message),Promise.reject(i)}}),e.jsxs(h,{form:n,submitter:!1,scrollToFirstError:!0,initialValues:c,className:k.edit_form,children:[e.jsx(u,{hidden:!0,name:"mcpServerUuid"}),e.jsx(u,{label:"Mcp label",name:"mcpLabel",rules:[{required:!0}]}),e.jsx(u,{name:"mcpServerUrl",label:"Mcp server url",rules:[{required:!0,type:"url"}]}),e.jsx(M,{required:!0,label:"Headers",name:"headers",initialValue:[{}],alwaysShowItemLabel:!0,className:"custom_form_list",creatorButtonProps:{creatorButtonText:"Add Header"},rules:[{validator:(t,r=[],i)=>{if(!r.length){i("Please add Header");return}i()}}],children:e.jsxs(b,{gutter:16,children:[e.jsx(f,{span:12,children:e.jsx(u,{required:!0,label:"Key",name:"key",rules:[{required:!0}]})}),e.jsx(f,{span:12,children:e.jsx(u,{required:!0,label:"Value",name:"value",rules:[{required:!0}]})})]})})]})},O=()=>{const{modal:d,message:o}=v.useApp(),a=S.useRef(null),n=g(),l=x(()=>{var t;(t=a.current)==null||t.reload()}),s=(t,r)=>e.jsx(q,{width:550,destroyOnHidden:!0,trigger:t,title:`${r?"Edit":"Create"} Mcp server`,children:e.jsx(B,{formData:r,onSuccess:l})}),c=x(t=>{d.confirm({title:"Are you sure you want to delete the component?",okText:"Delete",cancelButtonProps:{className:"shopify"},okButtonProps:{className:"shopify"},onOk:async()=>{}})});return e.jsx(A,{className:"shopify",title:"Mcp Servers",onBack:()=>n(-1),extra:s(e.jsx(m,{type:"primary",children:"Create Mcp Server"})),children:e.jsx(_,{className:"shopify",actionRef:a,rowKey:"mcpServerUuid",options:!1,search:!1,columns:[{dataIndex:"mcpLabel",title:"Mcp label"},{dataIndex:"mcpServerUrl",title:"Mcp Server Url",hideInSearch:!0},{dataIndex:"createdAt",title:"Created At",hideInSearch:!0,render:(t,r)=>y(r.createdAt).format("YYYY/MM/DD HH:mm:ss")},{dataIndex:"updatedAt",title:"Updated at",hideInSearch:!0,render:(t,r)=>y(r.updatedAt).format("YYYY/MM/DD HH:mm:ss")},{dataIndex:"updatedBy",title:"Updated by",hideInSearch:!0},{key:"action",title:"Action",width:"100px",align:"center",hideInSearch:!0,fixed:"right",render:(t,r)=>e.jsxs(P,{children:[s(e.jsx(m,{type:"primary",size:"small",children:"Edit"}),r),e.jsx(m,{danger:!0,size:"small",onClick:()=>c(r),children:"Delete"})]})}],scroll:{x:"max-content"},request:async t=>{const{current:r=1,pageSize:i=10,...j}=t,{mcpServerList:p}=await T({pageNumber:r,limit:i,...j});return{total:p.total,data:p.mcpServerList}}})})};export{O as default};
