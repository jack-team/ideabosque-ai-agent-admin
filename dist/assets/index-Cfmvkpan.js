import{v as f,A as y,e as h,b as G,j as e,W as m,F as W,w as j,x as A,t as D,P as N,S as x,B as u}from"./libs-CZ9azTWP.js";import"./index-4w9JELLy.js";import{T as z}from"./index-BkcFZ6V9.js";import{f as g}from"./index-BO-i8_LU.js";import{b as F,u as I}from"./hooks-BFUUFmjP.js";import{i as P,d as b,g as S}from"./wizard-BJSNmDHY.js";import{k as C}from"./useFetchData-DhPorz9K.js";import"./index-D8jLKQFW.js";import"./generate-fRrcnwPE.js";import"./workflow-AomR6_A5.js";import"./enum-Ct7sVdAK.js";const U=a=>{if(!a)return;const{wizards:s,...i}=a;return{...i,wizardUuids:s.map(o=>o.wizard_uuid)}},T=a=>({...a,updatedBy:"Admin"}),w=a=>{const{formData:s}=a,[i]=f.useForm(),{message:o}=y.useApp(),[d]=F(),n=C(),t=h(()=>{i.setFieldsValue(U(s))});return G.useEffect(()=>{s&&t()},[s]),I(async()=>{var l;const r=await i.validateFields(),c=T(r);try{await P(c),d(),(l=a.onSuccess)==null||l.call(a),o.success(`Wizard Group ${s?"updated":"created"} successfully.`)}catch{o.error(`Failed to ${s?"update":"create"} Wizard Group.`)}}),e.jsxs(f,{form:i,layout:"horizontal",submitter:!1,labelCol:{flex:"220px"},labelAlign:"left",style:{padding:"24px 0 0 0"},children:[e.jsx(m,{hidden:!0,name:"wizardUuid"}),e.jsx(m,{label:"Wizard Group Name",name:"wizardGroupName",rules:[{required:!0}]}),e.jsx(W,{label:"Wizard Group Description",name:"wizardGroupDescription",rules:[{required:!0}]}),e.jsx(m,{label:"Weight",name:"weight",fieldProps:{type:"number"},rules:[{required:!0}]}),e.jsx(j,{label:"Wizards",name:"wizardUuids",mode:"multiple",options:n.options,fieldProps:{maxTagCount:1,loading:n.loading}})]})},H=()=>{const{modal:a,message:s}=y.useApp(),i=A(),o=G.useRef(null),d=h(()=>{var t;(t=o.current)==null||t.reload()}),n=h(t=>{a.confirm({title:"Are you sure you want to delete?",okText:"Delete",okButtonProps:{danger:!0,className:"shopify"},cancelButtonProps:{className:"shopify"},onOk:async()=>{try{await b({wizardGroupUuid:t.wizardGroupUuid}),d(),s.success("Deletion successful.")}catch(r){return s.error("Deletion failed."),Promise.reject(r)}}})});return e.jsx(D,{title:"Wizard Groups",extra:e.jsxs(x,{size:16,children:[e.jsx(u,{className:"shopify",onClick:()=>i("/wizards"),children:"Wizards"}),e.jsx(z,{width:600,className:"shopify",title:"Create Wizard Group",trigger:e.jsx(u,{className:"shopify",type:"primary",children:"Create Wizard Group"}),children:e.jsx(w,{})})]}),children:e.jsx(N,{actionRef:o,search:!1,options:!1,scroll:{x:"max-content"},rowKey:"agentUuid",className:"shopify",request:async t=>{const{current:r,pageSize:c,...l}=t,{wizardGroupList:p}=await S({limit:c,pageNumber:r,...l});return{total:p.total,data:p.wizardGroupList}},columns:[{title:"Wizard Group UUID",dataIndex:"wizardGroupUuid",hideInSearch:!0},{title:"Wizard Group Name",dataIndex:"wizardGroupName"},{hideInSearch:!0,title:"Wizard Group Description",dataIndex:"wizardGroupDescription"},{title:"Weight",dataIndex:"weight",hideInSearch:!0},{title:"Create at",dataIndex:"createdAt",hideInSearch:!0,render:(t,r)=>g(r.createdAt)},{title:"Update at",dataIndex:"updatedAt",hideInSearch:!0,render:(t,r)=>g(r.updatedAt)},{width:"120px",key:"action",title:"Action",align:"center",fixed:"right",hideInSearch:!0,render:(t,r)=>e.jsxs(x,{children:[e.jsx(z,{width:600,destroyOnHidden:!0,className:"shopify",title:"Create agent",trigger:e.jsx(u,{size:"small",type:"primary",className:"shopify",children:"Edit"}),children:e.jsx(w,{formData:r,onSuccess:d})}),e.jsx(u,{danger:!0,size:"small",className:"shopify",onClick:()=>n(r),children:"Delete"})]})}]})})};export{H as default};
