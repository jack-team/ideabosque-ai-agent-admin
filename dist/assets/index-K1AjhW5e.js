import{y as f,A as z,f as m,b as G,j as e,W as p,J as j,z as U,w as k,x as B,P as A,S as h,D,L as P,B as x}from"./libs-BaOSQqCJ.js";import{f as g}from"./index-DTADpAFe.js";import{T as w}from"./index-DKUEh0z3.js";import{I as y}from"./index-CjwgjA-6.js";import{b as S,u as F}from"./hooks-HQZQxy-z.js";import{i as N,d as b,g as W}from"./wizard-BDsquuTS.js";import{k as C}from"./useFetchData-CZvRU8h_.js";import"./index-BMRnIUQf.js";import"./generate-BQHSwzam.js";import"./workflow-B_nGYIaA.js";import"./enum-Ct7sVdAK.js";const T=t=>{if(!t)return;const{wizards:s,...o}=t;return{...o,wizardUuids:s.map(i=>i.wizard_uuid)}},v=t=>({...t,updatedBy:"Admin"}),I=t=>{const{formData:s}=t,[o]=f.useForm(),{message:i}=z.useApp(),[n]=S(),d=C(),a=m(()=>{o.setFieldsValue(T(s))});return G.useEffect(()=>{s&&a()},[s]),F(async()=>{var u;const r=await o.validateFields(),c=v(r);try{await N(c),n(),(u=t.onSuccess)==null||u.call(t),i.success(`UI Block Group ${s?"updated":"created"} successfully.`)}catch{i.error(`Failed to ${s?"update":"create"} UI Block Group.`)}}),e.jsxs(f,{form:o,submitter:!1,style:{padding:"24px 0 0 0"},children:[e.jsx(p,{hidden:!0,name:"wizardUuid"}),e.jsx(p,{label:"UI Block Group name",name:"wizardGroupName",rules:[{required:!0}]}),e.jsx(j,{label:"UI Block Group description",name:"wizardGroupDescription",rules:[{required:!0}]}),e.jsx(p,{label:"Weight",name:"weight",fieldProps:{type:"number"},rules:[{required:!0}]}),e.jsx(U,{label:"UI Blocks",name:"wizardUuids",mode:"multiple",options:d.options,fieldProps:{maxTagCount:1,loading:d.loading}})]})},V=()=>{const{modal:t,message:s}=z.useApp(),o=k(),i=G.useRef(null),n=m(()=>{var a;(a=i.current)==null||a.reload()}),d=m(a=>{t.confirm({title:"Are you sure you want to delete?",okText:"Delete",okButtonProps:{danger:!0,className:"shopify"},cancelButtonProps:{className:"shopify gray"},onOk:async()=>{try{await b({wizardGroupUuid:a.wizardGroupUuid}),n(),s.success("Deletion successful.")}catch(r){return s.error("Deletion failed."),Promise.reject(r)}}})});return e.jsx(B,{title:"UI Block Groups",extra:e.jsxs(h,{size:16,children:[e.jsx(x,{className:"shopify gray",onClick:()=>o("/wizards"),children:"Blocks"}),e.jsx(w,{width:600,className:"shopify",title:"Create new UI Block Group",trigger:e.jsx(x,{className:"shopify",type:"primary",children:"Create new UI Block Group"}),children:e.jsx(I,{})})]}),children:e.jsx(A,{actionRef:i,search:!1,options:!1,scroll:{x:"max-content"},rowKey:"agentUuid",className:"shopify",request:async a=>{const{current:r,pageSize:c,...u}=a,{wizardGroupList:l}=await W({limit:c,pageNumber:r,...u});return{total:l.total,data:l.wizardGroupList}},columns:[{title:"UI Block Group name",dataIndex:"wizardGroupName"},{title:"UI Block Group UUID",dataIndex:"wizardGroupUuid",hideInSearch:!0},{title:"Weight",dataIndex:"weight",hideInSearch:!0},{title:"Create at",dataIndex:"createdAt",hideInSearch:!0,render:(a,r)=>g(r.createdAt)},{title:"Last updated",dataIndex:"updatedAt",hideInSearch:!0,render:(a,r)=>g(r.updatedAt)},{width:"100px",key:"action",title:"Action",fixed:"right",hideInSearch:!0,render:(a,r)=>e.jsxs(h,{children:[e.jsx(w,{width:600,destroyOnHidden:!0,className:"shopify",title:"UI Block Group Details",trigger:e.jsx(y,{icon:D}),children:e.jsx(I,{formData:r,onSuccess:n})}),e.jsx(y,{icon:P,onClick:()=>d(r)})]})}]})})};export{V as default};
