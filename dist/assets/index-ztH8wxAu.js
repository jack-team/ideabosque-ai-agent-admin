import{q as t,j as e,a1 as c,k as h,t as p,b as j,u as f,p as g,P as y,S as I,B as b}from"./libs-WQIapg8s.js";import{c as T,f as m}from"./index-8FeMofDy.js";import{T as S}from"./index-Dq05QhI_.js";import{L as a}from"./index-C-M5vw69.js";import{b as A}from"./generate-B_gXMFOJ.js";import"./index-CMgbGoDU.js";const i={flex:"104px"},k=l=>{const{formData:r}=l,[o]=t.useForm();return e.jsxs(t,{form:o,submitter:!1,layout:"horizontal",labelAlign:"left",labelCol:{flex:"120px"},initialValues:r,style:{padding:"24px 0"},children:[e.jsx(t.Item,{label:"Function Name",name:"functionName",children:e.jsx(a,{})}),e.jsx(t.Item,{label:"Status",name:"status",children:e.jsx(a,{})}),e.jsx(t.Item,{label:"Time Spent",name:"timeSpent",children:e.jsx(a,{})}),e.jsx(c,{orientation:"left",children:"Arguments"}),e.jsxs(h,{className:"shopify",children:[e.jsx(t.Item,{label:"Agent UUID",name:["arguments","agent_uuid"],labelCol:i,children:e.jsx(a,{})}),e.jsx(t.Item,{label:"Run UUID",name:["arguments","run_uuid"],labelCol:i,children:e.jsx(a,{})}),e.jsx(t.Item,{label:"Stream",name:["arguments","stream"],labelCol:i,children:e.jsx(a,{})}),e.jsx(t.Item,{label:"Thread UUID",name:["arguments","thread_uuid"],labelCol:i,children:e.jsx(a,{})}),e.jsx(t.Item,{label:"User Query",name:["arguments","user_query"],labelCol:i,children:e.jsx(a,{pre:!0})})]}),e.jsx(c,{orientation:"left",children:"Notes"}),e.jsx(t.Item,{name:"notes",children:e.jsx(a,{})}),e.jsx(c,{orientation:"left",children:"Result"}),e.jsx(t.Item,{name:"result",children:e.jsx(a,{})})]})},C=async l=>{const r=await A({type:"Query",name:"asyncTaskList"});return T.graphql({query:r,variables:l})},_=()=>{const l=p(),r=j.useRef(null),o=f(()=>{var s;(s=r.current)==null||s.reload()});return e.jsx(g,{title:"Async Tasks",onBack:()=>l(-1),children:e.jsx(y,{pagination:{pageSize:10},actionRef:r,search:!1,options:!1,scroll:{x:"max-content"},rowKey:"asyncTaskUuid",className:"shopify",request:async s=>{const{current:n,pageSize:u,...x}=s,{asyncTaskList:d}=await C({limit:u,pageNumber:n,...x});return{total:d.total,data:d.asyncTaskList}},columns:[{title:"Async Task UUID",dataIndex:"asyncTaskUuid"},{title:"Function Name",dataIndex:"functionName"},{title:"Status",dataIndex:"status"},{title:"Time Spent",dataIndex:"timeSpent"},{title:"Create at",dataIndex:"createdAt",hideInSearch:!0,render:(s,n)=>m(n.createdAt)},{title:"Update at",dataIndex:"updatedAt",hideInSearch:!0,render:(s,n)=>m(n.updatedAt)},{width:"120px",key:"action",title:"Action",align:"center",hideInSearch:!0,fixed:"right",render:(s,n)=>e.jsx(I,{children:e.jsx(S,{width:640,hasFooter:!1,destroyOnHidden:!0,className:"shopify",title:"Async Task",trigger:e.jsx(b,{size:"small",className:"shopify",children:"View"}),children:e.jsx(k,{formData:n,onSuccess:o})})})}]})})};export{_ as default};
