import{k as e,K as A,r as I,D as c,f as k}from"./vendor-BASRo5BV.js";import"./index-CkzW3jjS.js";import{T as u}from"./index-dajmsFhv.js";import{S as d}from"./index-D0-MVSqp.js";import{I as f}from"./index-CNAIOIDt.js";import{i as h,q as F}from"./workflow-B47qDHki.js";import{T as P,a as y}from"./const-DP1vyTQS.js";import{S as g}from"./enum-Ct7sVdAK.js";import{g as m,A as T,W as j,h as S,f as C,P as b,S as x,i as M,j as U}from"./ui-CrIkMfD8.js";import{b as v,u as w}from"./hooks-B_efwfrq.js";import{S as N}from"./index-CiOz3YR8.js";import{u as _}from"./useFetchData-BhJ9MwiL.js";import"./utils-BMDVF5td.js";import"./generate-BJFwJYjO.js";import"./wizard-BfJF1VPI.js";const V="_edit_form_k8an2_1",D={edit_form:V},q=a=>{const[o]=m.useForm(),{message:n}=T.useApp(),[i]=v();return w(async()=>{var s;const t=await o.validateFields();try{const{insertUpdatePromptTemplate:r}=await h({...t,templateContext:"",updatedBy:"Admin"});i(),(s=a.onSuccess)==null||s.call(a,r.promptTemplate)}catch(r){return n.error(r.message),Promise.reject(r)}}),e.jsxs(m,{form:o,submitter:!1,className:D.edit_form,children:[e.jsx(j,{label:"Template name",name:"promptName",rules:[{required:!0}]}),e.jsx(S,{label:"Template type",name:"promptType",valueEnum:y,initialValue:P.SystemPrompt,rules:[{required:!0}]})]})},B=a=>{const{formData:o}=a,[n]=m.useForm(),{message:i}=T.useApp(),[t]=v();w(async()=>{var l;const p=await n.validateFields();try{await h({...p,status:g.Active,updatedBy:"Admin"}),t(),(l=a.onSuccess)==null||l.call(a),i.success("The version has been applied successfully.")}catch{i.error("The version application failed.")}});const{options:s,loading:r}=_(o==null?void 0:o.promptUuid);return e.jsx(m,{form:n,initialValues:o,submitter:!1,style:{padding:"24px 0 0 0"},children:e.jsxs(N,{loading:r,children:[e.jsx(j,{hidden:!0,name:"promptUuid"}),e.jsx(S,{label:"Versions",name:"promptVersionUuid",options:s,fieldProps:{loading:r},rules:[{required:!0}]})]})})},te=()=>{const a=A(),o=I.useRef(null),n=c(()=>{var t;(t=o.current)==null||t.reload()}),i=c(t=>{const{promptUuid:s,promptVersionUuid:r}=t;a(`/workflow-templates/detail/${s}/${r}`,{state:t})});return e.jsx(C,{className:"shopify",title:"Featured templates",extra:e.jsxs(x,{size:16,children:[e.jsx(d,{className:"gray",onClick:()=>a("/workflow-mcp-servers"),children:"Mcp Servers"}),e.jsx(d,{className:"gray",onClick:()=>a("/workflow-ui-components"),children:"Components"}),e.jsx(u,{width:400,destroyOnHidden:!0,title:"Create template",trigger:e.jsx(d,{type:"primary",children:"Create Template"}),children:e.jsx(q,{onSuccess:i})})]}),children:e.jsx(b,{className:"shopify",rowKey:"promptUuid",actionRef:o,options:!1,search:!1,pagination:{defaultPageSize:5},columns:[{dataIndex:"promptName",title:"Template",fixed:"left"},{hideInSearch:!0,dataIndex:"promptType",title:"Type",valueEnum:y},{dataIndex:"promptDescription",title:"Description",hideInSearch:!0},{dataIndex:"updatedAt",title:"Updated at",hideInSearch:!0,render:(t,s)=>k(s.updatedAt).format("YYYY/MM/DD HH:mm:ss")},{dataIndex:"updatedBy",title:"Updated by",hideInSearch:!0},{key:"action",title:"Action",width:"100px",align:"center",hideInSearch:!0,fixed:"right",render:(t,s)=>e.jsxs(x,{children:[e.jsx(f,{icon:M,onClick:()=>i(s)}),e.jsx(u,{width:400,title:"Versions",destroyOnHidden:!0,okText:"Apply",trigger:e.jsx(f,{icon:U}),children:e.jsx(B,{formData:s,onSuccess:n})})]})}],scroll:{x:"max-content"},request:async t=>{const{current:s=1,pageSize:r=10,...p}=t,{promptTemplateList:l}=await F({pageNumber:s,limit:r,statuses:[g.Active],...p});return{total:l.total,data:l.promptTemplateList}}})})};export{te as default};
