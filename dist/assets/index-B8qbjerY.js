import{v as x,A as C,j as e,W as i,w as A,G as _,l as b,m as h,x as I,b as P,e as f,t as T,P as N,y,S}from"./libs-CZ9azTWP.js";import"./index-1JQ8SzD-.js";import{b as U,u as M}from"./hooks-CVF4ayDs.js";import{a as v,d as D,b as F}from"./workflow-BCRMZPof.js";import{T as z}from"./index-LqR22ykg.js";import{S as u}from"./index-CoeBZIRU.js";import"./generate-y9PIVPyp.js";var p=(r=>(r.wizardGroup="wizard_group",r.externalIntegration="external_integration",r))(p||{});const g={[p.wizardGroup]:"Wizard group",[p.externalIntegration]:"External integration"},E="_edit_form_k8an2_1",Y={edit_form:E},k=r=>{const{formData:l,onSuccess:s}=r,[n]=x.useForm(),{message:o}=C.useApp(),[d]=U();return M(async()=>{const m=await n.validateFields();try{await v({...m,updatedBy:"Admin"}),d(),s==null||s(),o.success(`Successfully ${l?"updated":"created"} UI component.`)}catch(t){return o.error(t.message),Promise.reject(t)}}),e.jsxs(x,{form:n,submitter:!1,initialValues:l,className:Y.edit_form,children:[e.jsx(i,{hidden:!0,name:"uiComponentUuid"}),e.jsx(i,{label:"Tag name",name:"tagName",rules:[{required:!0}]}),e.jsx(A,{name:"uiComponentType",label:"Component type",rules:[{required:!0}],valueEnum:g}),e.jsx(i,{name:"waitFor",label:"Wait for",rules:[{required:!0}]}),e.jsx(_,{label:"Parameters",name:"parameters",alwaysShowItemLabel:!0,className:"custom_form_list",required:!0,rules:[{validator:(m,t=[],a)=>{if(!t.length){a("Please add parameter");return}a()}}],children:e.jsxs(b,{gutter:16,children:[e.jsx(h,{span:12,children:e.jsx(i,{name:"name",label:"Name",rules:[{required:!0}]})}),e.jsx(h,{span:12,children:e.jsx(i,{name:"parameter",label:"Parameter",rules:[{required:!0}]})})]})})]})},O=()=>{const r=I(),{modal:l,message:s}=C.useApp(),n=P.useRef(null),o=f(()=>{var t;(t=n.current)==null||t.reload()}),d=(t,a)=>e.jsx(z,{width:600,destroyOnHidden:!0,trigger:t,title:`${a?"Edit":"Create"} Component`,children:e.jsx(k,{formData:a,onSuccess:o})}),m=f(t=>{l.confirm({title:"Are you sure you want to delete the component?",okText:"Delete",cancelButtonProps:{className:"shopify"},okButtonProps:{className:"shopify"},onOk:async()=>{await D({uiComponentType:t.uiComponentType,uiComponentUuid:t.uiComponentUuid}),o(),s.success("Component deleted successfully.")}})});return e.jsx(T,{className:"shopify",title:"Ui Components",onBack:()=>r(-1),extra:d(e.jsx(u,{type:"primary",children:"Create Component"})),children:e.jsx(N,{className:"shopify",actionRef:n,rowKey:"uiComponentUuid",options:!1,search:!1,columns:[{dataIndex:"tagName",title:"Tag Name"},{dataIndex:"uiComponentType",title:"Component Type",valueEnum:g},{dataIndex:"createdAt",title:"Created At",hideInSearch:!0,render:(t,a)=>y(a.createdAt).format("YYYY/MM/DD HH:mm:ss")},{dataIndex:"updatedAt",title:"Updated at",hideInSearch:!0,render:(t,a)=>y(a.updatedAt).format("YYYY/MM/DD HH:mm:ss")},{dataIndex:"updatedBy",title:"Updated by",hideInSearch:!0},{key:"action",title:"Action",width:"100px",align:"center",hideInSearch:!0,fixed:"right",render:(t,a)=>e.jsxs(S,{children:[e.jsx(u,{danger:!0,size:"small",onClick:()=>m(a),children:"Delete"}),d(e.jsx(u,{type:"primary",size:"small",children:"Edit"}),a)]})}],scroll:{x:"max-content"},request:async t=>{const{current:a=1,pageSize:j=10,...w}=t,{uiComponentList:c}=await F({pageNumber:a,limit:j,...w});return{total:c.total,data:c.uiComponentList}}})})};export{O as default};
