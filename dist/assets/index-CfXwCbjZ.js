import{o as x,u,ai as i,j as e,h as I,W as n,b as f,n as L,P,d as b,S as v,aj as A,B as S,a7 as w}from"./libs-Clw9C49h.js";import{c as C}from"./index-CyTaOGOS.js";import{T as y}from"./index-g0lC1wlR.js";import"./index-D3QcqB_5.js";import{u as D}from"./hooks-V0qdfiJ4.js";import{q as E,i as M,g as T,d as _}from"./llm-C7Zm3VEz.js";import"./index-DxFRfNm6.js";import"./request-BPdAPW8d.js";const q="_container_1wk1t_1",F={container:q},j=o=>{const{insert:r=!0,formData:m,onSuccess:t}=o,[a]=x.useForm(),l=u(async()=>{var p;const s=await a.validateFields(),{llmProvider:d,llmName:g}=s,c=await E({llmProvider:d,llmName:g});if((p=c==null?void 0:c.llm)!=null&&p.llm)return i.error("item already exist."),Promise.reject();try{const h={...s,updatedBy:"admin"};await M(h),t==null||t(),i.success(`${r?"Created":"Updated"} successfully.`)}catch{i.error(`${r?"Creation":"Updated"} failed.`)}});return D(l),e.jsx("div",{className:F.container,children:e.jsx(x,{form:a,submitter:!1,labelAlign:"left",layout:"horizontal",initialValues:m,labelCol:{flex:"160px"},children:e.jsxs(I,{children:[e.jsx(n,{name:"llmProvider",label:"Llm Provider",rules:[{required:!0}]}),e.jsx(n,{label:"Llm Name",name:"llmName",rules:[{required:!0}]}),e.jsx(n,{name:"className",label:"Class Name",rules:[{required:!0}]}),e.jsx(n,{name:"moduleName",label:"Module Name",rules:[{required:!0}]})]})})})},N=600,$=()=>{const o=f.useRef(null),r=u(()=>{var t;(t=o.current)==null||t.reload()}),m=u(async t=>{try{await _({llmName:t.llmName,llmProvider:t.llmProvider}),r(),i.success("Deleted successfully.")}catch{i.error("Deleted failed.")}});return e.jsx(L,{className:"shopify",title:"AI Core Engine -> llm",children:e.jsx(P,{className:"shopify",actionRef:o,rowKey:"moduleName",options:!1,search:{labelWidth:"auto",optionRender:(t,a,l)=>l.map(s=>f.cloneElement(s,{className:"shopify"}))},scroll:{x:"max-content"},request:async t=>{const{pageSize:a,current:l,...s}=t,{llmList:d}=await T({...s,limit:a,pageNumber:l});return{total:d.total,data:d.llmList}},toolbar:{actions:[e.jsx(y,{okText:"Save",title:"Add Llm",width:N,trigger:e.jsx(S,{type:"primary",children:"Add",icon:e.jsx(w,{}),className:"shopify"}),children:e.jsx(j,{onSuccess:r})},"add")]},columns:[{title:"Llm Provider",dataIndex:"llmProvider"},{title:"Llm Name",dataIndex:"llmName",hideInSearch:!0},{title:"Module Name",dataIndex:"moduleName",hideInSearch:!0},{title:"Class Name",dataIndex:"className",hideInSearch:!0},{title:"Updated At",dataIndex:"updatedAt",hideInSearch:!0,render:(t,a)=>b(a.updatedAt).format("YYYY/MM/DD HH:mm:ss")},{title:"Updated By",dataIndex:"updatedBy",hideInSearch:!0},{fixed:"right",width:100,title:"Actions",dataIndex:"actions",hideInSearch:!0,render:(t,a)=>e.jsxs(v,{size:16,children:[e.jsx(y,{okText:"Save",width:N,title:"Edit Llm",trigger:e.jsx("a",{children:"Edit"}),children:e.jsx(j,{insert:!1,onSuccess:r,formData:C(a)})},"add"),e.jsx(A,{okText:"Delete",okType:"danger",title:"Are you sure you want to delete it?",onConfirm:()=>m(a),children:e.jsx("a",{className:"danger",children:"Delete"})})]})}]})})};export{$ as default};
