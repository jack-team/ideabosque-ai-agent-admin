import{y as c,A as g,j as e,W as i,z as I,K as w,n as _,o as x,w as b,b as S,f,x as P,P as T,i as h,S as N,L as U,D as v}from"./libs-BaOSQqCJ.js";import{I as y}from"./index-CjwgjA-6.js";import"./index-C-v-jDs8.js";import{b as M,u as D}from"./hooks-D-NCgVOG.js";import{a as F,d as E,b as Y}from"./workflow-JDEsYe66.js";import{T as k}from"./index-gYxfleuv.js";import{S as q}from"./index-Dw-maCiw.js";import"./generate-U-Zjqbd8.js";var l=(r=>(r.wizardGroup="wizard_group",r.externalIntegration="external_integration",r))(l||{});const C={[l.wizardGroup]:"Wizard group",[l.externalIntegration]:"External integration"},z="_edit_form_k8an2_1",B={edit_form:z},L=r=>{const{formData:d,onSuccess:n}=r,[o]=c.useForm(),{message:s}=g.useApp(),[u]=M();return D(async()=>{const m=await o.validateFields();try{await F({...m,updatedBy:"Admin"}),u(),n==null||n(),s.success(`Successfully ${d?"updated":"created"} UI component.`)}catch(t){return s.error(t.message),Promise.reject(t)}}),e.jsxs(c,{form:o,submitter:!1,initialValues:d,className:B.edit_form,children:[e.jsx(i,{hidden:!0,name:"uiComponentUuid"}),e.jsx(i,{label:"Tag name",name:"tagName",rules:[{required:!0}]}),e.jsx(I,{name:"uiComponentType",label:"Component type",rules:[{required:!0}],valueEnum:C}),e.jsx(i,{name:"waitFor",label:"Wait for",rules:[{required:!0}]}),e.jsx(w,{label:"Parameters",name:"parameters",alwaysShowItemLabel:!0,className:"custom_form_list",required:!0,rules:[{validator:(m,t=[],a)=>{if(!t.length){a("Please add parameter");return}a()}}],children:e.jsxs(_,{gutter:16,children:[e.jsx(x,{span:12,children:e.jsx(i,{name:"name",label:"Name",rules:[{required:!0}]})}),e.jsx(x,{span:12,children:e.jsx(i,{name:"parameter",label:"Parameter",rules:[{required:!0}]})})]})})]})},J=()=>{const r=b(),{modal:d,message:n}=g.useApp(),o=S.useRef(null),s=f(()=>{var t;(t=o.current)==null||t.reload()}),u=(t,a)=>e.jsx(k,{width:620,destroyOnHidden:!0,trigger:t,title:`${a?"Edit":"Add"} Component`,children:e.jsx(L,{formData:a,onSuccess:s})}),m=f(t=>{d.confirm({title:"Are you sure you want to delete the component?",okText:"Delete",cancelButtonProps:{className:"shopify"},okButtonProps:{className:"shopify gray",danger:!0},onOk:async()=>{await E({uiComponentType:t.uiComponentType,uiComponentUuid:t.uiComponentUuid}),s(),n.success("Component deleted successfully.")}})});return e.jsx(P,{className:"shopify",title:"Ui Components",onBack:()=>r(-1),extra:u(e.jsx(q,{type:"primary",children:"Add Component"})),children:e.jsx(T,{className:"shopify",actionRef:o,rowKey:"uiComponentUuid",options:!1,search:!1,columns:[{dataIndex:"tagName",title:"Tag Name"},{dataIndex:"uiComponentType",title:"Component Type",valueEnum:C},{dataIndex:"createdAt",title:"Created At",hideInSearch:!0,render:(t,a)=>h(a.createdAt).format("YYYY/MM/DD HH:mm:ss")},{dataIndex:"updatedAt",title:"Updated at",hideInSearch:!0,render:(t,a)=>h(a.updatedAt).format("YYYY/MM/DD HH:mm:ss")},{dataIndex:"updatedBy",title:"Updated by",hideInSearch:!0},{key:"action",title:"Action",width:"100px",align:"center",hideInSearch:!0,fixed:"right",render:(t,a)=>e.jsxs(N,{children:[u(e.jsx(y,{icon:v}),a),e.jsx(y,{icon:U,onClick:()=>m(a)})]})}],scroll:{x:"max-content"},request:async t=>{const{current:a=1,pageSize:j=10,...A}=t,{uiComponentList:p}=await Y({pageNumber:a,limit:j,...A});return{total:p.total,data:p.uiComponentList}}})})};export{J as default};
