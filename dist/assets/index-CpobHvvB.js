import{o as m,A as x,j as e,W as f,p as y,q as h,b as d,u as T,n as g,P as j,d as S,S as c}from"./libs-C65raxhD.js";import"./index-CFiK8WbN.js";import{b as w,u as _,T as k}from"./index-CqkYvDSZ.js";import{S as l}from"./index-BmuJcdsb.js";import{i as v,q as A}from"./workflow-Cw9nkl8g.js";import{T as C,a as u}from"./const-DP1vyTQS.js";import"./request-DncSvQ2C.js";const M="_edit_form_k8an2_1",P={edit_form:M},I=o=>{const[i]=m.useForm(),{message:n}=x.useApp(),[a]=w();return _(async()=>{var r;const t=await i.validateFields();try{const{insertUpdatePromptTemplate:s}=await v({...t,templateContext:"",updatedBy:"Admin"});a(),(r=o.onSuccess)==null||r.call(o,s.promptTemplate)}catch(s){return n.error(s.message),Promise.reject(s)}}),e.jsxs(m,{form:i,submitter:!1,className:P.edit_form,children:[e.jsx(f,{label:"Template name",name:"promptName",rules:[{required:!0}]}),e.jsx(y,{label:"Template type",name:"promptType",valueEnum:u,initialValue:C.SystemPrompt,rules:[{required:!0}]})]})},W=()=>{const o=h(),i=d.useRef(null),n=T(a=>{const{promptUuid:t,promptVersionUuid:r}=a;o(`/workflow-templates/detail/${t}/${r}`,{state:a})});return e.jsx(g,{className:"shopify",title:"Workflow Templates",extra:e.jsxs(c,{size:16,children:[e.jsx(l,{onClick:()=>o("/workflow-mcp-servers"),children:"Mcp Server Management"}),e.jsx(l,{onClick:()=>o("/workflow-ui-components"),children:"Component Management"}),e.jsx(k,{width:400,destroyOnHidden:!0,title:"Create template",trigger:e.jsx(l,{type:"primary",children:"Create Template"}),children:e.jsx(I,{onSuccess:n})})]}),children:e.jsx(j,{className:"shopify",actionRef:i,options:!1,search:{layout:"vertical",optionRender:(a,t,r)=>r.map(s=>d.cloneElement(s,{className:"shopify"}))},columns:[{dataIndex:"promptName",title:"Template",fixed:"left"},{dataIndex:"promptType",title:"Type",valueEnum:u},{dataIndex:"promptDescription",title:"Description",hideInSearch:!0},{dataIndex:"updatedAt",title:"Updated at",hideInSearch:!0,render:(a,t)=>S(t.updatedAt).format("YYYY/MM/DD HH:mm:ss")},{dataIndex:"updatedBy",title:"Updated by",hideInSearch:!0},{key:"action",title:"Action",width:"100px",align:"center",hideInSearch:!0,fixed:"right",render:(a,t)=>e.jsx(c,{children:e.jsx(l,{type:"primary",size:"small",onClick:()=>n(t),children:"Edit"})})}],scroll:{x:"max-content"},request:async a=>{const{current:t=1,pageSize:r=10,...s}=a,{promptTemplateList:p}=await A({pageNumber:t,limit:r,...s});return{total:p.total,data:p.promptTemplateList}}})})};export{W as default};
