import{j as t,P as m,B as l,w as i,a6 as h,o as u,y as j,b as g,f as k,v as _,S as p}from"./libs-D5B5wwwg.js";import{c as A}from"./index-CjBJILie.js";import{T as f}from"./index-DxfRQvgU.js";import{f as x}from"./index-whMrrvVQ.js";import{L as d}from"./index-CyyPcC1D.js";import{b as I}from"./generate-NHA9qDyO.js";import"./index-BvR2vCaW.js";const N={},T=n=>{const a=n.value||[];return t.jsx("div",{className:N.messages,children:t.jsx(m,{options:!1,search:!1,dataSource:a,pagination:{pageSize:5},className:"shopify",columns:[{title:"Role",key:"role",render:(s,{message:e})=>(e==null?void 0:e.role)||"-"},{title:"Prompt Tokens",key:"prompt_tokens",render:(s,{message:e})=>{var r;return((r=e==null?void 0:e.run)==null?void 0:r.prompt_tokens)||"-"}},{title:"Completion Tokens",key:"completion_tokens",render:(s,{message:e})=>{var r;return((r=e==null?void 0:e.run)==null?void 0:r.completion_tokens)||"-"}},{title:"Total Tokens",key:"total_tokens",render:(s,{message:e})=>{var r;return((r=e==null?void 0:e.run)==null?void 0:r.total_tokens)||"-"}},{title:"content",key:"content",render:(s,{message:e})=>t.jsx(f,{width:760,hasFooter:!1,title:"Message Content",trigger:t.jsx(l,{className:"shopify",size:"small",children:"View"}),children:t.jsx("div",{style:{padding:"24px 0"},children:t.jsx(d,{pre:!0,value:e==null?void 0:e.content})})})}]})})},b=n=>{const{formData:a}=n,[s]=i.useForm();return t.jsxs(i,{form:s,submitter:!1,layout:"horizontal",labelAlign:"left",labelCol:{flex:"140px"},initialValues:a,style:{padding:"24px 0"},children:[t.jsx(h,{orientation:"left",children:"Agent"}),t.jsxs(u,{className:"shopify",children:[t.jsx(i.Item,{label:"Agent UUID",name:["agent","agent_uuid"],children:t.jsx(d,{})}),t.jsx(i.Item,{label:"Agent Name",name:["agent","agent_name"],children:t.jsx(d,{})}),t.jsx(i.Item,{label:"Agent Description",name:["agent","agent_description"],children:t.jsx(d,{})})]}),t.jsx(h,{orientation:"left",children:"Messages"}),t.jsx(u,{className:"shopify",children:t.jsx(i.Item,{name:"messages",children:t.jsx(T,{})})})]})},v=async n=>{const a=await I({type:"Query",name:"threadList"});return A.graphql({query:a,variables:n})},M=()=>{const n=j(),a=g.useRef(null),s=k(()=>{var e;(e=a.current)==null||e.reload()});return t.jsx(_,{title:"Threads",extra:t.jsxs(p,{children:[t.jsx(l,{className:"shopify",onClick:()=>n("/messages"),children:"Messages"}),t.jsx(l,{className:"shopify",onClick:()=>n("/async-tasks"),children:"Async Tasks"})]}),children:t.jsx(m,{pagination:{pageSize:10},actionRef:a,search:!1,options:!1,rowKey:"threadUuid",className:"shopify",request:async e=>{const{current:r,pageSize:o,...y}=e,{threadList:c}=await v({limit:o,pageNumber:r,...y});return{total:c.total,data:c.threadList}},columns:[{title:"Thread UUID",dataIndex:"threadUuid"},{title:"Agent UUID",key:"agentUuid",render:(e,r)=>{var o;return(o=r.agent)==null?void 0:o.agent_uuid}},{title:"Create at",dataIndex:"createdAt",hideInSearch:!0,render:(e,r)=>x(r.createdAt)},{title:"Update at",dataIndex:"updatedAt",hideInSearch:!0,render:(e,r)=>x(r.updatedAt)},{width:"120px",key:"action",title:"Action",align:"center",hideInSearch:!0,render:(e,r)=>t.jsx(p,{children:t.jsx(f,{width:700,hasFooter:!1,destroyOnHidden:!0,className:"shopify",title:"Thread",trigger:t.jsx(l,{size:"small",className:"shopify",children:"View"}),children:t.jsx(b,{formData:r,onSuccess:s})})})}]})})};export{M as default};
