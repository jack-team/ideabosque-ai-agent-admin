import{f as P,y as v,b as x,v as _,h as d,i as F,j as e,x as C,z as b,a1 as q}from"./libs-NYaGYdqa.js";import{g as E,r as I,q as A}from"./index-C4UdXftX.js";import{S as R}from"./index-vo-noMjD.js";import{S as M}from"./index-CuwcIavk.js";import{g as W}from"./contactProfiles-D5gOaq1j.js";import"./generate-BEV_c4eL.js";const z=()=>P(async()=>{var s;const t=await I(W);return((s=t==null?void 0:t.coordinationList)==null?void 0:s.coordinationList).map(r=>({agents:r.agents,label:r.coordinationName,value:r.coordinationUuid}))}),D=()=>E(),U="_container_ypa08_1",k="_contrl_ypa08_8",B="_preview_ypa08_15",$="_preview_box_ypa08_22",O="_placeholder_ypa08_23",a={container:U,contrl:k,preview:B,preview_box:$,placeholder:O},G="https://shopify-ai-chat.pages.dev",X=()=>{const[t]=v.useForm(),p=D(),s=x.useRef([]),[r,m]=_(!1),{data:u=[],loading:y}=z(),[c,j]=_(),f=x.useMemo(()=>A.stringify({...c,mode:"preview"}),[c]),w=d(async()=>{const i=await t.validateFields(),g=i.agent,o=s.current.find(n=>n.value===g);j({...i,endpointId:p,agentName:o==null?void 0:o.label})}),S=d(()=>m(!0)),L=d(()=>m(!1));return F(S,[f]),e.jsx(C,{title:"Preview",className:"shopify full-screen",children:e.jsxs("div",{className:a.container,children:[e.jsx("div",{className:a.preview,children:e.jsx(M,{loading:r,children:e.jsx("div",{className:a.preview_box,children:c?e.jsx("iframe",{width:"100%",height:"100%",allow:"geolocation;",onLoad:L,src:`${G}?${f}`}):e.jsx("div",{className:a.placeholder,children:"Please select Coordination and Agency to preview."})})})}),e.jsx("div",{className:a.contrl,children:e.jsxs(v,{form:t,submitter:!1,className:a.form,children:[e.jsx(b,{label:"Coordination",name:"coordination",options:u,fieldProps:{placement:"bottomRight",popupMatchSelectWidth:!1,loading:y,onChange:()=>{t.resetFields(["agent"])}},rules:[{required:!0}]}),e.jsx(q,{name:["coordination"],children:({coordination:i})=>{var o;if(!i)return null;const l=(((o=u.find(n=>n.value===i))==null?void 0:o.agents)||[]).map(n=>{const N=n.agent_name,h=n.agent_uuid;return{label:N||h,value:h}});return s.current=l,e.jsx(b,{label:"Agent",name:"agent",options:l,fieldProps:{placement:"bottomLeft",popupMatchSelectWidth:!1},rules:[{required:!0}]})}}),e.jsx("div",{className:a.submitter,children:e.jsx(R,{block:!0,type:"primary",size:"large",onClick:w,children:"Apply"})})]})})]})})};export{X as default};
