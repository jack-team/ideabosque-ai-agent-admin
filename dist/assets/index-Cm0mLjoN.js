import{w as f,A as z,f as m,b as G,j as e,W as p,G as j,x as U,y as k,v as B,P as A,S as h,J as D,L as P,B as x}from"./libs-DXEQ_ZwD.js";import"./index-BJeZZQIQ.js";import{T as g}from"./index-B6G6DH-G.js";import{I as w}from"./index-C950tjKn.js";import{f as I}from"./index-BD-OtoqS.js";import{b as S,u as F}from"./hooks-DdWCLLPd.js";import{i as N,d as b,g as W}from"./wizard-DsuWhXTr.js";import{k as v}from"./useFetchData-6schqLKv.js";import"./index-BMWCRZZK.js";import"./generate-CKUS3uF_.js";import"./workflow-Bw04EY5P.js";import"./enum-Ct7sVdAK.js";const C=t=>{if(!t)return;const{wizards:s,...o}=t;return{...o,wizardUuids:s.map(i=>i.wizard_uuid)}},T=t=>({...t,updatedBy:"Admin"}),y=t=>{const{formData:s}=t,[o]=f.useForm(),{message:i}=z.useApp(),[n]=S(),d=v(),a=m(()=>{o.setFieldsValue(C(s))});return G.useEffect(()=>{s&&a()},[s]),F(async()=>{var u;const r=await o.validateFields(),c=T(r);try{await N(c),n(),(u=t.onSuccess)==null||u.call(t),i.success(`UI Block Group ${s?"updated":"created"} successfully.`)}catch{i.error(`Failed to ${s?"update":"create"} UI Block Group.`)}}),e.jsxs(f,{form:o,submitter:!1,style:{padding:"24px 0 0 0"},children:[e.jsx(p,{hidden:!0,name:"wizardUuid"}),e.jsx(p,{label:"UI Block Group name",name:"wizardGroupName",rules:[{required:!0}]}),e.jsx(j,{label:"UI Block Group description",name:"wizardGroupDescription",rules:[{required:!0}]}),e.jsx(p,{label:"Weight",name:"weight",fieldProps:{type:"number"},rules:[{required:!0}]}),e.jsx(U,{label:"UI Blocks",name:"wizardUuids",mode:"multiple",options:d.options,fieldProps:{maxTagCount:1,loading:d.loading}})]})},Q=()=>{const{modal:t,message:s}=z.useApp(),o=k(),i=G.useRef(null),n=m(()=>{var a;(a=i.current)==null||a.reload()}),d=m(a=>{t.confirm({title:"Are you sure you want to delete?",okText:"Delete",okButtonProps:{danger:!0,className:"shopify"},cancelButtonProps:{className:"shopify"},onOk:async()=>{try{await b({wizardGroupUuid:a.wizardGroupUuid}),n(),s.success("Deletion successful.")}catch(r){return s.error("Deletion failed."),Promise.reject(r)}}})});return e.jsx(B,{title:"UI Block Groups",extra:e.jsxs(h,{size:16,children:[e.jsx(x,{className:"shopify gray",onClick:()=>o("/wizards"),children:"Blocks"}),e.jsx(g,{width:600,className:"shopify",title:"Create new UI Block Group",trigger:e.jsx(x,{className:"shopify",type:"primary",children:"Create new UI Block Group"}),children:e.jsx(y,{})})]}),children:e.jsx(A,{actionRef:i,search:!1,options:!1,scroll:{x:"max-content"},rowKey:"agentUuid",className:"shopify",request:async a=>{const{current:r,pageSize:c,...u}=a,{wizardGroupList:l}=await W({limit:c,pageNumber:r,...u});return{total:l.total,data:l.wizardGroupList}},columns:[{title:"UI Block Group name",dataIndex:"wizardGroupName"},{title:"UI Block Group UUID",dataIndex:"wizardGroupUuid",hideInSearch:!0},{title:"Weight",dataIndex:"weight",hideInSearch:!0},{title:"Create at",dataIndex:"createdAt",hideInSearch:!0,render:(a,r)=>I(r.createdAt)},{title:"Last updated",dataIndex:"updatedAt",hideInSearch:!0,render:(a,r)=>I(r.updatedAt)},{width:"100px",key:"action",title:"Action",fixed:"right",hideInSearch:!0,render:(a,r)=>e.jsxs(h,{children:[e.jsx(g,{width:600,destroyOnHidden:!0,className:"shopify",title:"UI Block Group Details",trigger:e.jsx(w,{icon:D}),children:e.jsx(y,{formData:r,onSuccess:n})}),e.jsx(w,{icon:P,onClick:()=>d(r)})]})}]})})};export{Q as default};
