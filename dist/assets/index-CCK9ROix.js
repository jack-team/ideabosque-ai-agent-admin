import{A as c,b as f,u as p,j as e,P as u,T as w,S as x,q as d,W as g,s as y,t as h,p as k}from"./libs-WQIapg8s.js";import{f as m}from"./index-D9lBcUPo.js";import{T as S}from"./index-BGNMSpcd.js";import{S as l}from"./index-CBw2xBsv.js";import{g as j,h as A,j as C}from"./workflow-CLg8ntmy.js";import{u as N}from"./hooks-S-v_XTx9.js";import{c as F}from"./useFetchData-CwxNWJ31.js";import"./generate-lzB-bYh5.js";import"./wizard-lFvE1YBO.js";import"./enum-Ct7sVdAK.js";const P=o=>{const{modal:s}=c.useApp(),r=f.useRef(null),i=p(async a=>{s.confirm({rootClassName:"shopify",okButtonProps:{className:"shopify"},cancelButtonProps:{className:"shopify"},title:"Are you sure you want to delete this record?",onOk:async()=>{var t;await j(a),(t=r.current)==null||t.reload()}})});return e.jsx(u,{className:"shopify",options:!1,search:!1,actionRef:r,rowKey:"flowSnippetUuid",pagination:{pageSize:10},request:async()=>{const{flowSnippetList:a}=await A({pageNumber:1,limit:100});return{total:a.total,data:a.flowSnippetList}},columns:[{title:"Workflow",dataIndex:"flowName"},{title:"Status",dataIndex:"status",render:(a,t)=>e.jsx(w,{children:t.status})},{title:"Create at",dataIndex:"createdAt",render:(a,t)=>m(t.createdAt)},{title:"Update at",dataIndex:"updatedAt",render:(a,t)=>m(t.updatedAt)},{key:"action",title:"Action",width:"160px",render:(a,t)=>e.jsxs(x,{children:[e.jsx(l,{size:"small",type:"primary",onClick:()=>{var n;return(n=o.onEdit)==null?void 0:n.call(o,t)},children:"Edit"}),e.jsx(l,{danger:!0,size:"small",children:"Delete",onClick:()=>i(t)})]})}]})},T="_form_19wg4_1",W={form:T},U=o=>{const[s]=d.useForm(),{options:r,loading:i}=F();return N(async()=>{var n;const a=await s.validateFields(),{insertUpdateFlowSnippet:t}=await C({...a,updatedBy:"admin",flowContext:JSON.stringify({}),flowRelationship:JSON.stringify({})});(n=o.onSuccess)==null||n.call(o,t.flowSnippet)}),e.jsxs(d,{form:s,submitter:!1,className:W.form,children:[e.jsx(g,{label:"Workflow name",name:"flowName",rules:[{required:!0}]}),e.jsx(y,{label:"Template",name:"promptUuid",options:r,fieldProps:{loading:i},rules:[{required:!0}]})]})},I=()=>{const o=h(),s=p(r=>{const{flowSnippetUuid:i,flowSnippetVersionUuid:a}=r;o(`/agent-workflows/detail/${i}/${a}`)});return e.jsx(k,{title:"Agent workflows",className:"shopify",extra:[e.jsx(l,{onClick:()=>o("/workflow-templates"),children:"Template Management"},"mange"),e.jsx(S,{width:400,destroyOnHidden:!0,title:"Create workflow",okText:"Create",trigger:e.jsx(l,{type:"primary",children:"Create workflow"}),children:e.jsx(U,{onSuccess:s})},"add")],children:e.jsx(P,{onEdit:s})})};export{I as default};
