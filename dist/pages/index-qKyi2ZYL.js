import{h as ec,g as tc,R as nc,r as I,k as g,d as oc,D as se,J as uo,E as rc,B as sc,M as ic,K as ac,C as cc,f as lc}from"../chunks/vendor-BASRo5BV.js";import{k as uc,g as dc}from"../chunks/workflow-Ceki6VW7.js";import{r as fc,g as Ro,S as hc,n as gc,m as pc,i as mc,D as xc,W as fe,h as ht,k as tt,o as Jt,p as yc,q as Xr,l as en,R as Wr,a as tn,s as wc,t as vc,u as _c,v as bc,w as Nc,x as Ec,y as Sc,z as Cc,E as Mc,M as kc,F as Ic,G as $c,b as Ac,A as Tc,f as jc}from"../chunks/ui-CrIkMfD8.js";import{c as Gn}from"../chunks/index-DRa_PNfa.js";import{I as qt}from"../chunks/index-CNAIOIDt.js";import{v as nn}from"../chunks/utils-BMDVF5td.js";import{T as Pc,u as Dc}from"../chunks/index-BSDmC2OP.js";import{S as zc}from"../assets/index-a3n_qMTh.js";import{b as Hc,u as Rc}from"../chunks/hooks-CKqr3Hp3.js";import{S as qr}from"../chunks/index-B4mFbccR.js";import{S as Fc}from"../chunks/index-E3aGMyob.js";import"../chunks/generate-BNkr4RNj.js";function oe(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=oe(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Lc={value:()=>{}};function mn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Gt(n)}function Gt(e){this._=e}function Bc(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Gt.prototype=mn.prototype={constructor:Gt,on:function(e,t){var n=this._,o=Bc(e+"",n),r,s=-1,i=o.length;if(arguments.length<2){for(;++s<i;)if((r=(e=o[s]).type)&&(r=Vc(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(r=(e=o[s]).type)n[r]=Fo(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Fo(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Gt(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,s;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],o=0,r=s.length;o<r;++o)s[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,s=o.length;r<s;++r)o[r].value.apply(t,n)}};function Vc(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function Fo(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=Lc,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Un="http://www.w3.org/1999/xhtml";const Lo={svg:"http://www.w3.org/2000/svg",xhtml:Un,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function xn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Lo.hasOwnProperty(t)?{space:Lo[t],local:e}:e}function Oc(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Un&&t.documentElement.namespaceURI===Un?t.createElement(e):t.createElementNS(n,e)}}function Yc(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Gr(e){var t=xn(e);return(t.local?Yc:Oc)(t)}function Xc(){}function fo(e){return e==null?Xc:function(){return this.querySelector(e)}}function Wc(e){typeof e!="function"&&(e=fo(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,a=o[r]=new Array(i),c,l,u=0;u<i;++u)(c=s[u])&&(l=e.call(c,c.__data__,u,s))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new le(o,this._parents)}function qc(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Gc(){return[]}function Ur(e){return e==null?Gc:function(){return this.querySelectorAll(e)}}function Uc(e){return function(){return qc(e.apply(this,arguments))}}function Kc(e){typeof e=="function"?e=Uc(e):e=Ur(e);for(var t=this._groups,n=t.length,o=[],r=[],s=0;s<n;++s)for(var i=t[s],a=i.length,c,l=0;l<a;++l)(c=i[l])&&(o.push(e.call(c,c.__data__,l,i)),r.push(c));return new le(o,r)}function Kr(e){return function(){return this.matches(e)}}function Zr(e){return function(t){return t.matches(e)}}var Zc=Array.prototype.find;function Qc(e){return function(){return Zc.call(this.children,e)}}function Jc(){return this.firstElementChild}function el(e){return this.select(e==null?Jc:Qc(typeof e=="function"?e:Zr(e)))}var tl=Array.prototype.filter;function nl(){return Array.from(this.children)}function ol(e){return function(){return tl.call(this.children,e)}}function rl(e){return this.selectAll(e==null?nl:ol(typeof e=="function"?e:Zr(e)))}function sl(e){typeof e!="function"&&(e=Kr(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,a=o[r]=[],c,l=0;l<i;++l)(c=s[l])&&e.call(c,c.__data__,l,s)&&a.push(c);return new le(o,this._parents)}function Qr(e){return new Array(e.length)}function il(){return new le(this._enter||this._groups.map(Qr),this._parents)}function on(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}on.prototype={constructor:on,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function al(e){return function(){return e}}function cl(e,t,n,o,r,s){for(var i=0,a,c=t.length,l=s.length;i<l;++i)(a=t[i])?(a.__data__=s[i],o[i]=a):n[i]=new on(e,s[i]);for(;i<c;++i)(a=t[i])&&(r[i]=a)}function ll(e,t,n,o,r,s,i){var a,c,l=new Map,u=t.length,f=s.length,d=new Array(u),h;for(a=0;a<u;++a)(c=t[a])&&(d[a]=h=i.call(c,c.__data__,a,t)+"",l.has(h)?r[a]=c:l.set(h,c));for(a=0;a<f;++a)h=i.call(e,s[a],a,s)+"",(c=l.get(h))?(o[a]=c,c.__data__=s[a],l.delete(h)):n[a]=new on(e,s[a]);for(a=0;a<u;++a)(c=t[a])&&l.get(d[a])===c&&(r[a]=c)}function ul(e){return e.__data__}function dl(e,t){if(!arguments.length)return Array.from(this,ul);var n=t?ll:cl,o=this._parents,r=this._groups;typeof e!="function"&&(e=al(e));for(var s=r.length,i=new Array(s),a=new Array(s),c=new Array(s),l=0;l<s;++l){var u=o[l],f=r[l],d=f.length,h=fl(e.call(u,u&&u.__data__,l,o)),m=h.length,x=a[l]=new Array(m),w=i[l]=new Array(m),_=c[l]=new Array(d);n(u,f,x,w,_,h,t);for(var b=0,p=0,v,S;b<m;++b)if(v=x[b]){for(b>=p&&(p=b+1);!(S=w[p])&&++p<m;);v._next=S||null}}return i=new le(i,o),i._enter=a,i._exit=c,i}function fl(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function hl(){return new le(this._exit||this._groups.map(Qr),this._parents)}function gl(e,t,n){var o=this.enter(),r=this,s=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),o&&r?o.merge(r).order():r}function pl(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,s=o.length,i=Math.min(r,s),a=new Array(r),c=0;c<i;++c)for(var l=n[c],u=o[c],f=l.length,d=a[c]=new Array(f),h,m=0;m<f;++m)(h=l[m]||u[m])&&(d[m]=h);for(;c<r;++c)a[c]=n[c];return new le(a,this._parents)}function ml(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,s=o[r],i;--r>=0;)(i=o[r])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function xl(e){e||(e=yl);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,o=n.length,r=new Array(o),s=0;s<o;++s){for(var i=n[s],a=i.length,c=r[s]=new Array(a),l,u=0;u<a;++u)(l=i[u])&&(c[u]=l);c.sort(t)}return new le(r,this._parents).order()}function yl(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function wl(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function vl(){return Array.from(this)}function _l(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,s=o.length;r<s;++r){var i=o[r];if(i)return i}return null}function bl(){let e=0;for(const t of this)++e;return e}function Nl(){return!this.node()}function El(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],s=0,i=r.length,a;s<i;++s)(a=r[s])&&e.call(a,a.__data__,s,r);return this}function Sl(e){return function(){this.removeAttribute(e)}}function Cl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ml(e,t){return function(){this.setAttribute(e,t)}}function kl(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Il(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function $l(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Al(e,t){var n=xn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Cl:Sl:typeof t=="function"?n.local?$l:Il:n.local?kl:Ml)(n,t))}function Jr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Tl(e){return function(){this.style.removeProperty(e)}}function jl(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Pl(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Dl(e,t,n){return arguments.length>1?this.each((t==null?Tl:typeof t=="function"?Pl:jl)(e,t,n??"")):Ge(this.node(),e)}function Ge(e,t){return e.style.getPropertyValue(t)||Jr(e).getComputedStyle(e,null).getPropertyValue(t)}function zl(e){return function(){delete this[e]}}function Hl(e,t){return function(){this[e]=t}}function Rl(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Fl(e,t){return arguments.length>1?this.each((t==null?zl:typeof t=="function"?Rl:Hl)(e,t)):this.node()[e]}function es(e){return e.trim().split(/^|\s+/)}function ho(e){return e.classList||new ts(e)}function ts(e){this._node=e,this._names=es(e.getAttribute("class")||"")}ts.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ns(e,t){for(var n=ho(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function os(e,t){for(var n=ho(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function Ll(e){return function(){ns(this,e)}}function Bl(e){return function(){os(this,e)}}function Vl(e,t){return function(){(t.apply(this,arguments)?ns:os)(this,e)}}function Ol(e,t){var n=es(e+"");if(arguments.length<2){for(var o=ho(this.node()),r=-1,s=n.length;++r<s;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Vl:t?Ll:Bl)(n,t))}function Yl(){this.textContent=""}function Xl(e){return function(){this.textContent=e}}function Wl(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function ql(e){return arguments.length?this.each(e==null?Yl:(typeof e=="function"?Wl:Xl)(e)):this.node().textContent}function Gl(){this.innerHTML=""}function Ul(e){return function(){this.innerHTML=e}}function Kl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Zl(e){return arguments.length?this.each(e==null?Gl:(typeof e=="function"?Kl:Ul)(e)):this.node().innerHTML}function Ql(){this.nextSibling&&this.parentNode.appendChild(this)}function Jl(){return this.each(Ql)}function eu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function tu(){return this.each(eu)}function nu(e){var t=typeof e=="function"?e:Gr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ou(){return null}function ru(e,t){var n=typeof e=="function"?e:Gr(e),o=t==null?ou:typeof t=="function"?t:fo(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function su(){var e=this.parentNode;e&&e.removeChild(this)}function iu(){return this.each(su)}function au(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function cu(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function lu(e){return this.select(e?cu:au)}function uu(e){return arguments.length?this.property("__data__",e):this.node().__data__}function du(e){return function(t){e.call(this,t,this.__data__)}}function fu(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function hu(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++o]=s;++o?t.length=o:delete this.__on}}}function gu(e,t,n){return function(){var o=this.__on,r,s=du(t);if(o){for(var i=0,a=o.length;i<a;++i)if((r=o[i]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},o?o.push(r):this.__on=[r]}}function pu(e,t,n){var o=fu(e+""),r,s=o.length,i;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(r=0,u=a[c];r<s;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value}return}for(a=t?gu:hu,r=0;r<s;++r)this.each(a(o[r],t,n));return this}function rs(e,t,n){var o=Jr(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function mu(e,t){return function(){return rs(this,e,t)}}function xu(e,t){return function(){return rs(this,e,t.apply(this,arguments))}}function yu(e,t){return this.each((typeof t=="function"?xu:mu)(e,t))}function*wu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,s=o.length,i;r<s;++r)(i=o[r])&&(yield i)}var ss=[null];function le(e,t){this._groups=e,this._parents=t}function Et(){return new le([[document.documentElement]],ss)}function vu(){return this}le.prototype=Et.prototype={constructor:le,select:Wc,selectAll:Kc,selectChild:el,selectChildren:rl,filter:sl,data:dl,enter:il,exit:hl,join:gl,merge:pl,selection:vu,order:ml,sort:xl,call:wl,nodes:vl,node:_l,size:bl,empty:Nl,each:El,attr:Al,style:Dl,property:Fl,classed:Ol,text:ql,html:Zl,raise:Jl,lower:tu,append:nu,insert:ru,remove:iu,clone:lu,datum:uu,on:pu,dispatch:yu,[Symbol.iterator]:wu};function ce(e){return typeof e=="string"?new le([[document.querySelector(e)]],[document.documentElement]):new le([[e]],ss)}function _u(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ue(e,t){if(e=_u(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const bu={passive:!1},gt={capture:!0,passive:!1};function Dn(e){e.stopImmediatePropagation()}function We(e){e.preventDefault(),e.stopImmediatePropagation()}function is(e){var t=e.document.documentElement,n=ce(e).on("dragstart.drag",We,gt);"onselectstart"in t?n.on("selectstart.drag",We,gt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function as(e,t){var n=e.document.documentElement,o=ce(e).on("dragstart.drag",null);t&&(o.on("click.drag",We,gt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Rt=e=>()=>e;function Kn(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:s,x:i,y:a,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}Kn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Nu(e){return!e.ctrlKey&&!e.button}function Eu(){return this.parentNode}function Su(e,t){return t??{x:e.x,y:e.y}}function Cu(){return navigator.maxTouchPoints||"ontouchstart"in this}function cs(){var e=Nu,t=Eu,n=Su,o=Cu,r={},s=mn("start","drag","end"),i=0,a,c,l,u,f=0;function d(v){v.on("mousedown.drag",h).filter(o).on("touchstart.drag",w).on("touchmove.drag",_,bu).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(v,S){if(!(u||!e.call(this,v,S))){var k=p(this,t.call(this,v,S),v,S,"mouse");k&&(ce(v.view).on("mousemove.drag",m,gt).on("mouseup.drag",x,gt),is(v.view),Dn(v),l=!1,a=v.clientX,c=v.clientY,k("start",v))}}function m(v){if(We(v),!l){var S=v.clientX-a,k=v.clientY-c;l=S*S+k*k>f}r.mouse("drag",v)}function x(v){ce(v.view).on("mousemove.drag mouseup.drag",null),as(v.view,l),We(v),r.mouse("end",v)}function w(v,S){if(e.call(this,v,S)){var k=v.changedTouches,E=t.call(this,v,S),A=k.length,j,D;for(j=0;j<A;++j)(D=p(this,E,v,S,k[j].identifier,k[j]))&&(Dn(v),D("start",v,k[j]))}}function _(v){var S=v.changedTouches,k=S.length,E,A;for(E=0;E<k;++E)(A=r[S[E].identifier])&&(We(v),A("drag",v,S[E]))}function b(v){var S=v.changedTouches,k=S.length,E,A;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),E=0;E<k;++E)(A=r[S[E].identifier])&&(Dn(v),A("end",v,S[E]))}function p(v,S,k,E,A,j){var D=s.copy(),P=ue(j||k,S),R,F,y;if((y=n.call(v,new Kn("beforestart",{sourceEvent:k,target:d,identifier:A,active:i,x:P[0],y:P[1],dx:0,dy:0,dispatch:D}),E))!=null)return R=y.x-P[0]||0,F=y.y-P[1]||0,function $(N,C,T){var M=P,z;switch(N){case"start":r[A]=$,z=i++;break;case"end":delete r[A],--i;case"drag":P=ue(T||C,S),z=i;break}D.call(N,v,new Kn(N,{sourceEvent:C,subject:y,target:d,identifier:A,active:z,x:P[0]+R,y:P[1]+F,dx:P[0]-M[0],dy:P[1]-M[1],dispatch:D}),E)}}return d.filter=function(v){return arguments.length?(e=typeof v=="function"?v:Rt(!!v),d):e},d.container=function(v){return arguments.length?(t=typeof v=="function"?v:Rt(v),d):t},d.subject=function(v){return arguments.length?(n=typeof v=="function"?v:Rt(v),d):n},d.touchable=function(v){return arguments.length?(o=typeof v=="function"?v:Rt(!!v),d):o},d.on=function(){var v=s.on.apply(s,arguments);return v===s?d:v},d.clickDistance=function(v){return arguments.length?(f=(v=+v)*v,d):Math.sqrt(f)},d}function go(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ls(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function St(){}var pt=.7,rn=1/pt,qe="\\s*([+-]?\\d+)\\s*",mt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",me="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Mu=/^#([0-9a-f]{3,8})$/,ku=new RegExp(`^rgb\\(${qe},${qe},${qe}\\)$`),Iu=new RegExp(`^rgb\\(${me},${me},${me}\\)$`),$u=new RegExp(`^rgba\\(${qe},${qe},${qe},${mt}\\)$`),Au=new RegExp(`^rgba\\(${me},${me},${me},${mt}\\)$`),Tu=new RegExp(`^hsl\\(${mt},${me},${me}\\)$`),ju=new RegExp(`^hsla\\(${mt},${me},${me},${mt}\\)$`),Bo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};go(St,xt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Vo,formatHex:Vo,formatHex8:Pu,formatHsl:Du,formatRgb:Oo,toString:Oo});function Vo(){return this.rgb().formatHex()}function Pu(){return this.rgb().formatHex8()}function Du(){return us(this).formatHsl()}function Oo(){return this.rgb().formatRgb()}function xt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Mu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Yo(t):n===3?new ae(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ft(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ft(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ku.exec(e))?new ae(t[1],t[2],t[3],1):(t=Iu.exec(e))?new ae(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=$u.exec(e))?Ft(t[1],t[2],t[3],t[4]):(t=Au.exec(e))?Ft(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Tu.exec(e))?qo(t[1],t[2]/100,t[3]/100,1):(t=ju.exec(e))?qo(t[1],t[2]/100,t[3]/100,t[4]):Bo.hasOwnProperty(e)?Yo(Bo[e]):e==="transparent"?new ae(NaN,NaN,NaN,0):null}function Yo(e){return new ae(e>>16&255,e>>8&255,e&255,1)}function Ft(e,t,n,o){return o<=0&&(e=t=n=NaN),new ae(e,t,n,o)}function zu(e){return e instanceof St||(e=xt(e)),e?(e=e.rgb(),new ae(e.r,e.g,e.b,e.opacity)):new ae}function Zn(e,t,n,o){return arguments.length===1?zu(e):new ae(e,t,n,o??1)}function ae(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}go(ae,Zn,ls(St,{brighter(e){return e=e==null?rn:Math.pow(rn,e),new ae(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?pt:Math.pow(pt,e),new ae(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ae(je(this.r),je(this.g),je(this.b),sn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xo,formatHex:Xo,formatHex8:Hu,formatRgb:Wo,toString:Wo}));function Xo(){return`#${Te(this.r)}${Te(this.g)}${Te(this.b)}`}function Hu(){return`#${Te(this.r)}${Te(this.g)}${Te(this.b)}${Te((isNaN(this.opacity)?1:this.opacity)*255)}`}function Wo(){const e=sn(this.opacity);return`${e===1?"rgb(":"rgba("}${je(this.r)}, ${je(this.g)}, ${je(this.b)}${e===1?")":`, ${e})`}`}function sn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function je(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Te(e){return e=je(e),(e<16?"0":"")+e.toString(16)}function qo(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new de(e,t,n,o)}function us(e){if(e instanceof de)return new de(e.h,e.s,e.l,e.opacity);if(e instanceof St||(e=xt(e)),!e)return new de;if(e instanceof de)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),s=Math.max(t,n,o),i=NaN,a=s-r,c=(s+r)/2;return a?(t===s?i=(n-o)/a+(n<o)*6:n===s?i=(o-t)/a+2:i=(t-n)/a+4,a/=c<.5?s+r:2-s-r,i*=60):a=c>0&&c<1?0:i,new de(i,a,c,e.opacity)}function Ru(e,t,n,o){return arguments.length===1?us(e):new de(e,t,n,o??1)}function de(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}go(de,Ru,ls(St,{brighter(e){return e=e==null?rn:Math.pow(rn,e),new de(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?pt:Math.pow(pt,e),new de(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new ae(zn(e>=240?e-240:e+120,r,o),zn(e,r,o),zn(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new de(Go(this.h),Lt(this.s),Lt(this.l),sn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=sn(this.opacity);return`${e===1?"hsl(":"hsla("}${Go(this.h)}, ${Lt(this.s)*100}%, ${Lt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Go(e){return e=(e||0)%360,e<0?e+360:e}function Lt(e){return Math.max(0,Math.min(1,e||0))}function zn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ds=e=>()=>e;function Fu(e,t){return function(n){return e+n*t}}function Lu(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Bu(e){return(e=+e)==1?fs:function(t,n){return n-t?Lu(t,n,e):ds(isNaN(t)?n:t)}}function fs(e,t){var n=t-e;return n?Fu(e,n):ds(isNaN(e)?t:e)}const Uo=function e(t){var n=Bu(t);function o(r,s){var i=n((r=Zn(r)).r,(s=Zn(s)).r),a=n(r.g,s.g),c=n(r.b,s.b),l=fs(r.opacity,s.opacity);return function(u){return r.r=i(u),r.g=a(u),r.b=c(u),r.opacity=l(u),r+""}}return o.gamma=e,o}(1);function Me(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Qn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hn=new RegExp(Qn.source,"g");function Vu(e){return function(){return e}}function Ou(e){return function(t){return e(t)+""}}function Yu(e,t){var n=Qn.lastIndex=Hn.lastIndex=0,o,r,s,i=-1,a=[],c=[];for(e=e+"",t=t+"";(o=Qn.exec(e))&&(r=Hn.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),a[i]?a[i]+=s:a[++i]=s),(o=o[0])===(r=r[0])?a[i]?a[i]+=r:a[++i]=r:(a[++i]=null,c.push({i,x:Me(o,r)})),n=Hn.lastIndex;return n<t.length&&(s=t.slice(n),a[i]?a[i]+=s:a[++i]=s),a.length<2?c[0]?Ou(c[0].x):Vu(t):(t=c.length,function(l){for(var u=0,f;u<t;++u)a[(f=c[u]).i]=f.x(l);return a.join("")})}var Ko=180/Math.PI,Jn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function hs(e,t,n,o,r,s){var i,a,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*n+t*o)&&(n-=e*c,o-=t*c),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,c/=a),e*o<t*n&&(e=-e,t=-t,c=-c,i=-i),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*Ko,skewX:Math.atan(c)*Ko,scaleX:i,scaleY:a}}var Bt;function Xu(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Jn:hs(t.a,t.b,t.c,t.d,t.e,t.f)}function Wu(e){return e==null||(Bt||(Bt=document.createElementNS("http://www.w3.org/2000/svg","g")),Bt.setAttribute("transform",e),!(e=Bt.transform.baseVal.consolidate()))?Jn:(e=e.matrix,hs(e.a,e.b,e.c,e.d,e.e,e.f))}function gs(e,t,n,o){function r(l){return l.length?l.pop()+" ":""}function s(l,u,f,d,h,m){if(l!==f||u!==d){var x=h.push("translate(",null,t,null,n);m.push({i:x-4,x:Me(l,f)},{i:x-2,x:Me(u,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function i(l,u,f,d){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),d.push({i:f.push(r(f)+"rotate(",null,o)-2,x:Me(l,u)})):u&&f.push(r(f)+"rotate("+u+o)}function a(l,u,f,d){l!==u?d.push({i:f.push(r(f)+"skewX(",null,o)-2,x:Me(l,u)}):u&&f.push(r(f)+"skewX("+u+o)}function c(l,u,f,d,h,m){if(l!==f||u!==d){var x=h.push(r(h)+"scale(",null,",",null,")");m.push({i:x-4,x:Me(l,f)},{i:x-2,x:Me(u,d)})}else(f!==1||d!==1)&&h.push(r(h)+"scale("+f+","+d+")")}return function(l,u){var f=[],d=[];return l=e(l),u=e(u),s(l.translateX,l.translateY,u.translateX,u.translateY,f,d),i(l.rotate,u.rotate,f,d),a(l.skewX,u.skewX,f,d),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,d),l=u=null,function(h){for(var m=-1,x=d.length,w;++m<x;)f[(w=d[m]).i]=w.x(h);return f.join("")}}}var qu=gs(Xu,"px, ","px)","deg)"),Gu=gs(Wu,", ",")",")"),Uu=1e-12;function Zo(e){return((e=Math.exp(e))+1/e)/2}function Ku(e){return((e=Math.exp(e))-1/e)/2}function Zu(e){return((e=Math.exp(2*e))-1)/(e+1)}const Qu=function e(t,n,o){function r(s,i){var a=s[0],c=s[1],l=s[2],u=i[0],f=i[1],d=i[2],h=u-a,m=f-c,x=h*h+m*m,w,_;if(x<Uu)_=Math.log(d/l)/t,w=function(E){return[a+E*h,c+E*m,l*Math.exp(t*E*_)]};else{var b=Math.sqrt(x),p=(d*d-l*l+o*x)/(2*l*n*b),v=(d*d-l*l-o*x)/(2*d*n*b),S=Math.log(Math.sqrt(p*p+1)-p),k=Math.log(Math.sqrt(v*v+1)-v);_=(k-S)/t,w=function(E){var A=E*_,j=Zo(S),D=l/(n*b)*(j*Zu(t*A+S)-Ku(S));return[a+D*h,c+D*m,l*j/Zo(t*A+S)]}}return w.duration=_*1e3*t/Math.SQRT2,w}return r.rho=function(s){var i=Math.max(.001,+s),a=i*i,c=a*a;return e(i,a,c)},r}(Math.SQRT2,2,4);var Ue=0,lt=0,it=0,ps=1e3,an,ut,cn=0,De=0,yn=0,yt=typeof performance=="object"&&performance.now?performance:Date,ms=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function po(){return De||(ms(Ju),De=yt.now()+yn)}function Ju(){De=0}function ln(){this._call=this._time=this._next=null}ln.prototype=xs.prototype={constructor:ln,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?po():+n)+(t==null?0:+t),!this._next&&ut!==this&&(ut?ut._next=this:an=this,ut=this),this._call=e,this._time=n,eo()},stop:function(){this._call&&(this._call=null,this._time=1/0,eo())}};function xs(e,t,n){var o=new ln;return o.restart(e,t,n),o}function ed(){po(),++Ue;for(var e=an,t;e;)(t=De-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ue}function Qo(){De=(cn=yt.now())+yn,Ue=lt=0;try{ed()}finally{Ue=0,nd(),De=0}}function td(){var e=yt.now(),t=e-cn;t>ps&&(yn-=t,cn=e)}function nd(){for(var e,t=an,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:an=n);ut=e,eo(o)}function eo(e){if(!Ue){lt&&(lt=clearTimeout(lt));var t=e-De;t>24?(e<1/0&&(lt=setTimeout(Qo,e-yt.now()-yn)),it&&(it=clearInterval(it))):(it||(cn=yt.now(),it=setInterval(td,ps)),Ue=1,ms(Qo))}}function Jo(e,t,n){var o=new ln;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var od=mn("start","end","cancel","interrupt"),rd=[],ys=0,er=1,to=2,Ut=3,tr=4,no=5,Kt=6;function wn(e,t,n,o,r,s){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;sd(e,n,{name:t,index:o,group:r,on:od,tween:rd,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:ys})}function mo(e,t){var n=ge(e,t);if(n.state>ys)throw new Error("too late; already scheduled");return n}function ye(e,t){var n=ge(e,t);if(n.state>Ut)throw new Error("too late; already running");return n}function ge(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function sd(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=xs(s,0,n.time);function s(l){n.state=er,n.timer.restart(i,n.delay,n.time),n.delay<=l&&i(l-n.delay)}function i(l){var u,f,d,h;if(n.state!==er)return c();for(u in o)if(h=o[u],h.name===n.name){if(h.state===Ut)return Jo(i);h.state===tr?(h.state=Kt,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[u]):+u<t&&(h.state=Kt,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[u])}if(Jo(function(){n.state===Ut&&(n.state=tr,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=to,n.on.call("start",e,e.__data__,n.index,n.group),n.state===to){for(n.state=Ut,r=new Array(d=n.tween.length),u=0,f=-1;u<d;++u)(h=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=h);r.length=f+1}}function a(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=no,1),f=-1,d=r.length;++f<d;)r[f].call(e,u);n.state===no&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Kt,n.timer.stop(),delete o[t];for(var l in o)return;delete e.__transition}}function Zt(e,t){var n=e.__transition,o,r,s=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((o=n[i]).name!==t){s=!1;continue}r=o.state>to&&o.state<no,o.state=Kt,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[i]}s&&delete e.__transition}}function id(e){return this.each(function(){Zt(this,e)})}function ad(e,t){var n,o;return function(){var r=ye(this,e),s=r.tween;if(s!==n){o=n=s;for(var i=0,a=o.length;i<a;++i)if(o[i].name===t){o=o.slice(),o.splice(i,1);break}}r.tween=o}}function cd(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var s=ye(this,e),i=s.tween;if(i!==o){r=(o=i).slice();for(var a={name:t,value:n},c=0,l=r.length;c<l;++c)if(r[c].name===t){r[c]=a;break}c===l&&r.push(a)}s.tween=r}}function ld(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=ge(this.node(),n).tween,r=0,s=o.length,i;r<s;++r)if((i=o[r]).name===e)return i.value;return null}return this.each((t==null?ad:cd)(n,e,t))}function xo(e,t,n){var o=e._id;return e.each(function(){var r=ye(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return ge(r,o).value[t]}}function ws(e,t){var n;return(typeof t=="number"?Me:t instanceof xt?Uo:(n=xt(t))?(t=n,Uo):Yu)(e,t)}function ud(e){return function(){this.removeAttribute(e)}}function dd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function fd(e,t,n){var o,r=n+"",s;return function(){var i=this.getAttribute(e);return i===r?null:i===o?s:s=t(o=i,n)}}function hd(e,t,n){var o,r=n+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===r?null:i===o?s:s=t(o=i,n)}}function gd(e,t,n){var o,r,s;return function(){var i,a=n(this),c;return a==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=a+"",i===c?null:i===o&&c===r?s:(r=c,s=t(o=i,a)))}}function pd(e,t,n){var o,r,s;return function(){var i,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=a+"",i===c?null:i===o&&c===r?s:(r=c,s=t(o=i,a)))}}function md(e,t){var n=xn(e),o=n==="transform"?Gu:ws;return this.attrTween(e,typeof t=="function"?(n.local?pd:gd)(n,o,xo(this,"attr."+e,t)):t==null?(n.local?dd:ud)(n):(n.local?hd:fd)(n,o,t))}function xd(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function yd(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function wd(e,t){var n,o;function r(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&yd(e,s)),n}return r._value=t,r}function vd(e,t){var n,o;function r(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&xd(e,s)),n}return r._value=t,r}function _d(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=xn(e);return this.tween(n,(o.local?wd:vd)(o,t))}function bd(e,t){return function(){mo(this,e).delay=+t.apply(this,arguments)}}function Nd(e,t){return t=+t,function(){mo(this,e).delay=t}}function Ed(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?bd:Nd)(t,e)):ge(this.node(),t).delay}function Sd(e,t){return function(){ye(this,e).duration=+t.apply(this,arguments)}}function Cd(e,t){return t=+t,function(){ye(this,e).duration=t}}function Md(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Sd:Cd)(t,e)):ge(this.node(),t).duration}function kd(e,t){if(typeof t!="function")throw new Error;return function(){ye(this,e).ease=t}}function Id(e){var t=this._id;return arguments.length?this.each(kd(t,e)):ge(this.node(),t).ease}function $d(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ye(this,e).ease=n}}function Ad(e){if(typeof e!="function")throw new Error;return this.each($d(this._id,e))}function Td(e){typeof e!="function"&&(e=Kr(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,a=o[r]=[],c,l=0;l<i;++l)(c=s[l])&&e.call(c,c.__data__,l,s)&&a.push(c);return new Ne(o,this._parents,this._name,this._id)}function jd(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,s=Math.min(o,r),i=new Array(o),a=0;a<s;++a)for(var c=t[a],l=n[a],u=c.length,f=i[a]=new Array(u),d,h=0;h<u;++h)(d=c[h]||l[h])&&(f[h]=d);for(;a<o;++a)i[a]=t[a];return new Ne(i,this._parents,this._name,this._id)}function Pd(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Dd(e,t,n){var o,r,s=Pd(t)?mo:ye;return function(){var i=s(this,e),a=i.on;a!==o&&(r=(o=a).copy()).on(t,n),i.on=r}}function zd(e,t){var n=this._id;return arguments.length<2?ge(this.node(),n).on.on(e):this.each(Dd(n,e,t))}function Hd(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Rd(){return this.on("end.remove",Hd(this._id))}function Fd(e){var t=this._name,n=this._id;typeof e!="function"&&(e=fo(e));for(var o=this._groups,r=o.length,s=new Array(r),i=0;i<r;++i)for(var a=o[i],c=a.length,l=s[i]=new Array(c),u,f,d=0;d<c;++d)(u=a[d])&&(f=e.call(u,u.__data__,d,a))&&("__data__"in u&&(f.__data__=u.__data__),l[d]=f,wn(l[d],t,n,d,l,ge(u,n)));return new Ne(s,this._parents,t,n)}function Ld(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ur(e));for(var o=this._groups,r=o.length,s=[],i=[],a=0;a<r;++a)for(var c=o[a],l=c.length,u,f=0;f<l;++f)if(u=c[f]){for(var d=e.call(u,u.__data__,f,c),h,m=ge(u,n),x=0,w=d.length;x<w;++x)(h=d[x])&&wn(h,t,n,x,d,m);s.push(d),i.push(u)}return new Ne(s,i,t,n)}var Bd=Et.prototype.constructor;function Vd(){return new Bd(this._groups,this._parents)}function Od(e,t){var n,o,r;return function(){var s=Ge(this,e),i=(this.style.removeProperty(e),Ge(this,e));return s===i?null:s===n&&i===o?r:r=t(n=s,o=i)}}function vs(e){return function(){this.style.removeProperty(e)}}function Yd(e,t,n){var o,r=n+"",s;return function(){var i=Ge(this,e);return i===r?null:i===o?s:s=t(o=i,n)}}function Xd(e,t,n){var o,r,s;return function(){var i=Ge(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),Ge(this,e))),i===c?null:i===o&&c===r?s:(r=c,s=t(o=i,a))}}function Wd(e,t){var n,o,r,s="style."+t,i="end."+s,a;return function(){var c=ye(this,e),l=c.on,u=c.value[s]==null?a||(a=vs(t)):void 0;(l!==n||r!==u)&&(o=(n=l).copy()).on(i,r=u),c.on=o}}function qd(e,t,n){var o=(e+="")=="transform"?qu:ws;return t==null?this.styleTween(e,Od(e,o)).on("end.style."+e,vs(e)):typeof t=="function"?this.styleTween(e,Xd(e,o,xo(this,"style."+e,t))).each(Wd(this._id,e)):this.styleTween(e,Yd(e,o,t),n).on("end.style."+e,null)}function Gd(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Ud(e,t,n){var o,r;function s(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&Gd(e,i,n)),o}return s._value=t,s}function Kd(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Ud(e,t,n??""))}function Zd(e){return function(){this.textContent=e}}function Qd(e){return function(){var t=e(this);this.textContent=t??""}}function Jd(e){return this.tween("text",typeof e=="function"?Qd(xo(this,"text",e)):Zd(e==null?"":e+""))}function ef(e){return function(t){this.textContent=e.call(this,t)}}function tf(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&ef(r)),t}return o._value=e,o}function nf(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,tf(e))}function of(){for(var e=this._name,t=this._id,n=_s(),o=this._groups,r=o.length,s=0;s<r;++s)for(var i=o[s],a=i.length,c,l=0;l<a;++l)if(c=i[l]){var u=ge(c,t);wn(c,e,n,l,i,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Ne(o,this._parents,e,n)}function rf(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(s,i){var a={value:i},c={value:function(){--r===0&&s()}};n.each(function(){var l=ye(this,o),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),l.on=t}),r===0&&s()})}var sf=0;function Ne(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function _s(){return++sf}var we=Et.prototype;Ne.prototype={constructor:Ne,select:Fd,selectAll:Ld,selectChild:we.selectChild,selectChildren:we.selectChildren,filter:Td,merge:jd,selection:Vd,transition:of,call:we.call,nodes:we.nodes,node:we.node,size:we.size,empty:we.empty,each:we.each,on:zd,attr:md,attrTween:_d,style:qd,styleTween:Kd,text:Jd,textTween:nf,remove:Rd,tween:ld,delay:Ed,duration:Md,ease:Id,easeVarying:Ad,end:rf,[Symbol.iterator]:we[Symbol.iterator]};function af(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var cf={time:null,delay:0,duration:250,ease:af};function lf(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function uf(e){var t,n;e instanceof Ne?(t=e._id,e=e._name):(t=_s(),(n=cf).time=po(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,s=0;s<r;++s)for(var i=o[s],a=i.length,c,l=0;l<a;++l)(c=i[l])&&wn(c,e,t,l,i,n||lf(c,t));return new Ne(o,this._parents,e,t)}Et.prototype.interrupt=id;Et.prototype.transition=uf;const Vt=e=>()=>e;function df(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function _e(e,t,n){this.k=e,this.x=t,this.y=n}_e.prototype={constructor:_e,scale:function(e){return e===1?this:new _e(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new _e(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var vn=new _e(1,0,0);bs.prototype=_e.prototype;function bs(e){for(;!e.__zoom;)if(!(e=e.parentNode))return vn;return e.__zoom}function Rn(e){e.stopImmediatePropagation()}function at(e){e.preventDefault(),e.stopImmediatePropagation()}function ff(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function hf(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function nr(){return this.__zoom||vn}function gf(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function pf(){return navigator.maxTouchPoints||"ontouchstart"in this}function mf(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function Ns(){var e=ff,t=hf,n=mf,o=gf,r=pf,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],a=250,c=Qu,l=mn("start","zoom","end"),u,f,d,h=500,m=150,x=0,w=10;function _(y){y.property("__zoom",nr).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",j).on("dblclick.zoom",D).filter(r).on("touchstart.zoom",P).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(y,$,N,C){var T=y.selection?y.selection():y;T.property("__zoom",nr),y!==T?S(y,$,N,C):T.interrupt().each(function(){k(this,arguments).event(C).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},_.scaleBy=function(y,$,N,C){_.scaleTo(y,function(){var T=this.__zoom.k,M=typeof $=="function"?$.apply(this,arguments):$;return T*M},N,C)},_.scaleTo=function(y,$,N,C){_.transform(y,function(){var T=t.apply(this,arguments),M=this.__zoom,z=N==null?v(T):typeof N=="function"?N.apply(this,arguments):N,H=M.invert(z),L=typeof $=="function"?$.apply(this,arguments):$;return n(p(b(M,L),z,H),T,i)},N,C)},_.translateBy=function(y,$,N,C){_.transform(y,function(){return n(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof N=="function"?N.apply(this,arguments):N),t.apply(this,arguments),i)},null,C)},_.translateTo=function(y,$,N,C,T){_.transform(y,function(){var M=t.apply(this,arguments),z=this.__zoom,H=C==null?v(M):typeof C=="function"?C.apply(this,arguments):C;return n(vn.translate(H[0],H[1]).scale(z.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof N=="function"?-N.apply(this,arguments):-N),M,i)},C,T)};function b(y,$){return $=Math.max(s[0],Math.min(s[1],$)),$===y.k?y:new _e($,y.x,y.y)}function p(y,$,N){var C=$[0]-N[0]*y.k,T=$[1]-N[1]*y.k;return C===y.x&&T===y.y?y:new _e(y.k,C,T)}function v(y){return[(+y[0][0]+ +y[1][0])/2,(+y[0][1]+ +y[1][1])/2]}function S(y,$,N,C){y.on("start.zoom",function(){k(this,arguments).event(C).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(C).end()}).tween("zoom",function(){var T=this,M=arguments,z=k(T,M).event(C),H=t.apply(T,M),L=N==null?v(H):typeof N=="function"?N.apply(T,M):N,O=Math.max(H[1][0]-H[0][0],H[1][1]-H[0][1]),V=T.__zoom,Y=typeof $=="function"?$.apply(T,M):$,q=c(V.invert(L).concat(O/V.k),Y.invert(L).concat(O/Y.k));return function(B){if(B===1)B=Y;else{var G=q(B),K=O/G[2];B=new _e(K,L[0]-G[0]*K,L[1]-G[1]*K)}z.zoom(null,B)}})}function k(y,$,N){return!N&&y.__zooming||new E(y,$)}function E(y,$){this.that=y,this.args=$,this.active=0,this.sourceEvent=null,this.extent=t.apply(y,$),this.taps=0}E.prototype={event:function(y){return y&&(this.sourceEvent=y),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(y,$){return this.mouse&&y!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&y!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&y!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(y){var $=ce(this.that).datum();l.call(y,this.that,new df(y,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:l}),$)}};function A(y,...$){if(!e.apply(this,arguments))return;var N=k(this,$).event(y),C=this.__zoom,T=Math.max(s[0],Math.min(s[1],C.k*Math.pow(2,o.apply(this,arguments)))),M=ue(y);if(N.wheel)(N.mouse[0][0]!==M[0]||N.mouse[0][1]!==M[1])&&(N.mouse[1]=C.invert(N.mouse[0]=M)),clearTimeout(N.wheel);else{if(C.k===T)return;N.mouse=[M,C.invert(M)],Zt(this),N.start()}at(y),N.wheel=setTimeout(z,m),N.zoom("mouse",n(p(b(C,T),N.mouse[0],N.mouse[1]),N.extent,i));function z(){N.wheel=null,N.end()}}function j(y,...$){if(d||!e.apply(this,arguments))return;var N=y.currentTarget,C=k(this,$,!0).event(y),T=ce(y.view).on("mousemove.zoom",L,!0).on("mouseup.zoom",O,!0),M=ue(y,N),z=y.clientX,H=y.clientY;is(y.view),Rn(y),C.mouse=[M,this.__zoom.invert(M)],Zt(this),C.start();function L(V){if(at(V),!C.moved){var Y=V.clientX-z,q=V.clientY-H;C.moved=Y*Y+q*q>x}C.event(V).zoom("mouse",n(p(C.that.__zoom,C.mouse[0]=ue(V,N),C.mouse[1]),C.extent,i))}function O(V){T.on("mousemove.zoom mouseup.zoom",null),as(V.view,C.moved),at(V),C.event(V).end()}}function D(y,...$){if(e.apply(this,arguments)){var N=this.__zoom,C=ue(y.changedTouches?y.changedTouches[0]:y,this),T=N.invert(C),M=N.k*(y.shiftKey?.5:2),z=n(p(b(N,M),C,T),t.apply(this,$),i);at(y),a>0?ce(this).transition().duration(a).call(S,z,C,y):ce(this).call(_.transform,z,C,y)}}function P(y,...$){if(e.apply(this,arguments)){var N=y.touches,C=N.length,T=k(this,$,y.changedTouches.length===C).event(y),M,z,H,L;for(Rn(y),z=0;z<C;++z)H=N[z],L=ue(H,this),L=[L,this.__zoom.invert(L),H.identifier],T.touch0?!T.touch1&&T.touch0[2]!==L[2]&&(T.touch1=L,T.taps=0):(T.touch0=L,M=!0,T.taps=1+!!u);u&&(u=clearTimeout(u)),M&&(T.taps<2&&(f=L[0],u=setTimeout(function(){u=null},h)),Zt(this),T.start())}}function R(y,...$){if(this.__zooming){var N=k(this,$).event(y),C=y.changedTouches,T=C.length,M,z,H,L;for(at(y),M=0;M<T;++M)z=C[M],H=ue(z,this),N.touch0&&N.touch0[2]===z.identifier?N.touch0[0]=H:N.touch1&&N.touch1[2]===z.identifier&&(N.touch1[0]=H);if(z=N.that.__zoom,N.touch1){var O=N.touch0[0],V=N.touch0[1],Y=N.touch1[0],q=N.touch1[1],B=(B=Y[0]-O[0])*B+(B=Y[1]-O[1])*B,G=(G=q[0]-V[0])*G+(G=q[1]-V[1])*G;z=b(z,Math.sqrt(B/G)),H=[(O[0]+Y[0])/2,(O[1]+Y[1])/2],L=[(V[0]+q[0])/2,(V[1]+q[1])/2]}else if(N.touch0)H=N.touch0[0],L=N.touch0[1];else return;N.zoom("touch",n(p(z,H,L),N.extent,i))}}function F(y,...$){if(this.__zooming){var N=k(this,$).event(y),C=y.changedTouches,T=C.length,M,z;for(Rn(y),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),M=0;M<T;++M)z=C[M],N.touch0&&N.touch0[2]===z.identifier?delete N.touch0:N.touch1&&N.touch1[2]===z.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(z=ue(z,this),Math.hypot(f[0]-z[0],f[1]-z[1])<w)){var H=ce(this).on("dblclick.zoom");H&&H.apply(this,arguments)}}}return _.wheelDelta=function(y){return arguments.length?(o=typeof y=="function"?y:Vt(+y),_):o},_.filter=function(y){return arguments.length?(e=typeof y=="function"?y:Vt(!!y),_):e},_.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:Vt(!!y),_):r},_.extent=function(y){return arguments.length?(t=typeof y=="function"?y:Vt([[+y[0][0],+y[0][1]],[+y[1][0],+y[1][1]]]),_):t},_.scaleExtent=function(y){return arguments.length?(s[0]=+y[0],s[1]=+y[1],_):[s[0],s[1]]},_.translateExtent=function(y){return arguments.length?(i[0][0]=+y[0][0],i[1][0]=+y[1][0],i[0][1]=+y[0][1],i[1][1]=+y[1][1],_):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},_.constrain=function(y){return arguments.length?(n=y,_):n},_.duration=function(y){return arguments.length?(a=+y,_):a},_.interpolate=function(y){return arguments.length?(c=y,_):c},_.on=function(){var y=l.on.apply(l,arguments);return y===l?_:y},_.clickDistance=function(y){return arguments.length?(x=(y=+y)*y,_):Math.sqrt(x)},_.tapDistance=function(y){return arguments.length?(w=+y,_):w},_}const xe={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:o}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},wt=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Es=["Enter"," ","Escape"];var Ke;(function(e){e.Strict="strict",e.Loose="loose"})(Ke||(Ke={}));var Pe;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Pe||(Pe={}));var vt;(function(e){e.Partial="partial",e.Full="full"})(vt||(vt={}));const Ss={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var ke;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(ke||(ke={}));var un;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(un||(un={}));var X;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(X||(X={}));const or={[X.Left]:X.Right,[X.Right]:X.Left,[X.Top]:X.Bottom,[X.Bottom]:X.Top};function Cs(e){return e===null?null:e?"valid":"invalid"}const Ms=e=>"id"in e&&"source"in e&&"target"in e,xf=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),yo=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Ct=(e,t=[0,0])=>{const{width:n,height:o}=Ee(e),r=e.origin??t,s=n*r[0],i=o*r[1];return{x:e.position.x-s,y:e.position.y-i}},yf=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((o,r)=>{const s=typeof r=="string";let i=!t.nodeLookup&&!s?r:void 0;t.nodeLookup&&(i=s?t.nodeLookup.get(r):yo(r)?r:t.nodeLookup.get(r.id));const a=i?dn(i,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return _n(o,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return bn(n)},Mt=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(o=>{if(t.filter===void 0||t.filter(o)){const r=dn(o);n=_n(n,r)}}),bn(n)},ks=(e,t,[n,o,r]=[0,0,1],s=!1,i=!1)=>{const a={...kt(t,[n,o,r]),width:t.width/r,height:t.height/r},c=[];for(const l of e.values()){const{measured:u,selectable:f=!0,hidden:d=!1}=l;if(i&&!f||d)continue;const h=u.width??l.width??l.initialWidth??null,m=u.height??l.height??l.initialHeight??null,x=_t(a,Qe(l)),w=(h??0)*(m??0),_=s&&x>0;(!l.internals.handleBounds||_||x>=w||l.dragging)&&c.push(l)}return c},wf=(e,t)=>{const n=new Set;return e.forEach(o=>{n.add(o.id)}),t.filter(o=>n.has(o.source)||n.has(o.target))};function vf(e,t){const n=new Map,o=t!=null&&t.nodes?new Set(t.nodes.map(r=>r.id)):null;return e.forEach(r=>{r.measured.width&&r.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!r.hidden)&&(!o||o.has(r.id))&&n.set(r.id,r)}),n}async function _f({nodes:e,width:t,height:n,panZoom:o,minZoom:r,maxZoom:s},i){if(e.size===0)return Promise.resolve(!0);const a=vf(e,i),c=Mt(a),l=wo(c,t,n,(i==null?void 0:i.minZoom)??r,(i==null?void 0:i.maxZoom)??s,(i==null?void 0:i.padding)??.1);return await o.setViewport(l,{duration:i==null?void 0:i.duration}),Promise.resolve(!0)}function Is({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:r,onError:s}){const i=n.get(e),a=i.parentId?n.get(i.parentId):void 0,{x:c,y:l}=a?a.internals.positionAbsolute:{x:0,y:0},u=i.origin??o;let f=r;if(i.extent==="parent"&&!i.expandParent)if(!a)s==null||s("005",xe.error005());else{const h=a.measured.width,m=a.measured.height;h&&m&&(f=[[c,l],[c+h,l+m]])}else a&&Je(i.extent)&&(f=[[i.extent[0][0]+c,i.extent[0][1]+l],[i.extent[1][0]+c,i.extent[1][1]+l]]);const d=Je(f)?ze(t,f,i.measured):t;return(i.measured.width===void 0||i.measured.height===void 0)&&(s==null||s("015",xe.error015())),{position:{x:d.x-c+(i.measured.width??0)*u[0],y:d.y-l+(i.measured.height??0)*u[1]},positionAbsolute:d}}async function bf({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:o,onBeforeDelete:r}){const s=new Set(e.map(d=>d.id)),i=[];for(const d of n){if(d.deletable===!1)continue;const h=s.has(d.id),m=!h&&d.parentId&&i.find(x=>x.id===d.parentId);(h||m)&&i.push(d)}const a=new Set(t.map(d=>d.id)),c=o.filter(d=>d.deletable!==!1),u=wf(i,c);for(const d of c)a.has(d.id)&&!u.find(m=>m.id===d.id)&&u.push(d);if(!r)return{edges:u,nodes:i};const f=await r({nodes:i,edges:u});return typeof f=="boolean"?f?{edges:u,nodes:i}:{edges:[],nodes:[]}:f}const Ze=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ze=(e={x:0,y:0},t,n)=>({x:Ze(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Ze(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function $s(e,t,n){const{width:o,height:r}=Ee(n),{x:s,y:i}=n.internals.positionAbsolute;return ze(e,[[s,i],[s+o,i+r]],t)}const rr=(e,t,n)=>e<t?Ze(Math.abs(e-t),1,t)/t:e>n?-Ze(Math.abs(e-n),1,t)/t:0,As=(e,t,n=15,o=40)=>{const r=rr(e.x,o,t.width-o)*n,s=rr(e.y,o,t.height-o)*n;return[r,s]},_n=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),oo=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),bn=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Qe=(e,t=[0,0])=>{var r,s;const{x:n,y:o}=yo(e)?e.internals.positionAbsolute:Ct(e,t);return{x:n,y:o,width:((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0,height:((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0}},dn=(e,t=[0,0])=>{var r,s;const{x:n,y:o}=yo(e)?e.internals.positionAbsolute:Ct(e,t);return{x:n,y:o,x2:n+(((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0),y2:o+(((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0)}},Ts=(e,t)=>bn(_n(oo(e),oo(t))),_t=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},sr=e=>he(e.width)&&he(e.height)&&he(e.x)&&he(e.y),he=e=>!isNaN(e)&&isFinite(e),Nf=(e,t)=>{},Nn=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),kt=({x:e,y:t},[n,o,r],s=!1,i=[1,1])=>{const a={x:(e-n)/r,y:(t-o)/r};return s?Nn(a,i):a},fn=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o});function Oe(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Ef(e,t,n){if(typeof e=="string"||typeof e=="number"){const o=Oe(e,n),r=Oe(e,t);return{top:o,right:r,bottom:o,left:r,x:r*2,y:o*2}}if(typeof e=="object"){const o=Oe(e.top??e.y??0,n),r=Oe(e.bottom??e.y??0,n),s=Oe(e.left??e.x??0,t),i=Oe(e.right??e.x??0,t);return{top:o,right:i,bottom:r,left:s,x:s+i,y:o+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Sf(e,t,n,o,r,s){const{x:i,y:a}=fn(e,[t,n,o]),{x:c,y:l}=fn({x:e.x+e.width,y:e.y+e.height},[t,n,o]),u=r-c,f=s-l;return{left:Math.floor(i),top:Math.floor(a),right:Math.floor(u),bottom:Math.floor(f)}}const wo=(e,t,n,o,r,s)=>{const i=Ef(s,t,n),a=(t-i.x)/e.width,c=(n-i.y)/e.height,l=Math.min(a,c),u=Ze(l,o,r),f=e.x+e.width/2,d=e.y+e.height/2,h=t/2-f*u,m=n/2-d*u,x=Sf(e,h,m,u,t,n),w={left:Math.min(x.left-i.left,0),top:Math.min(x.top-i.top,0),right:Math.min(x.right-i.right,0),bottom:Math.min(x.bottom-i.bottom,0)};return{x:h-w.left+w.right,y:m-w.top+w.bottom,zoom:u}},hn=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Je(e){return e!==void 0&&e!=="parent"}function Ee(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function js(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function Ps(e,t={width:0,height:0},n,o,r){const s={...e},i=o.get(n);if(i){const a=i.origin||r;s.x+=i.internals.positionAbsolute.x-(t.width??0)*a[0],s.y+=i.internals.positionAbsolute.y-(t.height??0)*a[1]}return s}function ir(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Cf(){let e,t;return{promise:new Promise((o,r)=>{e=o,t=r}),resolve:e,reject:t}}function dt(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:o,containerBounds:r}){const{x:s,y:i}=be(e),a=kt({x:s-((r==null?void 0:r.left)??0),y:i-((r==null?void 0:r.top)??0)},o),{x:c,y:l}=n?Nn(a,t):a;return{xSnapped:c,ySnapped:l,...a}}const vo=e=>({width:e.offsetWidth,height:e.offsetHeight}),Ds=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Mf=["INPUT","SELECT","TEXTAREA"];function zs(e){var o,r;const t=((r=(o=e.composedPath)==null?void 0:o.call(e))==null?void 0:r[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:Mf.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Hs=e=>"clientX"in e,be=(e,t)=>{var s,i;const n=Hs(e),o=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,r=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:o-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},ar=(e,t,n,o,r)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(i=>{const a=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:e,nodeId:r,position:i.getAttribute("data-handlepos"),x:(a.left-n.left)/o,y:(a.top-n.top)/o,...vo(i)}})};function Rs({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:s,targetControlX:i,targetControlY:a}){const c=e*.125+r*.375+i*.375+n*.125,l=t*.125+s*.375+a*.375+o*.125,u=Math.abs(c-e),f=Math.abs(l-t);return[c,l,u,f]}function Ot(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function cr({pos:e,x1:t,y1:n,x2:o,y2:r,c:s}){switch(e){case X.Left:return[t-Ot(t-o,s),n];case X.Right:return[t+Ot(o-t,s),n];case X.Top:return[t,n-Ot(n-r,s)];case X.Bottom:return[t,n+Ot(r-n,s)]}}function Fs({sourceX:e,sourceY:t,sourcePosition:n=X.Bottom,targetX:o,targetY:r,targetPosition:s=X.Top,curvature:i=.25}){const[a,c]=cr({pos:n,x1:e,y1:t,x2:o,y2:r,c:i}),[l,u]=cr({pos:s,x1:o,y1:r,x2:e,y2:t,c:i}),[f,d,h,m]=Rs({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:a,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${a},${c} ${l},${u} ${o},${r}`,f,d,h,m]}function Ls({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,s=n<e?n+r:n-r,i=Math.abs(o-t)/2,a=o<t?o+i:o-i;return[s,a,r,i]}function kf({sourceNode:e,targetNode:t,selected:n=!1,zIndex:o=0,elevateOnSelect:r=!1}){if(!r)return o;const s=n||t.selected||e.selected,i=Math.max(e.internals.z||0,t.internals.z||0,1e3);return o+(s?i:0)}function If({sourceNode:e,targetNode:t,width:n,height:o,transform:r}){const s=_n(dn(e),dn(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const i={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:o/r[2]};return _t(i,bn(s))>0}const $f=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`xy-edge__${e}${t||""}-${n}${o||""}`,Af=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Bs=(e,t)=>{if(!e.source||!e.target)return t;let n;return Ms(e)?n={...e}:n={...e,id:$f(e)},Af(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Vs({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,s,i,a]=Ls({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,s,i,a]}const lr={[X.Left]:{x:-1,y:0},[X.Right]:{x:1,y:0},[X.Top]:{x:0,y:-1},[X.Bottom]:{x:0,y:1}},Tf=({source:e,sourcePosition:t=X.Bottom,target:n})=>t===X.Left||t===X.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},ur=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function jf({source:e,sourcePosition:t=X.Bottom,target:n,targetPosition:o=X.Top,center:r,offset:s}){const i=lr[t],a=lr[o],c={x:e.x+i.x*s,y:e.y+i.y*s},l={x:n.x+a.x*s,y:n.y+a.y*s},u=Tf({source:c,sourcePosition:t,target:l}),f=u.x!==0?"x":"y",d=u[f];let h=[],m,x;const w={x:0,y:0},_={x:0,y:0},[b,p,v,S]=Ls({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[f]*a[f]===-1){m=r.x??b,x=r.y??p;const E=[{x:m,y:c.y},{x:m,y:l.y}],A=[{x:c.x,y:x},{x:l.x,y:x}];i[f]===d?h=f==="x"?E:A:h=f==="x"?A:E}else{const E=[{x:c.x,y:l.y}],A=[{x:l.x,y:c.y}];if(f==="x"?h=i.x===d?A:E:h=i.y===d?E:A,t===o){const F=Math.abs(e[f]-n[f]);if(F<=s){const y=Math.min(s-1,s-F);i[f]===d?w[f]=(c[f]>e[f]?-1:1)*y:_[f]=(l[f]>n[f]?-1:1)*y}}if(t!==o){const F=f==="x"?"y":"x",y=i[f]===a[F],$=c[F]>l[F],N=c[F]<l[F];(i[f]===1&&(!y&&$||y&&N)||i[f]!==1&&(!y&&N||y&&$))&&(h=f==="x"?E:A)}const j={x:c.x+w.x,y:c.y+w.y},D={x:l.x+_.x,y:l.y+_.y},P=Math.max(Math.abs(j.x-h[0].x),Math.abs(D.x-h[0].x)),R=Math.max(Math.abs(j.y-h[0].y),Math.abs(D.y-h[0].y));P>=R?(m=(j.x+D.x)/2,x=h[0].y):(m=h[0].x,x=(j.y+D.y)/2)}return[[e,{x:c.x+w.x,y:c.y+w.y},...h,{x:l.x+_.x,y:l.y+_.y},n],m,x,v,S]}function Pf(e,t,n,o){const r=Math.min(ur(e,t)/2,ur(t,n)/2,o),{x:s,y:i}=t;if(e.x===s&&s===n.x||e.y===i&&i===n.y)return`L${s} ${i}`;if(e.y===i){const l=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${s+r*l},${i}Q ${s},${i} ${s},${i+r*u}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${s},${i+r*c}Q ${s},${i} ${s+r*a},${i}`}function gn({sourceX:e,sourceY:t,sourcePosition:n=X.Bottom,targetX:o,targetY:r,targetPosition:s=X.Top,borderRadius:i=5,centerX:a,centerY:c,offset:l=20}){const[u,f,d,h,m]=jf({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:s,center:{x:a,y:c},offset:l});return[u.reduce((w,_,b)=>{let p="";return b>0&&b<u.length-1?p=Pf(u[b-1],_,u[b+1],i):p=`${b===0?"M":"L"}${_.x} ${_.y}`,w+=p,w},""),f,d,h,m]}function dr(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Df(e){var f;const{sourceNode:t,targetNode:n}=e;if(!dr(t)||!dr(n))return null;const o=t.internals.handleBounds||fr(t.handles),r=n.internals.handleBounds||fr(n.handles),s=hr((o==null?void 0:o.source)??[],e.sourceHandle),i=hr(e.connectionMode===Ke.Strict?(r==null?void 0:r.target)??[]:((r==null?void 0:r.target)??[]).concat((r==null?void 0:r.source)??[]),e.targetHandle);if(!s||!i)return(f=e.onError)==null||f.call(e,"008",xe.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(s==null?void 0:s.position)||X.Bottom,c=(i==null?void 0:i.position)||X.Top,l=bt(t,s,a),u=bt(n,i,c);return{sourceX:l.x,sourceY:l.y,targetX:u.x,targetY:u.y,sourcePosition:a,targetPosition:c}}function fr(e){if(!e)return null;const t=[],n=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,o.type==="source"?t.push(o):o.type==="target"&&n.push(o);return{source:t,target:n}}function bt(e,t,n=X.Left,o=!1){const r=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,s=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:i,height:a}=t??Ee(e);if(o)return{x:r+i/2,y:s+a/2};switch((t==null?void 0:t.position)??n){case X.Top:return{x:r+i/2,y:s};case X.Right:return{x:r+i,y:s+a/2};case X.Bottom:return{x:r+i/2,y:s+a};case X.Left:return{x:r,y:s+a/2}}}function hr(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function ro(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`:""}function zf(e,{id:t,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:r}){const s=new Set;return e.reduce((i,a)=>([a.markerStart||o,a.markerEnd||r].forEach(c=>{if(c&&typeof c=="object"){const l=ro(c,t);s.has(l)||(i.push({id:l,color:c.color||n,...c}),s.add(l))}}),i),[]).sort((i,a)=>i.id.localeCompare(a.id))}const _o={nodeOrigin:[0,0],nodeExtent:wt,elevateNodesOnSelect:!0,defaults:{}},Hf={..._o,checkEquality:!0};function bo(e,t){const n={...e};for(const o in t)t[o]!==void 0&&(n[o]=t[o]);return n}function Rf(e,t,n){const o=bo(_o,n);for(const r of e.values())if(r.parentId)No(r,e,t,o);else{const s=Ct(r,o.nodeOrigin),i=Je(r.extent)?r.extent:o.nodeExtent,a=ze(s,i,Ee(r));r.internals.positionAbsolute=a}}function so(e,t,n,o){var c,l;const r=bo(Hf,o);let s=e.length>0;const i=new Map(t),a=r!=null&&r.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let f=i.get(u.id);if(r.checkEquality&&u===(f==null?void 0:f.internals.userNode))t.set(u.id,f);else{const d=Ct(u,r.nodeOrigin),h=Je(u.extent)?u.extent:r.nodeExtent,m=ze(d,h,Ee(u));f={...r.defaults,...u,measured:{width:(c=u.measured)==null?void 0:c.width,height:(l=u.measured)==null?void 0:l.height},internals:{positionAbsolute:m,handleBounds:u.measured?f==null?void 0:f.internals.handleBounds:void 0,z:Os(u,a),userNode:u}},t.set(u.id,f)}(f.measured===void 0||f.measured.width===void 0||f.measured.height===void 0)&&!f.hidden&&(s=!1),u.parentId&&No(f,t,n,o)}return s}function Ff(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function No(e,t,n,o){const{elevateNodesOnSelect:r,nodeOrigin:s,nodeExtent:i}=bo(_o,o),a=e.parentId,c=t.get(a);if(!c){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Ff(e,n);const l=r?1e3:0,{x:u,y:f,z:d}=Lf(e,c,s,i,l),{positionAbsolute:h}=e.internals,m=u!==h.x||f!==h.y;(m||d!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:m?{x:u,y:f}:h,z:d}})}function Os(e,t){return(he(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Lf(e,t,n,o,r){const{x:s,y:i}=t.internals.positionAbsolute,a=Ee(e),c=Ct(e,n),l=Je(e.extent)?ze(c,e.extent,a):c;let u=ze({x:s+l.x,y:i+l.y},o,a);e.extent==="parent"&&(u=$s(u,a,t));const f=Os(e,r),d=t.internals.z??0;return{x:u.x,y:u.y,z:d>f?d:f}}function Eo(e,t,n,o=[0,0]){var i;const r=[],s=new Map;for(const a of e){const c=t.get(a.parentId);if(!c)continue;const l=((i=s.get(a.parentId))==null?void 0:i.expandedRect)??Qe(c),u=Ts(l,a.rect);s.set(a.parentId,{expandedRect:u,parent:c})}return s.size>0&&s.forEach(({expandedRect:a,parent:c},l)=>{var p;const u=c.internals.positionAbsolute,f=Ee(c),d=c.origin??o,h=a.x<u.x?Math.round(Math.abs(u.x-a.x)):0,m=a.y<u.y?Math.round(Math.abs(u.y-a.y)):0,x=Math.max(f.width,Math.round(a.width)),w=Math.max(f.height,Math.round(a.height)),_=(x-f.width)*d[0],b=(w-f.height)*d[1];(h>0||m>0||_||b)&&(r.push({id:l,type:"position",position:{x:c.position.x-h+_,y:c.position.y-m+b}}),(p=n.get(l))==null||p.forEach(v=>{e.some(S=>S.id===v.id)||r.push({id:v.id,type:"position",position:{x:v.position.x+h,y:v.position.y+m}})})),(f.width<a.width||f.height<a.height||h||m)&&r.push({id:l,type:"dimensions",setAttributes:!0,dimensions:{width:x+(h?d[0]*h-_:0),height:w+(m?d[1]*m-b:0)}})}),r}function Bf(e,t,n,o,r,s){const i=o==null?void 0:o.querySelector(".xyflow__viewport");let a=!1;if(!i)return{changes:[],updatedInternals:a};const c=[],l=window.getComputedStyle(i),{m22:u}=new window.DOMMatrixReadOnly(l.transform),f=[];for(const d of e.values()){const h=t.get(d.id);if(!h)continue;if(h.hidden){t.set(h.id,{...h,internals:{...h.internals,handleBounds:void 0}}),a=!0;continue}const m=vo(d.nodeElement),x=h.measured.width!==m.width||h.measured.height!==m.height;if(!!(m.width&&m.height&&(x||!h.internals.handleBounds||d.force))){const _=d.nodeElement.getBoundingClientRect(),b=Je(h.extent)?h.extent:s;let{positionAbsolute:p}=h.internals;h.parentId&&h.extent==="parent"?p=$s(p,m,t.get(h.parentId)):b&&(p=ze(p,b,m));const v={...h,measured:m,internals:{...h.internals,positionAbsolute:p,handleBounds:{source:ar("source",d.nodeElement,_,u,h.id),target:ar("target",d.nodeElement,_,u,h.id)}}};t.set(h.id,v),h.parentId&&No(v,t,n,{nodeOrigin:r}),a=!0,x&&(c.push({id:h.id,type:"dimensions",dimensions:m}),h.expandParent&&h.parentId&&f.push({id:h.id,parentId:h.parentId,rect:Qe(v,r)}))}}if(f.length>0){const d=Eo(f,t,n,r);c.push(...d)}return{changes:c,updatedInternals:a}}async function Vf({delta:e,panZoom:t,transform:n,translateExtent:o,width:r,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const i=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,s]],o),a=!!i&&(i.x!==n[0]||i.y!==n[1]||i.k!==n[2]);return Promise.resolve(a)}function gr(e,t,n,o,r,s){let i=r;const a=o.get(i)||new Map;o.set(i,a.set(n,t)),i=`${r}-${e}`;const c=o.get(i)||new Map;if(o.set(i,c.set(n,t)),s){i=`${r}-${e}-${s}`;const l=o.get(i)||new Map;o.set(i,l.set(n,t))}}function Ys(e,t,n){e.clear(),t.clear();for(const o of n){const{source:r,target:s,sourceHandle:i=null,targetHandle:a=null}=o,c={edgeId:o.id,source:r,target:s,sourceHandle:i,targetHandle:a},l=`${r}-${i}--${s}-${a}`,u=`${s}-${a}--${r}-${i}`;gr("source",c,u,e,r,i),gr("target",c,l,e,s,a),t.set(o.id,o)}}function Of(e,t){if(e===null||t===null)return!1;const n=Array.isArray(e)?e:[e],o=Array.isArray(t)?t:[t];if(n.length!==o.length)return!1;for(let r=0;r<n.length;r++)if(n[r].id!==o[r].id||n[r].type!==o[r].type||!Object.is(n[r].data,o[r].data))return!1;return!0}function Xs(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Xs(n,t):!1}function pr(e,t,n){var r;let o=e;do{if((r=o==null?void 0:o.matches)!=null&&r.call(o,t))return!0;if(o===n)return!1;o=o==null?void 0:o.parentElement}while(o);return!1}function Yf(e,t,n,o){const r=new Map;for(const[s,i]of e)if((i.selected||i.id===o)&&(!i.parentId||!Xs(i,e))&&(i.draggable||t&&typeof i.draggable>"u")){const a=e.get(s);a&&r.set(s,{id:s,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return r}function Fn({nodeId:e,dragItems:t,nodeLookup:n,dragging:o=!0}){var i,a,c;const r=[];for(const[l,u]of t){const f=(i=n.get(l))==null?void 0:i.internals.userNode;f&&r.push({...f,position:u.position,dragging:o})}if(!e)return[r[0],r];const s=(a=n.get(e))==null?void 0:a.internals.userNode;return[s?{...s,position:((c=t.get(e))==null?void 0:c.position)||s.position,dragging:o}:r[0],r]}function Xf({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:o,onDragStop:r}){let s={x:null,y:null},i=0,a=new Map,c=!1,l={x:0,y:0},u=null,f=!1,d=null,h=!1;function m({noDragClassName:w,handleSelector:_,domNode:b,isSelectable:p,nodeId:v,nodeClickDistance:S=0}){d=ce(b);function k({x:D,y:P},R){const{nodeLookup:F,nodeExtent:y,snapGrid:$,snapToGrid:N,nodeOrigin:C,onNodeDrag:T,onSelectionDrag:M,onError:z,updateNodePositions:H}=t();s={x:D,y:P};let L=!1,O={x:0,y:0,x2:0,y2:0};if(a.size>1&&y){const V=Mt(a);O=oo(V)}for(const[V,Y]of a){if(!F.has(V))continue;let q={x:D-Y.distance.x,y:P-Y.distance.y};N&&(q=Nn(q,$));let B=[[y[0][0],y[0][1]],[y[1][0],y[1][1]]];if(a.size>1&&y&&!Y.extent){const{positionAbsolute:J}=Y.internals,U=J.x-O.x+y[0][0],W=J.x+Y.measured.width-O.x2+y[1][0],ne=J.y-O.y+y[0][1],Q=J.y+Y.measured.height-O.y2+y[1][1];B=[[U,ne],[W,Q]]}const{position:G,positionAbsolute:K}=Is({nodeId:V,nextPosition:q,nodeLookup:F,nodeExtent:B,nodeOrigin:C,onError:z});L=L||Y.position.x!==G.x||Y.position.y!==G.y,Y.position=G,Y.internals.positionAbsolute=K}if(L&&(H(a,!0),R&&(o||T||!v&&M))){const[V,Y]=Fn({nodeId:v,dragItems:a,nodeLookup:F});o==null||o(R,a,V,Y),T==null||T(R,V,Y),v||M==null||M(R,Y)}}async function E(){if(!u)return;const{transform:D,panBy:P,autoPanSpeed:R,autoPanOnNodeDrag:F}=t();if(!F){c=!1,cancelAnimationFrame(i);return}const[y,$]=As(l,u,R);(y!==0||$!==0)&&(s.x=(s.x??0)-y/D[2],s.y=(s.y??0)-$/D[2],await P({x:y,y:$})&&k(s,null)),i=requestAnimationFrame(E)}function A(D){var L;const{nodeLookup:P,multiSelectionActive:R,nodesDraggable:F,transform:y,snapGrid:$,snapToGrid:N,selectNodesOnDrag:C,onNodeDragStart:T,onSelectionDragStart:M,unselectNodesAndEdges:z}=t();f=!0,(!C||!p)&&!R&&v&&((L=P.get(v))!=null&&L.selected||z()),p&&C&&v&&(e==null||e(v));const H=dt(D.sourceEvent,{transform:y,snapGrid:$,snapToGrid:N,containerBounds:u});if(s=H,a=Yf(P,F,H,v),a.size>0&&(n||T||!v&&M)){const[O,V]=Fn({nodeId:v,dragItems:a,nodeLookup:P});n==null||n(D.sourceEvent,a,O,V),T==null||T(D.sourceEvent,O,V),v||M==null||M(D.sourceEvent,V)}}const j=cs().clickDistance(S).on("start",D=>{const{domNode:P,nodeDragThreshold:R,transform:F,snapGrid:y,snapToGrid:$}=t();u=(P==null?void 0:P.getBoundingClientRect())||null,h=!1,R===0&&A(D),s=dt(D.sourceEvent,{transform:F,snapGrid:y,snapToGrid:$,containerBounds:u}),l=be(D.sourceEvent,u)}).on("drag",D=>{const{autoPanOnNodeDrag:P,transform:R,snapGrid:F,snapToGrid:y,nodeDragThreshold:$,nodeLookup:N}=t(),C=dt(D.sourceEvent,{transform:R,snapGrid:F,snapToGrid:y,containerBounds:u});if((D.sourceEvent.type==="touchmove"&&D.sourceEvent.touches.length>1||v&&!N.has(v))&&(h=!0),!h){if(!c&&P&&f&&(c=!0,E()),!f){const T=C.xSnapped-(s.x??0),M=C.ySnapped-(s.y??0);Math.sqrt(T*T+M*M)>$&&A(D)}(s.x!==C.xSnapped||s.y!==C.ySnapped)&&a&&f&&(l=be(D.sourceEvent,u),k(C,D.sourceEvent))}}).on("end",D=>{if(!(!f||h)&&(c=!1,f=!1,cancelAnimationFrame(i),a.size>0)){const{nodeLookup:P,updateNodePositions:R,onNodeDragStop:F,onSelectionDragStop:y}=t();if(R(a,!1),r||F||!v&&y){const[$,N]=Fn({nodeId:v,dragItems:a,nodeLookup:P,dragging:!1});r==null||r(D.sourceEvent,a,$,N),F==null||F(D.sourceEvent,$,N),v||y==null||y(D.sourceEvent,N)}}}).filter(D=>{const P=D.target;return!D.button&&(!w||!pr(P,`.${w}`,b))&&(!_||pr(P,_,b))});d.call(j)}function x(){d==null||d.on(".drag",null)}return{update:m,destroy:x}}function Wf(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())_t(r,Qe(s))>0&&o.push(s);return o}const qf=250;function Gf(e,t,n,o){var a,c;let r=[],s=1/0;const i=Wf(e,n,t+qf);for(const l of i){const u=[...((a=l.internals.handleBounds)==null?void 0:a.source)??[],...((c=l.internals.handleBounds)==null?void 0:c.target)??[]];for(const f of u){if(o.nodeId===f.nodeId&&o.type===f.type&&o.id===f.id)continue;const{x:d,y:h}=bt(l,f,f.position,!0),m=Math.sqrt(Math.pow(d-e.x,2)+Math.pow(h-e.y,2));m>t||(m<s?(r=[{...f,x:d,y:h}],s=m):m===s&&r.push({...f,x:d,y:h}))}}if(!r.length)return null;if(r.length>1){const l=o.type==="source"?"target":"source";return r.find(u=>u.type===l)??r[0]}return r[0]}function Ws(e,t,n,o,r,s=!1){var l,u,f;const i=o.get(e);if(!i)return null;const a=r==="strict"?(l=i.internals.handleBounds)==null?void 0:l[t]:[...((u=i.internals.handleBounds)==null?void 0:u.source)??[],...((f=i.internals.handleBounds)==null?void 0:f.target)??[]],c=(n?a==null?void 0:a.find(d=>d.id===n):a==null?void 0:a[0])??null;return c&&s?{...c,...bt(i,c,c.position,!0)}:c}function qs(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Uf(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Gs=()=>!0;function Kf(e,{connectionMode:t,connectionRadius:n,handleId:o,nodeId:r,edgeUpdaterType:s,isTarget:i,domNode:a,nodeLookup:c,lib:l,autoPanOnConnect:u,flowId:f,panBy:d,cancelConnection:h,onConnectStart:m,onConnect:x,onConnectEnd:w,isValidConnection:_=Gs,onReconnectEnd:b,updateConnection:p,getTransform:v,getFromHandle:S,autoPanSpeed:k}){const E=Ds(e.target);let A=0,j;const{x:D,y:P}=be(e),R=E==null?void 0:E.elementFromPoint(D,P),F=qs(s,R),y=a==null?void 0:a.getBoundingClientRect();if(!y||!F)return;const $=Ws(r,F,o,c,t);if(!$)return;let N=be(e,y),C=!1,T=null,M=!1,z=null;function H(){if(!u||!y)return;const[K,J]=As(N,y,k);d({x:K,y:J}),A=requestAnimationFrame(H)}const L={...$,nodeId:r,type:F,position:$.position},O=c.get(r),Y={inProgress:!0,isValid:null,from:bt(O,L,X.Left,!0),fromHandle:L,fromPosition:L.position,fromNode:O,to:N,toHandle:null,toPosition:or[L.position],toNode:null};p(Y);let q=Y;m==null||m(e,{nodeId:r,handleId:o,handleType:F});function B(K){if(!S()||!L){G(K);return}const J=v();N=be(K,y),j=Gf(kt(N,J,!1,[1,1]),n,c,L),C||(H(),C=!0);const U=Us(K,{handle:j,connectionMode:t,fromNodeId:r,fromHandleId:o,fromType:i?"target":"source",isValidConnection:_,doc:E,lib:l,flowId:f,nodeLookup:c});z=U.handleDomNode,T=U.connection,M=Uf(!!j,U.isValid);const W={...q,isValid:M,to:U.toHandle&&M?fn({x:U.toHandle.x,y:U.toHandle.y},J):N,toHandle:U.toHandle,toPosition:M&&U.toHandle?U.toHandle.position:or[L.position],toNode:U.toHandle?c.get(U.toHandle.nodeId):null};M&&j&&q.toHandle&&W.toHandle&&q.toHandle.type===W.toHandle.type&&q.toHandle.nodeId===W.toHandle.nodeId&&q.toHandle.id===W.toHandle.id&&q.to.x===W.to.x&&q.to.y===W.to.y||(p(W),q=W)}function G(K){(j||z)&&T&&M&&(x==null||x(T));const{inProgress:J,...U}=q,W={...U,toPosition:q.toHandle?q.toPosition:null};w==null||w(K,W),s&&(b==null||b(K,W)),h(),cancelAnimationFrame(A),C=!1,M=!1,T=null,z=null,E.removeEventListener("mousemove",B),E.removeEventListener("mouseup",G),E.removeEventListener("touchmove",B),E.removeEventListener("touchend",G)}E.addEventListener("mousemove",B),E.addEventListener("mouseup",G),E.addEventListener("touchmove",B),E.addEventListener("touchend",G)}function Us(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:s,doc:i,lib:a,flowId:c,isValidConnection:l=Gs,nodeLookup:u}){const f=s==="target",d=t?i.querySelector(`.${a}-flow__handle[data-id="${c}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:h,y:m}=be(e),x=i.elementFromPoint(h,m),w=x!=null&&x.classList.contains(`${a}-flow__handle`)?x:d,_={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const b=qs(void 0,w),p=w.getAttribute("data-nodeid"),v=w.getAttribute("data-handleid"),S=w.classList.contains("connectable"),k=w.classList.contains("connectableend");if(!p||!b)return _;const E={source:f?p:o,sourceHandle:f?v:r,target:f?o:p,targetHandle:f?r:v};_.connection=E;const j=S&&k&&(n===Ke.Strict?f&&b==="source"||!f&&b==="target":p!==o||v!==r);_.isValid=j&&l(E),_.toHandle=Ws(p,b,v,u,n,!0)}return _}const io={onPointerDown:Kf,isValid:Us};function Zf({domNode:e,panZoom:t,getTransform:n,getViewScale:o}){const r=ce(e);function s({translateExtent:a,width:c,height:l,zoomStep:u=10,pannable:f=!0,zoomable:d=!0,inversePan:h=!1}){const m=p=>{const v=n();if(p.sourceEvent.type!=="wheel"||!t)return;const S=-p.sourceEvent.deltaY*(p.sourceEvent.deltaMode===1?.05:p.sourceEvent.deltaMode?1:.002)*u,k=v[2]*Math.pow(2,S);t.scaleTo(k)};let x=[0,0];const w=p=>{(p.sourceEvent.type==="mousedown"||p.sourceEvent.type==="touchstart")&&(x=[p.sourceEvent.clientX??p.sourceEvent.touches[0].clientX,p.sourceEvent.clientY??p.sourceEvent.touches[0].clientY])},_=p=>{const v=n();if(p.sourceEvent.type!=="mousemove"&&p.sourceEvent.type!=="touchmove"||!t)return;const S=[p.sourceEvent.clientX??p.sourceEvent.touches[0].clientX,p.sourceEvent.clientY??p.sourceEvent.touches[0].clientY],k=[S[0]-x[0],S[1]-x[1]];x=S;const E=o()*Math.max(v[2],Math.log(v[2]))*(h?-1:1),A={x:v[0]-k[0]*E,y:v[1]-k[1]*E},j=[[0,0],[c,l]];t.setViewportConstrained({x:A.x,y:A.y,zoom:v[2]},j,a)},b=Ns().on("start",w).on("zoom",f?_:null).on("zoom.wheel",d?m:null);r.call(b,{})}function i(){r.on("zoom",null)}return{update:s,destroy:i,pointer:ue}}const Qf=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,En=e=>({x:e.x,y:e.y,zoom:e.k}),Ln=({x:e,y:t,zoom:n})=>vn.translate(e,t).scale(n),Ye=(e,t)=>e.target.closest(`.${t}`),Ks=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Bn=(e,t=0,n=()=>{})=>{const o=typeof t=="number"&&t>0;return o||n(),o?e.transition().duration(t).on("end",n):e},Zs=e=>{const t=e.ctrlKey&&hn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Jf({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:o,panOnScrollMode:r,panOnScrollSpeed:s,zoomOnPinch:i,onPanZoomStart:a,onPanZoom:c,onPanZoomEnd:l}){return u=>{if(Ye(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(u.ctrlKey&&i){const w=ue(u),_=Zs(u),b=f*Math.pow(2,_);o.scaleTo(n,b,w,u);return}const d=u.deltaMode===1?20:1;let h=r===Pe.Vertical?0:u.deltaX*d,m=r===Pe.Horizontal?0:u.deltaY*d;!hn()&&u.shiftKey&&r!==Pe.Vertical&&(h=u.deltaY*d,m=0),o.translateBy(n,-(h/f)*s,-(m/f)*s,{internal:!0});const x=En(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a==null||a(u,x)),e.isPanScrolling&&(c==null||c(u,x),e.panScrollTimeout=setTimeout(()=>{l==null||l(u,x),e.isPanScrolling=!1},150))}}function eh({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(o,r){const s=o.type==="wheel",i=!t&&s&&!o.ctrlKey,a=Ye(o,e);if(o.ctrlKey&&s&&a&&o.preventDefault(),i||a)return null;o.preventDefault(),n.call(this,o,r)}}function th({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return o=>{var s,i,a;if((s=o.sourceEvent)!=null&&s.internal)return;const r=En(o.transform);e.mouseButton=((i=o.sourceEvent)==null?void 0:i.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=r,((a=o.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(o.sourceEvent,r))}}function nh({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:o,onPanZoom:r}){return s=>{var i,a;e.usedRightMouseButton=!!(n&&Ks(t,e.mouseButton??0)),(i=s.sourceEvent)!=null&&i.sync||o([s.transform.x,s.transform.y,s.transform.k]),r&&!((a=s.sourceEvent)!=null&&a.internal)&&(r==null||r(s.sourceEvent,En(s.transform)))}}function oh({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:r,onPaneContextMenu:s}){return i=>{var a;if(!((a=i.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,s&&Ks(t,e.mouseButton??0)&&!e.usedRightMouseButton&&i.sourceEvent&&s(i.sourceEvent),e.usedRightMouseButton=!1,o(!1),r&&Qf(e.prevViewport,i.transform))){const c=En(i.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{r==null||r(i.sourceEvent,c)},n?150:0)}}}function rh({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:o,panOnScroll:r,zoomOnDoubleClick:s,userSelectionActive:i,noWheelClassName:a,noPanClassName:c,lib:l}){return u=>{var m;const f=e||t,d=n&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(Ye(u,`${l}-flow__node`)||Ye(u,`${l}-flow__edge`)))return!0;if(!o&&!f&&!r&&!s&&!n||i||Ye(u,a)&&u.type==="wheel"||Ye(u,c)&&(u.type!=="wheel"||r&&u.type==="wheel"&&!e)||!n&&u.ctrlKey&&u.type==="wheel")return!1;if(!n&&u.type==="touchstart"&&((m=u.touches)==null?void 0:m.length)>1)return u.preventDefault(),!1;if(!f&&!r&&!d&&u.type==="wheel"||!o&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(o)&&!o.includes(u.button)&&u.type==="mousedown")return!1;const h=Array.isArray(o)&&o.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&h}}function sh({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:o,translateExtent:r,viewport:s,onPanZoom:i,onPanZoomStart:a,onPanZoomEnd:c,onDraggingChange:l}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=e.getBoundingClientRect(),d=Ns().clickDistance(!he(o)||o<0?0:o).scaleExtent([t,n]).translateExtent(r),h=ce(e).call(d);p({x:s.x,y:s.y,zoom:Ze(s.zoom,t,n)},[[0,0],[f.width,f.height]],r);const m=h.on("wheel.zoom"),x=h.on("dblclick.zoom");d.wheelDelta(Zs);function w(R,F){return h?new Promise(y=>{d==null||d.transform(Bn(h,F==null?void 0:F.duration,()=>y(!0)),R)}):Promise.resolve(!1)}function _({noWheelClassName:R,noPanClassName:F,onPaneContextMenu:y,userSelectionActive:$,panOnScroll:N,panOnDrag:C,panOnScrollMode:T,panOnScrollSpeed:M,preventScrolling:z,zoomOnPinch:H,zoomOnScroll:L,zoomOnDoubleClick:O,zoomActivationKeyPressed:V,lib:Y,onTransformChange:q}){$&&!u.isZoomingOrPanning&&b();const G=N&&!V&&!$?Jf({zoomPanValues:u,noWheelClassName:R,d3Selection:h,d3Zoom:d,panOnScrollMode:T,panOnScrollSpeed:M,zoomOnPinch:H,onPanZoomStart:a,onPanZoom:i,onPanZoomEnd:c}):eh({noWheelClassName:R,preventScrolling:z,d3ZoomHandler:m});if(h.on("wheel.zoom",G,{passive:!1}),!$){const J=th({zoomPanValues:u,onDraggingChange:l,onPanZoomStart:a});d.on("start",J);const U=nh({zoomPanValues:u,panOnDrag:C,onPaneContextMenu:!!y,onPanZoom:i,onTransformChange:q});d.on("zoom",U);const W=oh({zoomPanValues:u,panOnDrag:C,panOnScroll:N,onPaneContextMenu:y,onPanZoomEnd:c,onDraggingChange:l});d.on("end",W)}const K=rh({zoomActivationKeyPressed:V,panOnDrag:C,zoomOnScroll:L,panOnScroll:N,zoomOnDoubleClick:O,zoomOnPinch:H,userSelectionActive:$,noPanClassName:F,noWheelClassName:R,lib:Y});d.filter(K),O?h.on("dblclick.zoom",x):h.on("dblclick.zoom",null)}function b(){d.on("zoom",null)}async function p(R,F,y){const $=Ln(R),N=d==null?void 0:d.constrain()($,F,y);return N&&await w(N),new Promise(C=>C(N))}async function v(R,F){const y=Ln(R);return await w(y,F),new Promise($=>$(y))}function S(R){if(h){const F=Ln(R),y=h.property("__zoom");(y.k!==R.zoom||y.x!==R.x||y.y!==R.y)&&(d==null||d.transform(h,F,null,{sync:!0}))}}function k(){const R=h?bs(h.node()):{x:0,y:0,k:1};return{x:R.x,y:R.y,zoom:R.k}}function E(R,F){return h?new Promise(y=>{d==null||d.scaleTo(Bn(h,F==null?void 0:F.duration,()=>y(!0)),R)}):Promise.resolve(!1)}function A(R,F){return h?new Promise(y=>{d==null||d.scaleBy(Bn(h,F==null?void 0:F.duration,()=>y(!0)),R)}):Promise.resolve(!1)}function j(R){d==null||d.scaleExtent(R)}function D(R){d==null||d.translateExtent(R)}function P(R){const F=!he(R)||R<0?0:R;d==null||d.clickDistance(F)}return{update:_,destroy:b,setViewport:v,setViewportConstrained:p,getViewport:k,scaleTo:E,scaleBy:A,setScaleExtent:j,setTranslateExtent:D,syncViewport:S,setClickDistance:P}}var ft;(function(e){e.Line="line",e.Handle="handle"})(ft||(ft={}));function ih({width:e,prevWidth:t,height:n,prevHeight:o,affectsX:r,affectsY:s}){const i=e-t,a=n-o,c=[i>0?1:i<0?-1:0,a>0?1:a<0?-1:0];return i&&r&&(c[0]=c[0]*-1),a&&s&&(c[1]=c[1]*-1),c}function ah(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),o=e.includes("left"),r=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:o,affectsY:r}}function Se(e,t){return Math.max(0,t-e)}function Ce(e,t){return Math.max(0,e-t)}function Yt(e,t,n){return Math.max(0,t-e,e-n)}function mr(e,t){return e?!t:t}function ch(e,t,n,o,r,s,i,a){let{affectsX:c,affectsY:l}=t;const{isHorizontal:u,isVertical:f}=t,d=u&&f,{xSnapped:h,ySnapped:m}=n,{minWidth:x,maxWidth:w,minHeight:_,maxHeight:b}=o,{x:p,y:v,width:S,height:k,aspectRatio:E}=e;let A=Math.floor(u?h-e.pointerX:0),j=Math.floor(f?m-e.pointerY:0);const D=S+(c?-A:A),P=k+(l?-j:j),R=-s[0]*S,F=-s[1]*k;let y=Yt(D,x,w),$=Yt(P,_,b);if(i){let T=0,M=0;c&&A<0?T=Se(p+A+R,i[0][0]):!c&&A>0&&(T=Ce(p+D+R,i[1][0])),l&&j<0?M=Se(v+j+F,i[0][1]):!l&&j>0&&(M=Ce(v+P+F,i[1][1])),y=Math.max(y,T),$=Math.max($,M)}if(a){let T=0,M=0;c&&A>0?T=Ce(p+A,a[0][0]):!c&&A<0&&(T=Se(p+D,a[1][0])),l&&j>0?M=Ce(v+j,a[0][1]):!l&&j<0&&(M=Se(v+P,a[1][1])),y=Math.max(y,T),$=Math.max($,M)}if(r){if(u){const T=Yt(D/E,_,b)*E;if(y=Math.max(y,T),i){let M=0;!c&&!l||c&&!l&&d?M=Ce(v+F+D/E,i[1][1])*E:M=Se(v+F+(c?A:-A)/E,i[0][1])*E,y=Math.max(y,M)}if(a){let M=0;!c&&!l||c&&!l&&d?M=Se(v+D/E,a[1][1])*E:M=Ce(v+(c?A:-A)/E,a[0][1])*E,y=Math.max(y,M)}}if(f){const T=Yt(P*E,x,w)/E;if($=Math.max($,T),i){let M=0;!c&&!l||l&&!c&&d?M=Ce(p+P*E+R,i[1][0])/E:M=Se(p+(l?j:-j)*E+R,i[0][0])/E,$=Math.max($,M)}if(a){let M=0;!c&&!l||l&&!c&&d?M=Se(p+P*E,a[1][0])/E:M=Ce(p+(l?j:-j)*E,a[0][0])/E,$=Math.max($,M)}}}j=j+(j<0?$:-$),A=A+(A<0?y:-y),r&&(d?D>P*E?j=(mr(c,l)?-A:A)/E:A=(mr(c,l)?-j:j)*E:u?(j=A/E,l=c):(A=j*E,c=l));const N=c?p+A:p,C=l?v+j:v;return{width:S+(c?-A:A),height:k+(l?-j:j),x:s[0]*A*(c?-1:1)+N,y:s[1]*j*(l?-1:1)+C}}const Qs={width:0,height:0,x:0,y:0},lh={...Qs,pointerX:0,pointerY:0,aspectRatio:1};function uh(e){return[[0,0],[e.measured.width,e.measured.height]]}function dh(e,t,n){const o=t.position.x+e.position.x,r=t.position.y+e.position.y,s=e.measured.width??0,i=e.measured.height??0,a=n[0]*s,c=n[1]*i;return[[o-a,r-c],[o+s-a,r+i-c]]}function fh({domNode:e,nodeId:t,getStoreItems:n,onChange:o,onEnd:r}){const s=ce(e);function i({controlPosition:c,boundaries:l,keepAspectRatio:u,resizeDirection:f,onResizeStart:d,onResize:h,onResizeEnd:m,shouldResize:x}){let w={...Qs},_={...lh};const b=ah(c);let p,v=null,S=[],k,E,A;const j=cs().on("start",D=>{const{nodeLookup:P,transform:R,snapGrid:F,snapToGrid:y,nodeOrigin:$,paneDomNode:N}=n();if(p=P.get(t),!p)return;v=(N==null?void 0:N.getBoundingClientRect())??null;const{xSnapped:C,ySnapped:T}=dt(D.sourceEvent,{transform:R,snapGrid:F,snapToGrid:y,containerBounds:v});w={width:p.measured.width??0,height:p.measured.height??0,x:p.position.x??0,y:p.position.y??0},_={...w,pointerX:C,pointerY:T,aspectRatio:w.width/w.height},k=void 0,p.parentId&&(p.extent==="parent"||p.expandParent)&&(k=P.get(p.parentId),E=k&&p.extent==="parent"?uh(k):void 0),S=[],A=void 0;for(const[M,z]of P)if(z.parentId===t&&(S.push({id:M,position:{...z.position},extent:z.extent}),z.extent==="parent"||z.expandParent)){const H=dh(z,p,z.origin??$);A?A=[[Math.min(H[0][0],A[0][0]),Math.min(H[0][1],A[0][1])],[Math.max(H[1][0],A[1][0]),Math.max(H[1][1],A[1][1])]]:A=H}d==null||d(D,{...w})}).on("drag",D=>{const{transform:P,snapGrid:R,snapToGrid:F,nodeOrigin:y}=n(),$=dt(D.sourceEvent,{transform:P,snapGrid:R,snapToGrid:F,containerBounds:v}),N=[];if(!p)return;const{x:C,y:T,width:M,height:z}=w,H={},L=p.origin??y,{width:O,height:V,x:Y,y:q}=ch(_,b,$,l,u,L,E,A),B=O!==M,G=V!==z,K=Y!==C&&B,J=q!==T&&G;if(!K&&!J&&!B&&!G)return;if((K||J||L[0]===1||L[1]===1)&&(H.x=K?Y:w.x,H.y=J?q:w.y,w.x=H.x,w.y=H.y,S.length>0)){const Q=Y-C,re=q-T;for(const ie of S)ie.position={x:ie.position.x-Q+L[0]*(O-M),y:ie.position.y-re+L[1]*(V-z)},N.push(ie)}if((B||G)&&(H.width=B&&(!f||f==="horizontal")?O:w.width,H.height=G&&(!f||f==="vertical")?V:w.height,w.width=H.width,w.height=H.height),k&&p.expandParent){const Q=L[0]*(H.width??0);H.x&&H.x<Q&&(w.x=Q,_.x=_.x-(H.x-Q));const re=L[1]*(H.height??0);H.y&&H.y<re&&(w.y=re,_.y=_.y-(H.y-re))}const U=ih({width:w.width,prevWidth:M,height:w.height,prevHeight:z,affectsX:b.affectsX,affectsY:b.affectsY}),W={...w,direction:U};(x==null?void 0:x(D,W))!==!1&&(h==null||h(D,W),o(H,N))}).on("end",D=>{m==null||m(D,{...w}),r==null||r({...w})});s.call(j)}function a(){s.on(".drag",null)}return{update:i,destroy:a}}var Vn={exports:{}},On={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xr;function hh(){if(xr)return On;xr=1;var e=ec(),t=fc();function n(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var o=typeof Object.is=="function"?Object.is:n,r=t.useSyncExternalStore,s=e.useRef,i=e.useEffect,a=e.useMemo,c=e.useDebugValue;return On.useSyncExternalStoreWithSelector=function(l,u,f,d,h){var m=s(null);if(m.current===null){var x={hasValue:!1,value:null};m.current=x}else x=m.current;m=a(function(){function _(k){if(!b){if(b=!0,p=k,k=d(k),h!==void 0&&x.hasValue){var E=x.value;if(h(E,k))return v=E}return v=k}if(E=v,o(p,k))return E;var A=d(k);return h!==void 0&&h(E,A)?(p=k,E):(p=k,v=A)}var b=!1,p,v,S=f===void 0?null:f;return[function(){return _(u())},S===null?void 0:function(){return _(S())}]},[u,f,d,h]);var w=r(l,m[0],m[1]);return i(function(){x.hasValue=!0,x.value=w},[w]),c(w),w},On}var yr;function gh(){return yr||(yr=1,Vn.exports=hh()),Vn.exports}var ph=gh();const mh=tc(ph),xh={},wr=e=>{let t;const n=new Set,o=(u,f)=>{const d=typeof u=="function"?u(t):u;if(!Object.is(d,t)){const h=t;t=f??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(m=>m(t,h))}},r=()=>t,c={setState:o,getState:r,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(xh?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},l=t=e(o,r,c);return c},yh=e=>e?wr(e):wr,{useDebugValue:wh}=nc,{useSyncExternalStoreWithSelector:vh}=mh,_h=e=>e;function Js(e,t=_h,n){const o=vh(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return wh(o),o}const vr=(e,t)=>{const n=yh(e),o=(r,s=t)=>Js(n,r,s);return Object.assign(o,n),o},bh=(e,t)=>e?vr(e,t):vr;function te(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,r]of e)if(!Object.is(r,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}const Sn=I.createContext(null),Nh=Sn.Provider,ei=xe.error001();function Z(e,t){const n=I.useContext(Sn);if(n===null)throw new Error(ei);return Js(n,e,t)}function ee(){const e=I.useContext(Sn);if(e===null)throw new Error(ei);return I.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const _r={display:"none"},Eh={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ti="react-flow__node-desc",ni="react-flow__edge-desc",Sh="react-flow__aria-live",Ch=e=>e.ariaLiveMessage;function Mh({rfId:e}){const t=Z(Ch);return g.jsx("div",{id:`${Sh}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Eh,children:t})}function kh({rfId:e,disableKeyboardA11y:t}){return g.jsxs(g.Fragment,{children:[g.jsxs("div",{id:`${ti}-${e}`,style:_r,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),g.jsx("div",{id:`${ni}-${e}`,style:_r,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&g.jsx(Mh,{rfId:e})]})}const Ih=e=>e.userSelectionActive?"none":"all",Cn=I.forwardRef(({position:e="top-left",children:t,className:n,style:o,...r},s)=>{const i=Z(Ih),a=`${e}`.split("-");return g.jsx("div",{className:oe(["react-flow__panel",n,...a]),style:{...o,pointerEvents:i},ref:s,...r,children:t})});Cn.displayName="Panel";function $h({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:g.jsx(Cn,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:g.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Ah=e=>{const t=[],n=[];for(const[,o]of e.nodeLookup)o.selected&&t.push(o.internals.userNode);for(const[,o]of e.edgeLookup)o.selected&&n.push(o);return{selectedNodes:t,selectedEdges:n}},Xt=e=>e.id;function Th(e,t){return te(e.selectedNodes.map(Xt),t.selectedNodes.map(Xt))&&te(e.selectedEdges.map(Xt),t.selectedEdges.map(Xt))}function jh({onSelectionChange:e}){const t=ee(),{selectedNodes:n,selectedEdges:o}=Z(Ah,Th);return I.useEffect(()=>{const r={nodes:n,edges:o};e==null||e(r),t.getState().onSelectionChangeHandlers.forEach(s=>s(r))},[n,o,e]),null}const Ph=e=>!!e.onSelectionChangeHandlers;function Dh({onSelectionChange:e}){const t=Z(Ph);return e||t?g.jsx(jh,{onSelectionChange:e}):null}const oi=[0,0],zh={x:0,y:0,zoom:1},Hh=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],br=[...Hh,"rfId"],Rh=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),Nr={translateExtent:wt,nodeOrigin:oi,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Fh(e){const{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:r,setTranslateExtent:s,setNodeExtent:i,reset:a,setDefaultNodesAndEdges:c,setPaneClickDistance:l}=Z(Rh,te),u=ee();I.useEffect(()=>(c(e.defaultNodes,e.defaultEdges),()=>{f.current=Nr,a()}),[]);const f=I.useRef(Nr);return I.useEffect(()=>{for(const d of br){const h=e[d],m=f.current[d];h!==m&&(typeof e[d]>"u"||(d==="nodes"?t(h):d==="edges"?n(h):d==="minZoom"?o(h):d==="maxZoom"?r(h):d==="translateExtent"?s(h):d==="nodeExtent"?i(h):d==="paneClickDistance"?l(h):d==="fitView"?u.setState({fitViewQueued:h}):d==="fitViewOptions"?u.setState({fitViewOptions:h}):u.setState({[d]:h})))}f.current=e},br.map(d=>e[d])),null}function Er(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Lh(e){var o;const[t,n]=I.useState(e==="system"?null:e);return I.useEffect(()=>{if(e!=="system"){n(e);return}const r=Er(),s=()=>n(r!=null&&r.matches?"dark":"light");return s(),r==null||r.addEventListener("change",s),()=>{r==null||r.removeEventListener("change",s)}},[e]),t!==null?t:(o=Er())!=null&&o.matches?"dark":"light"}const Sr=typeof document<"u"?document:null;function Nt(e=null,t={target:Sr,actInsideInputWithModifier:!0}){const[n,o]=I.useState(!1),r=I.useRef(!1),s=I.useRef(new Set([])),[i,a]=I.useMemo(()=>{if(e!==null){const l=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.replace("+",`
`).replace(`

`,`
+`).split(`
`)),u=l.reduce((f,d)=>f.concat(...d),[]);return[l,u]}return[[],[]]},[e]);return I.useEffect(()=>{const c=(t==null?void 0:t.target)??Sr,l=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const u=h=>{var w,_;if(r.current=h.ctrlKey||h.metaKey||h.shiftKey||h.altKey,(!r.current||r.current&&!l)&&zs(h))return!1;const x=Mr(h.code,a);if(s.current.add(h[x]),Cr(i,s.current,!1)){const b=((_=(w=h.composedPath)==null?void 0:w.call(h))==null?void 0:_[0])||h.target,p=(b==null?void 0:b.nodeName)==="BUTTON"||(b==null?void 0:b.nodeName)==="A";t.preventDefault!==!1&&(r.current||!p)&&h.preventDefault(),o(!0)}},f=h=>{const m=Mr(h.code,a);Cr(i,s.current,!0)?(o(!1),s.current.clear()):s.current.delete(h[m]),h.key==="Meta"&&s.current.clear(),r.current=!1},d=()=>{s.current.clear(),o(!1)};return c==null||c.addEventListener("keydown",u),c==null||c.addEventListener("keyup",f),window.addEventListener("blur",d),window.addEventListener("contextmenu",d),()=>{c==null||c.removeEventListener("keydown",u),c==null||c.removeEventListener("keyup",f),window.removeEventListener("blur",d),window.removeEventListener("contextmenu",d)}}},[e,o]),n}function Cr(e,t,n){return e.filter(o=>n||o.length===t.size).some(o=>o.every(r=>t.has(r)))}function Mr(e,t){return t.includes(e)?"code":"key"}const Bh=()=>{const e=ee();return I.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[o,r,s],panZoom:i}=e.getState();return i?(await i.setViewport({x:t.x??o,y:t.y??r,zoom:t.zoom??s},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},setCenter:async(t,n,o)=>{const{width:r,height:s,maxZoom:i,panZoom:a}=e.getState(),c=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:i,l=r/2-t*c,u=s/2-n*c;return a?(await a.setViewport({x:l,y:u,zoom:c},{duration:o==null?void 0:o.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:o,height:r,minZoom:s,maxZoom:i,panZoom:a}=e.getState(),c=wo(t,o,r,s,i,(n==null?void 0:n.padding)??.1);return a?(await a.setViewport(c,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:o,snapGrid:r,snapToGrid:s,domNode:i}=e.getState();if(!i)return t;const{x:a,y:c}=i.getBoundingClientRect(),l={x:t.x-a,y:t.y-c},u=n.snapGrid??r,f=n.snapToGrid??s;return kt(l,o,f,u)},flowToScreenPosition:t=>{const{transform:n,domNode:o}=e.getState();if(!o)return t;const{x:r,y:s}=o.getBoundingClientRect(),i=fn(t,n);return{x:i.x+r,y:i.y+s}}}),[])};function ri(e,t){const n=[],o=new Map,r=[];for(const s of e)if(s.type==="add"){r.push(s);continue}else if(s.type==="remove"||s.type==="replace")o.set(s.id,[s]);else{const i=o.get(s.id);i?i.push(s):o.set(s.id,[s])}for(const s of t){const i=o.get(s.id);if(!i){n.push(s);continue}if(i[0].type==="remove")continue;if(i[0].type==="replace"){n.push({...i[0].item});continue}const a={...s};for(const c of i)Vh(c,a);n.push(a)}return r.length&&r.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function Vh(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function si(e,t){return ri(e,t)}function ii(e,t){return ri(e,t)}function $e(e,t){return{id:e,type:"select",selected:t}}function Xe(e,t=new Set,n=!1){const o=[];for(const[r,s]of e){const i=t.has(r);!(s.selected===void 0&&!i)&&s.selected!==i&&(n&&(s.selected=i),o.push($e(s.id,i)))}return o}function kr({items:e=[],lookup:t}){var r;const n=[],o=new Map(e.map(s=>[s.id,s]));for(const[s,i]of e.entries()){const a=t.get(i.id),c=((r=a==null?void 0:a.internals)==null?void 0:r.userNode)??a;c!==void 0&&c!==i&&n.push({id:i.id,item:i,type:"replace"}),c===void 0&&n.push({item:i,type:"add",index:s})}for(const[s]of t)o.get(s)===void 0&&n.push({id:s,type:"remove"});return n}function Ir(e){return{id:e.id,type:"remove"}}const $r=e=>xf(e),Oh=e=>Ms(e);function ai(e){return I.forwardRef(e)}const Yh=typeof window<"u"?I.useLayoutEffect:I.useEffect;function Ar(e){const[t,n]=I.useState(BigInt(0)),[o]=I.useState(()=>Xh(()=>n(r=>r+BigInt(1))));return Yh(()=>{const r=o.get();r.length&&(e(r),o.reset())},[t]),o}function Xh(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const ci=I.createContext(null);function Wh({children:e}){const t=ee(),n=I.useCallback(a=>{const{nodes:c=[],setNodes:l,hasDefaultNodes:u,onNodesChange:f,nodeLookup:d,fitViewQueued:h}=t.getState();let m=c;for(const w of a)m=typeof w=="function"?w(m):w;const x=kr({items:m,lookup:d});u&&l(m),x.length>0?f==null||f(x):h&&window.requestAnimationFrame(()=>{const{fitViewQueued:w,nodes:_,setNodes:b}=t.getState();w&&b(_)})},[]),o=Ar(n),r=I.useCallback(a=>{const{edges:c=[],setEdges:l,hasDefaultEdges:u,onEdgesChange:f,edgeLookup:d}=t.getState();let h=c;for(const m of a)h=typeof m=="function"?m(h):m;u?l(h):f&&f(kr({items:h,lookup:d}))},[]),s=Ar(r),i=I.useMemo(()=>({nodeQueue:o,edgeQueue:s}),[]);return g.jsx(ci.Provider,{value:i,children:e})}function qh(){const e=I.useContext(ci);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const Gh=e=>!!e.panZoom;function He(){const e=Bh(),t=ee(),n=qh(),o=Z(Gh),r=I.useMemo(()=>{const s=f=>t.getState().nodeLookup.get(f),i=f=>{n.nodeQueue.push(f)},a=f=>{n.edgeQueue.push(f)},c=f=>{var _,b;const{nodeLookup:d,nodeOrigin:h}=t.getState(),m=$r(f)?f:d.get(f.id),x=m.parentId?Ps(m.position,m.measured,m.parentId,d,h):m.position,w={...m,position:x,width:((_=m.measured)==null?void 0:_.width)??m.width,height:((b=m.measured)==null?void 0:b.height)??m.height};return Qe(w)},l=(f,d,h={replace:!1})=>{i(m=>m.map(x=>{if(x.id===f){const w=typeof d=="function"?d(x):d;return h.replace&&$r(w)?w:{...x,...w}}return x}))},u=(f,d,h={replace:!1})=>{a(m=>m.map(x=>{if(x.id===f){const w=typeof d=="function"?d(x):d;return h.replace&&Oh(w)?w:{...x,...w}}return x}))};return{getNodes:()=>t.getState().nodes.map(f=>({...f})),getNode:f=>{var d;return(d=s(f))==null?void 0:d.internals.userNode},getInternalNode:s,getEdges:()=>{const{edges:f=[]}=t.getState();return f.map(d=>({...d}))},getEdge:f=>t.getState().edgeLookup.get(f),setNodes:i,setEdges:a,addNodes:f=>{const d=Array.isArray(f)?f:[f];n.nodeQueue.push(h=>[...h,...d])},addEdges:f=>{const d=Array.isArray(f)?f:[f];n.edgeQueue.push(h=>[...h,...d])},toObject:()=>{const{nodes:f=[],edges:d=[],transform:h}=t.getState(),[m,x,w]=h;return{nodes:f.map(_=>({..._})),edges:d.map(_=>({..._})),viewport:{x:m,y:x,zoom:w}}},deleteElements:async({nodes:f=[],edges:d=[]})=>{const{nodes:h,edges:m,onNodesDelete:x,onEdgesDelete:w,triggerNodeChanges:_,triggerEdgeChanges:b,onDelete:p,onBeforeDelete:v}=t.getState(),{nodes:S,edges:k}=await bf({nodesToRemove:f,edgesToRemove:d,nodes:h,edges:m,onBeforeDelete:v}),E=k.length>0,A=S.length>0;if(E){const j=k.map(Ir);w==null||w(k),b(j)}if(A){const j=S.map(Ir);x==null||x(S),_(j)}return(A||E)&&(p==null||p({nodes:S,edges:k})),{deletedNodes:S,deletedEdges:k}},getIntersectingNodes:(f,d=!0,h)=>{const m=sr(f),x=m?f:c(f),w=h!==void 0;return x?(h||t.getState().nodes).filter(_=>{const b=t.getState().nodeLookup.get(_.id);if(b&&!m&&(_.id===f.id||!b.internals.positionAbsolute))return!1;const p=Qe(w?_:b),v=_t(p,x);return d&&v>0||v>=x.width*x.height}):[]},isNodeIntersecting:(f,d,h=!0)=>{const x=sr(f)?f:c(f);if(!x)return!1;const w=_t(x,d);return h&&w>0||w>=x.width*x.height},updateNode:l,updateNodeData:(f,d,h={replace:!1})=>{l(f,m=>{const x=typeof d=="function"?d(m):d;return h.replace?{...m,data:x}:{...m,data:{...m.data,...x}}},h)},updateEdge:u,updateEdgeData:(f,d,h={replace:!1})=>{u(f,m=>{const x=typeof d=="function"?d(m):d;return h.replace?{...m,data:x}:{...m,data:{...m.data,...x}}},h)},getNodesBounds:f=>{const{nodeLookup:d,nodeOrigin:h}=t.getState();return yf(f,{nodeLookup:d,nodeOrigin:h})},getHandleConnections:({type:f,id:d,nodeId:h})=>{var m;return Array.from(((m=t.getState().connectionLookup.get(`${h}-${f}${d?`-${d}`:""}`))==null?void 0:m.values())??[])},getNodeConnections:({type:f,handleId:d,nodeId:h})=>{var m;return Array.from(((m=t.getState().connectionLookup.get(`${h}${f?d?`-${f}-${d}`:`-${f}`:""}`))==null?void 0:m.values())??[])},fitView:async f=>{const d=t.getState().fitViewResolver??Cf();return t.setState({fitViewQueued:!0,fitViewOptions:f,fitViewResolver:d}),n.nodeQueue.push(h=>[...h]),d.promise}}},[]);return I.useMemo(()=>({...r,...e,viewportInitialized:o}),[o])}const Tr=e=>e.selected,Uh=typeof window<"u"?window:void 0;function Kh({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=ee(),{deleteElements:o}=He(),r=Nt(e,{actInsideInputWithModifier:!1}),s=Nt(t,{target:Uh});I.useEffect(()=>{if(r){const{edges:i,nodes:a}=n.getState();o({nodes:a.filter(Tr),edges:i.filter(Tr)}),n.setState({nodesSelectionActive:!1})}},[r]),I.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function Zh(e){const t=ee();I.useEffect(()=>{const n=()=>{var r,s;if(!e.current)return!1;const o=vo(e.current);(o.height===0||o.width===0)&&((s=(r=t.getState()).onError)==null||s.call(r,"004",xe.error004())),t.setState({width:o.width||500,height:o.height||500})};if(e.current){n(),window.addEventListener("resize",n);const o=new ResizeObserver(()=>n());return o.observe(e.current),()=>{window.removeEventListener("resize",n),o&&e.current&&o.unobserve(e.current)}}},[])}const Mn={position:"absolute",width:"100%",height:"100%",top:0,left:0},Qh=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function Jh({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:o=!1,panOnScrollSpeed:r=.5,panOnScrollMode:s=Pe.Free,zoomOnDoubleClick:i=!0,panOnDrag:a=!0,defaultViewport:c,translateExtent:l,minZoom:u,maxZoom:f,zoomActivationKeyCode:d,preventScrolling:h=!0,children:m,noWheelClassName:x,noPanClassName:w,onViewportChange:_,isControlledViewport:b,paneClickDistance:p}){const v=ee(),S=I.useRef(null),{userSelectionActive:k,lib:E}=Z(Qh,te),A=Nt(d),j=I.useRef();Zh(S);const D=I.useCallback(P=>{_==null||_({x:P[0],y:P[1],zoom:P[2]}),b||v.setState({transform:P})},[_,b]);return I.useEffect(()=>{if(S.current){j.current=sh({domNode:S.current,minZoom:u,maxZoom:f,translateExtent:l,viewport:c,paneClickDistance:p,onDraggingChange:y=>v.setState({paneDragging:y}),onPanZoomStart:(y,$)=>{const{onViewportChangeStart:N,onMoveStart:C}=v.getState();C==null||C(y,$),N==null||N($)},onPanZoom:(y,$)=>{const{onViewportChange:N,onMove:C}=v.getState();C==null||C(y,$),N==null||N($)},onPanZoomEnd:(y,$)=>{const{onViewportChangeEnd:N,onMoveEnd:C}=v.getState();C==null||C(y,$),N==null||N($)}});const{x:P,y:R,zoom:F}=j.current.getViewport();return v.setState({panZoom:j.current,transform:[P,R,F],domNode:S.current.closest(".react-flow")}),()=>{var y;(y=j.current)==null||y.destroy()}}},[]),I.useEffect(()=>{var P;(P=j.current)==null||P.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:o,panOnScrollSpeed:r,panOnScrollMode:s,zoomOnDoubleClick:i,panOnDrag:a,zoomActivationKeyPressed:A,preventScrolling:h,noPanClassName:w,userSelectionActive:k,noWheelClassName:x,lib:E,onTransformChange:D})},[e,t,n,o,r,s,i,a,A,h,w,k,x,E,D]),g.jsx("div",{className:"react-flow__renderer",ref:S,style:Mn,children:m})}const eg=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function tg(){const{userSelectionActive:e,userSelectionRect:t}=Z(eg,te);return e&&t?g.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Yn=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},ng=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function og({isSelecting:e,selectionKeyPressed:t,selectionMode:n=vt.Full,panOnDrag:o,selectionOnDrag:r,onSelectionStart:s,onSelectionEnd:i,onPaneClick:a,onPaneContextMenu:c,onPaneScroll:l,onPaneMouseEnter:u,onPaneMouseMove:f,onPaneMouseLeave:d,children:h}){const m=ee(),{userSelectionActive:x,elementsSelectable:w,dragging:_,connectionInProgress:b}=Z(ng,te),p=w&&(e||x),v=I.useRef(null),S=I.useRef(),k=I.useRef(new Set),E=I.useRef(new Set),A=I.useRef(!1),j=I.useRef(!1),D=C=>{if(A.current||b){A.current=!1;return}a==null||a(C),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},P=C=>{if(Array.isArray(o)&&(o!=null&&o.includes(2))){C.preventDefault();return}c==null||c(C)},R=l?C=>l(C):void 0,F=C=>{var L,O;const{resetSelectedElements:T,domNode:M}=m.getState();if(S.current=M==null?void 0:M.getBoundingClientRect(),!w||!e||C.button!==0||C.target!==v.current||!S.current)return;(O=(L=C.target)==null?void 0:L.setPointerCapture)==null||O.call(L,C.pointerId),j.current=!0,A.current=!1;const{x:z,y:H}=be(C.nativeEvent,S.current);T(),m.setState({userSelectionRect:{width:0,height:0,startX:z,startY:H,x:z,y:H}}),s==null||s(C)},y=C=>{const{userSelectionRect:T,transform:M,nodeLookup:z,edgeLookup:H,connectionLookup:L,triggerNodeChanges:O,triggerEdgeChanges:V,defaultEdgeOptions:Y}=m.getState();if(!S.current||!T)return;A.current=!0;const{x:q,y:B}=be(C.nativeEvent,S.current),{startX:G,startY:K}=T,J={startX:G,startY:K,x:q<G?q:G,y:B<K?B:K,width:Math.abs(q-G),height:Math.abs(B-K)},U=k.current,W=E.current;k.current=new Set(ks(z,J,M,n===vt.Partial,!0).map(Q=>Q.id)),E.current=new Set;const ne=(Y==null?void 0:Y.selectable)??!0;for(const Q of k.current){const re=L.get(Q);if(re)for(const{edgeId:ie}of re.values()){const Le=H.get(ie);Le&&(Le.selectable??ne)&&E.current.add(ie)}}if(!ir(U,k.current)){const Q=Xe(z,k.current,!0);O(Q)}if(!ir(W,E.current)){const Q=Xe(H,E.current);V(Q)}m.setState({userSelectionRect:J,userSelectionActive:!0,nodesSelectionActive:!1})},$=C=>{var M,z;if(C.button!==0||!j.current)return;(z=(M=C.target)==null?void 0:M.releasePointerCapture)==null||z.call(M,C.pointerId);const{userSelectionRect:T}=m.getState();!x&&T&&C.target===v.current&&(D==null||D(C)),m.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:k.current.size>0}),i==null||i(C),(t||r)&&(A.current=!1),j.current=!1},N=o===!0||Array.isArray(o)&&o.includes(0);return g.jsxs("div",{className:oe(["react-flow__pane",{draggable:N,dragging:_,selection:e}]),onClick:p?void 0:Yn(D,v),onContextMenu:Yn(P,v),onWheel:Yn(R,v),onPointerEnter:p?void 0:u,onPointerDown:p?F:f,onPointerMove:p?y:f,onPointerUp:p?$:void 0,onPointerLeave:d,ref:v,style:Mn,children:[h,g.jsx(tg,{})]})}function ao({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:s,multiSelectionActive:i,nodeLookup:a,onError:c}=t.getState(),l=a.get(e);if(!l){c==null||c("012",xe.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&i)&&(s({nodes:[l],edges:[]}),requestAnimationFrame(()=>{var u;return(u=o==null?void 0:o.current)==null?void 0:u.blur()})):r([e])}function li({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:s,nodeClickDistance:i}){const a=ee(),[c,l]=I.useState(!1),u=I.useRef();return I.useEffect(()=>{u.current=Xf({getStoreItems:()=>a.getState(),onNodeMouseDown:f=>{ao({id:f,store:a,nodeRef:e})},onDragStart:()=>{l(!0)},onDragStop:()=>{l(!1)}})},[]),I.useEffect(()=>{var f,d;if(t)(f=u.current)==null||f.destroy();else if(e.current)return(d=u.current)==null||d.update({noDragClassName:n,handleSelector:o,domNode:e.current,isSelectable:s,nodeId:r,nodeClickDistance:i}),()=>{var h;(h=u.current)==null||h.destroy()}},[n,o,t,s,e,r]),c}const rg=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function ui(){const e=ee();return I.useCallback(n=>{const{nodeExtent:o,snapToGrid:r,snapGrid:s,nodesDraggable:i,onError:a,updateNodePositions:c,nodeLookup:l,nodeOrigin:u}=e.getState(),f=new Map,d=rg(i),h=r?s[0]:5,m=r?s[1]:5,x=n.direction.x*h*n.factor,w=n.direction.y*m*n.factor;for(const[,_]of l){if(!d(_))continue;let b={x:_.internals.positionAbsolute.x+x,y:_.internals.positionAbsolute.y+w};r&&(b=Nn(b,s));const{position:p,positionAbsolute:v}=Is({nodeId:_.id,nextPosition:b,nodeLookup:l,nodeExtent:o,nodeOrigin:u,onError:a});_.position=p,_.internals.positionAbsolute=v,f.set(_.id,_)}c(f)},[])}const So=I.createContext(null),sg=So.Provider;So.Consumer;const It=()=>I.useContext(So),ig=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),ag=(e,t,n)=>o=>{const{connectionClickStartHandle:r,connectionMode:s,connection:i}=o,{fromHandle:a,toHandle:c,isValid:l}=i,u=(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n;return{connectingFrom:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,connectingTo:u,clickConnecting:(r==null?void 0:r.nodeId)===e&&(r==null?void 0:r.id)===t&&(r==null?void 0:r.type)===n,isPossibleEndHandle:s===Ke.Strict?(a==null?void 0:a.type)!==n:e!==(a==null?void 0:a.nodeId)||t!==(a==null?void 0:a.id),connectionInProcess:!!a,clickConnectionInProcess:!!r,valid:u&&l}};function cg({type:e="source",position:t=X.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:r=!0,isConnectableEnd:s=!0,id:i,onConnect:a,children:c,className:l,onMouseDown:u,onTouchStart:f,...d},h){var $,N;const m=i||null,x=e==="target",w=ee(),_=It(),{connectOnClick:b,noPanClassName:p,rfId:v}=Z(ig,te),{connectingFrom:S,connectingTo:k,clickConnecting:E,isPossibleEndHandle:A,connectionInProcess:j,clickConnectionInProcess:D,valid:P}=Z(ag(_,m,e),te);_||(N=($=w.getState()).onError)==null||N.call($,"010",xe.error010());const R=C=>{const{defaultEdgeOptions:T,onConnect:M,hasDefaultEdges:z}=w.getState(),H={...T,...C};if(z){const{edges:L,setEdges:O}=w.getState();O(Bs(H,L))}M==null||M(H),a==null||a(H)},F=C=>{if(!_)return;const T=Hs(C.nativeEvent);if(r&&(T&&C.button===0||!T)){const M=w.getState();io.onPointerDown(C.nativeEvent,{autoPanOnConnect:M.autoPanOnConnect,connectionMode:M.connectionMode,connectionRadius:M.connectionRadius,domNode:M.domNode,nodeLookup:M.nodeLookup,lib:M.lib,isTarget:x,handleId:m,nodeId:_,flowId:M.rfId,panBy:M.panBy,cancelConnection:M.cancelConnection,onConnectStart:M.onConnectStart,onConnectEnd:M.onConnectEnd,updateConnection:M.updateConnection,onConnect:R,isValidConnection:n||M.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:M.autoPanSpeed})}T?u==null||u(C):f==null||f(C)},y=C=>{const{onClickConnectStart:T,onClickConnectEnd:M,connectionClickStartHandle:z,connectionMode:H,isValidConnection:L,lib:O,rfId:V,nodeLookup:Y,connection:q}=w.getState();if(!_||!z&&!r)return;if(!z){T==null||T(C.nativeEvent,{nodeId:_,handleId:m,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:_,type:e,id:m}});return}const B=Ds(C.target),G=n||L,{connection:K,isValid:J}=io.isValid(C.nativeEvent,{handle:{nodeId:_,id:m,type:e},connectionMode:H,fromNodeId:z.nodeId,fromHandleId:z.id||null,fromType:z.type,isValidConnection:G,flowId:V,doc:B,lib:O,nodeLookup:Y});J&&K&&R(K);const U=structuredClone(q);delete U.inProgress,U.toPosition=U.toHandle?U.toHandle.position:null,M==null||M(C,U),w.setState({connectionClickStartHandle:null})};return g.jsx("div",{"data-handleid":m,"data-nodeid":_,"data-handlepos":t,"data-id":`${v}-${_}-${m}-${e}`,className:oe(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",p,l,{source:!x,target:x,connectable:o,connectablestart:r,connectableend:s,clickconnecting:E,connectingfrom:S,connectingto:k,valid:P,connectionindicator:o&&(!j||A)&&(j||D?s:r)}]),onMouseDown:F,onTouchStart:F,onClick:b?y:void 0,ref:h,...d,children:c})}const et=I.memo(ai(cg));function lg({data:e,isConnectable:t,sourcePosition:n=X.Bottom}){return g.jsxs(g.Fragment,{children:[e==null?void 0:e.label,g.jsx(et,{type:"source",position:n,isConnectable:t})]})}function ug({data:e,isConnectable:t,targetPosition:n=X.Top,sourcePosition:o=X.Bottom}){return g.jsxs(g.Fragment,{children:[g.jsx(et,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,g.jsx(et,{type:"source",position:o,isConnectable:t})]})}function dg(){return null}function fg({data:e,isConnectable:t,targetPosition:n=X.Top}){return g.jsxs(g.Fragment,{children:[g.jsx(et,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const pn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},jr={input:lg,default:ug,output:fg,group:dg};function hg(e){var t,n,o,r;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((o=e.style)==null?void 0:o.width),height:e.height??((r=e.style)==null?void 0:r.height)}}const gg=e=>{const{width:t,height:n,x:o,y:r}=Mt(e.nodeLookup,{filter:s=>!!s.selected});return{width:he(t)?t:null,height:he(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${r}px)`}};function pg({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const o=ee(),{width:r,height:s,transformString:i,userSelectionActive:a}=Z(gg,te),c=ui(),l=I.useRef(null);if(I.useEffect(()=>{var d;n||(d=l.current)==null||d.focus({preventScroll:!0})},[n]),li({nodeRef:l}),a||!r||!s)return null;const u=e?d=>{const h=o.getState().nodes.filter(m=>m.selected);e(d,h)}:void 0,f=d=>{Object.prototype.hasOwnProperty.call(pn,d.key)&&(d.preventDefault(),c({direction:pn[d.key],factor:d.shiftKey?4:1}))};return g.jsx("div",{className:oe(["react-flow__nodesselection","react-flow__container",t]),style:{transform:i},children:g.jsx("div",{ref:l,className:"react-flow__nodesselection-rect",onContextMenu:u,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:r,height:s}})})}const Pr=typeof window<"u"?window:void 0,mg=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function di({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:i,paneClickDistance:a,deleteKeyCode:c,selectionKeyCode:l,selectionOnDrag:u,selectionMode:f,onSelectionStart:d,onSelectionEnd:h,multiSelectionKeyCode:m,panActivationKeyCode:x,zoomActivationKeyCode:w,elementsSelectable:_,zoomOnScroll:b,zoomOnPinch:p,panOnScroll:v,panOnScrollSpeed:S,panOnScrollMode:k,zoomOnDoubleClick:E,panOnDrag:A,defaultViewport:j,translateExtent:D,minZoom:P,maxZoom:R,preventScrolling:F,onSelectionContextMenu:y,noWheelClassName:$,noPanClassName:N,disableKeyboardA11y:C,onViewportChange:T,isControlledViewport:M}){const{nodesSelectionActive:z,userSelectionActive:H}=Z(mg),L=Nt(l,{target:Pr}),O=Nt(x,{target:Pr}),V=O||A,Y=O||v,q=u&&V!==!0,B=L||H||q;return Kh({deleteKeyCode:c,multiSelectionKeyCode:m}),g.jsx(Jh,{onPaneContextMenu:s,elementsSelectable:_,zoomOnScroll:b,zoomOnPinch:p,panOnScroll:Y,panOnScrollSpeed:S,panOnScrollMode:k,zoomOnDoubleClick:E,panOnDrag:!L&&V,defaultViewport:j,translateExtent:D,minZoom:P,maxZoom:R,zoomActivationKeyCode:w,preventScrolling:F,noWheelClassName:$,noPanClassName:N,onViewportChange:T,isControlledViewport:M,paneClickDistance:a,children:g.jsxs(og,{onSelectionStart:d,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:V,isSelecting:!!B,selectionMode:f,selectionKeyPressed:L,selectionOnDrag:q,children:[e,z&&g.jsx(pg,{onSelectionContextMenu:y,noPanClassName:N,disableKeyboardA11y:C})]})})}di.displayName="FlowRenderer";const xg=I.memo(di),yg=e=>t=>e?ks(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function wg(e){return Z(I.useCallback(yg(e),[e]),te)}const vg=e=>e.updateNodeInternals;function _g(){const e=Z(vg),[t]=I.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const o=new Map;n.forEach(r=>{const s=r.target.getAttribute("data-id");o.set(s,{id:s,nodeElement:r.target,force:!0})}),e(o)}));return I.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function bg({node:e,nodeType:t,hasDimensions:n,resizeObserver:o}){const r=ee(),s=I.useRef(null),i=I.useRef(null),a=I.useRef(e.sourcePosition),c=I.useRef(e.targetPosition),l=I.useRef(t),u=n&&!!e.internals.handleBounds;return I.useEffect(()=>{s.current&&!e.hidden&&(!u||i.current!==s.current)&&(i.current&&(o==null||o.unobserve(i.current)),o==null||o.observe(s.current),i.current=s.current)},[u,e.hidden]),I.useEffect(()=>()=>{i.current&&(o==null||o.unobserve(i.current),i.current=null)},[]),I.useEffect(()=>{if(s.current){const f=l.current!==t,d=a.current!==e.sourcePosition,h=c.current!==e.targetPosition;(f||d||h)&&(l.current=t,a.current=e.sourcePosition,c.current=e.targetPosition,r.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function Ng({id:e,onClick:t,onMouseEnter:n,onMouseMove:o,onMouseLeave:r,onContextMenu:s,onDoubleClick:i,nodesDraggable:a,elementsSelectable:c,nodesConnectable:l,nodesFocusable:u,resizeObserver:f,noDragClassName:d,noPanClassName:h,disableKeyboardA11y:m,rfId:x,nodeTypes:w,nodeClickDistance:_,onError:b}){const{node:p,internals:v,isParent:S}=Z(B=>{const G=B.nodeLookup.get(e),K=B.parentLookup.has(e);return{node:G,internals:G.internals,isParent:K}},te);let k=p.type||"default",E=(w==null?void 0:w[k])||jr[k];E===void 0&&(b==null||b("003",xe.error003(k)),k="default",E=jr.default);const A=!!(p.draggable||a&&typeof p.draggable>"u"),j=!!(p.selectable||c&&typeof p.selectable>"u"),D=!!(p.connectable||l&&typeof p.connectable>"u"),P=!!(p.focusable||u&&typeof p.focusable>"u"),R=ee(),F=js(p),y=bg({node:p,nodeType:k,hasDimensions:F,resizeObserver:f}),$=li({nodeRef:y,disabled:p.hidden||!A,noDragClassName:d,handleSelector:p.dragHandle,nodeId:e,isSelectable:j,nodeClickDistance:_}),N=ui();if(p.hidden)return null;const C=Ee(p),T=hg(p),M=j||A||t||n||o||r,z=n?B=>n(B,{...v.userNode}):void 0,H=o?B=>o(B,{...v.userNode}):void 0,L=r?B=>r(B,{...v.userNode}):void 0,O=s?B=>s(B,{...v.userNode}):void 0,V=i?B=>i(B,{...v.userNode}):void 0,Y=B=>{const{selectNodesOnDrag:G,nodeDragThreshold:K}=R.getState();j&&(!G||!A||K>0)&&ao({id:e,store:R,nodeRef:y}),t&&t(B,{...v.userNode})},q=B=>{if(!(zs(B.nativeEvent)||m))if(Es.includes(B.key)&&j){const G=B.key==="Escape";ao({id:e,store:R,unselect:G,nodeRef:y})}else A&&p.selected&&Object.prototype.hasOwnProperty.call(pn,B.key)&&(B.preventDefault(),R.setState({ariaLiveMessage:`Moved selected node ${B.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~v.positionAbsolute.x}, y: ${~~v.positionAbsolute.y}`}),N({direction:pn[B.key],factor:B.shiftKey?4:1}))};return g.jsx("div",{className:oe(["react-flow__node",`react-flow__node-${k}`,{[h]:A},p.className,{selected:p.selected,selectable:j,parent:S,draggable:A,dragging:$}]),ref:y,style:{zIndex:v.z,transform:`translate(${v.positionAbsolute.x}px,${v.positionAbsolute.y}px)`,pointerEvents:M?"all":"none",visibility:F?"visible":"hidden",...p.style,...T},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:z,onMouseMove:H,onMouseLeave:L,onContextMenu:O,onClick:Y,onDoubleClick:V,onKeyDown:P?q:void 0,tabIndex:P?0:void 0,role:P?"button":void 0,"aria-describedby":m?void 0:`${ti}-${x}`,"aria-label":p.ariaLabel,children:g.jsx(sg,{value:e,children:g.jsx(E,{id:e,data:p.data,type:k,positionAbsoluteX:v.positionAbsolute.x,positionAbsoluteY:v.positionAbsolute.y,selected:p.selected??!1,selectable:j,draggable:A,deletable:p.deletable??!0,isConnectable:D,sourcePosition:p.sourcePosition,targetPosition:p.targetPosition,dragging:$,dragHandle:p.dragHandle,zIndex:v.z,parentId:p.parentId,...C})})})}const Eg=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function fi(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,onError:s}=Z(Eg,te),i=wg(e.onlyRenderVisibleElements),a=_g();return g.jsx("div",{className:"react-flow__nodes",style:Mn,children:i.map(c=>g.jsx(Ng,{id:c,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,nodeClickDistance:e.nodeClickDistance,onError:s},c))})}fi.displayName="NodeRenderer";const Sg=I.memo(fi);function Cg(e){return Z(I.useCallback(n=>{if(!e)return n.edges.map(r=>r.id);const o=[];if(n.width&&n.height)for(const r of n.edges){const s=n.nodeLookup.get(r.source),i=n.nodeLookup.get(r.target);s&&i&&If({sourceNode:s,targetNode:i,width:n.width,height:n.height,transform:n.transform})&&o.push(r.id)}return o},[e]),te)}const Mg=({color:e="none",strokeWidth:t=1})=>g.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),kg=({color:e="none",strokeWidth:t=1})=>g.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Dr={[un.Arrow]:Mg,[un.ArrowClosed]:kg};function Ig(e){const t=ee();return I.useMemo(()=>{var r,s;return Object.prototype.hasOwnProperty.call(Dr,e)?Dr[e]:((s=(r=t.getState()).onError)==null||s.call(r,"009",xe.error009(e)),null)},[e])}const $g=({id:e,type:t,color:n,width:o=12.5,height:r=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:a="auto-start-reverse"})=>{const c=Ig(t);return c?g.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0",children:g.jsx(c,{color:n,strokeWidth:i})}):null},hi=({defaultColor:e,rfId:t})=>{const n=Z(s=>s.edges),o=Z(s=>s.defaultEdgeOptions),r=I.useMemo(()=>zf(n,{id:t,defaultColor:e,defaultMarkerStart:o==null?void 0:o.markerStart,defaultMarkerEnd:o==null?void 0:o.markerEnd}),[n,o,t,e]);return r.length?g.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:g.jsx("defs",{children:r.map(s=>g.jsx($g,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};hi.displayName="MarkerDefinitions";var Ag=I.memo(hi);function gi({x:e,y:t,label:n,labelStyle:o,labelShowBg:r=!0,labelBgStyle:s,labelBgPadding:i=[2,4],labelBgBorderRadius:a=2,children:c,className:l,...u}){const[f,d]=I.useState({x:1,y:0,width:0,height:0}),h=oe(["react-flow__edge-textwrapper",l]),m=I.useRef(null);return I.useEffect(()=>{if(m.current){const x=m.current.getBBox();d({x:x.x,y:x.y,width:x.width,height:x.height})}},[n]),n?g.jsxs("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:h,visibility:f.width?"visible":"hidden",...u,children:[r&&g.jsx("rect",{width:f.width+2*i[0],x:-i[0],y:-i[1],height:f.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),g.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:m,style:o,children:n}),c]}):null}gi.displayName="EdgeText";const Tg=I.memo(gi);function kn({path:e,labelX:t,labelY:n,label:o,labelStyle:r,labelShowBg:s,labelBgStyle:i,labelBgPadding:a,labelBgBorderRadius:c,interactionWidth:l=20,...u}){return g.jsxs(g.Fragment,{children:[g.jsx("path",{...u,d:e,fill:"none",className:oe(["react-flow__edge-path",u.className])}),l&&g.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:l,className:"react-flow__edge-interaction"}),o&&he(t)&&he(n)?g.jsx(Tg,{x:t,y:n,label:o,labelStyle:r,labelShowBg:s,labelBgStyle:i,labelBgPadding:a,labelBgBorderRadius:c}):null]})}function zr({pos:e,x1:t,y1:n,x2:o,y2:r}){return e===X.Left||e===X.Right?[.5*(t+o),n]:[t,.5*(n+r)]}function pi({sourceX:e,sourceY:t,sourcePosition:n=X.Bottom,targetX:o,targetY:r,targetPosition:s=X.Top}){const[i,a]=zr({pos:n,x1:e,y1:t,x2:o,y2:r}),[c,l]=zr({pos:s,x1:o,y1:r,x2:e,y2:t}),[u,f,d,h]=Rs({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:i,sourceControlY:a,targetControlX:c,targetControlY:l});return[`M${e},${t} C${i},${a} ${c},${l} ${o},${r}`,u,f,d,h]}function mi(e){return I.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:s,sourcePosition:i,targetPosition:a,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:x,markerStart:w,interactionWidth:_})=>{const[b,p,v]=pi({sourceX:n,sourceY:o,sourcePosition:i,targetX:r,targetY:s,targetPosition:a}),S=e.isInternal?void 0:t;return g.jsx(kn,{id:S,path:b,labelX:p,labelY:v,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:x,markerStart:w,interactionWidth:_})})}const jg=mi({isInternal:!1}),xi=mi({isInternal:!0});jg.displayName="SimpleBezierEdge";xi.displayName="SimpleBezierEdgeInternal";function yi(e){return I.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:s,label:i,labelStyle:a,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:d,sourcePosition:h=X.Bottom,targetPosition:m=X.Top,markerEnd:x,markerStart:w,pathOptions:_,interactionWidth:b})=>{const[p,v,S]=gn({sourceX:n,sourceY:o,sourcePosition:h,targetX:r,targetY:s,targetPosition:m,borderRadius:_==null?void 0:_.borderRadius,offset:_==null?void 0:_.offset}),k=e.isInternal?void 0:t;return g.jsx(kn,{id:k,path:p,labelX:v,labelY:S,label:i,labelStyle:a,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:x,markerStart:w,interactionWidth:b})})}const Co=yi({isInternal:!1}),wi=yi({isInternal:!0});Co.displayName="SmoothStepEdge";wi.displayName="SmoothStepEdgeInternal";function vi(e){return I.memo(({id:t,...n})=>{var r;const o=e.isInternal?void 0:t;return g.jsx(Co,{...n,id:o,pathOptions:I.useMemo(()=>{var s;return{borderRadius:0,offset:(s=n.pathOptions)==null?void 0:s.offset}},[(r=n.pathOptions)==null?void 0:r.offset])})})}const Pg=vi({isInternal:!1}),_i=vi({isInternal:!0});Pg.displayName="StepEdge";_i.displayName="StepEdgeInternal";function bi(e){return I.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:s,label:i,labelStyle:a,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:h,markerStart:m,interactionWidth:x})=>{const[w,_,b]=Vs({sourceX:n,sourceY:o,targetX:r,targetY:s}),p=e.isInternal?void 0:t;return g.jsx(kn,{id:p,path:w,labelX:_,labelY:b,label:i,labelStyle:a,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:h,markerStart:m,interactionWidth:x})})}const Dg=bi({isInternal:!1}),Ni=bi({isInternal:!0});Dg.displayName="StraightEdge";Ni.displayName="StraightEdgeInternal";function Ei(e){return I.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:s,sourcePosition:i=X.Bottom,targetPosition:a=X.Top,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:x,markerStart:w,pathOptions:_,interactionWidth:b})=>{const[p,v,S]=Fs({sourceX:n,sourceY:o,sourcePosition:i,targetX:r,targetY:s,targetPosition:a,curvature:_==null?void 0:_.curvature}),k=e.isInternal?void 0:t;return g.jsx(kn,{id:k,path:p,labelX:v,labelY:S,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:x,markerStart:w,interactionWidth:b})})}const zg=Ei({isInternal:!1}),Si=Ei({isInternal:!0});zg.displayName="BezierEdge";Si.displayName="BezierEdgeInternal";const Hr={default:Si,straight:Ni,step:_i,smoothstep:wi,simplebezier:xi},Rr={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Hg=(e,t,n)=>n===X.Left?e-t:n===X.Right?e+t:e,Rg=(e,t,n)=>n===X.Top?e-t:n===X.Bottom?e+t:e,Fr="react-flow__edgeupdater";function Lr({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:r,onMouseEnter:s,onMouseOut:i,type:a}){return g.jsx("circle",{onMouseDown:r,onMouseEnter:s,onMouseOut:i,className:oe([Fr,`${Fr}-${a}`]),cx:Hg(t,o,e),cy:Rg(n,o,e),r:o,stroke:"transparent",fill:"transparent"})}function Fg({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:o,sourceY:r,targetX:s,targetY:i,sourcePosition:a,targetPosition:c,onReconnect:l,onReconnectStart:u,onReconnectEnd:f,setReconnecting:d,setUpdateHover:h}){const m=ee(),x=(v,S)=>{if(v.button!==0)return;const{autoPanOnConnect:k,domNode:E,isValidConnection:A,connectionMode:j,connectionRadius:D,lib:P,onConnectStart:R,onConnectEnd:F,cancelConnection:y,nodeLookup:$,rfId:N,panBy:C,updateConnection:T}=m.getState(),M=S.type==="target";d(!0),u==null||u(v,n,S.type);const z=(L,O)=>{d(!1),f==null||f(L,n,S.type,O)},H=L=>l==null?void 0:l(n,L);io.onPointerDown(v.nativeEvent,{autoPanOnConnect:k,connectionMode:j,connectionRadius:D,domNode:E,handleId:S.id,nodeId:S.nodeId,nodeLookup:$,isTarget:M,edgeUpdaterType:S.type,lib:P,flowId:N,cancelConnection:y,panBy:C,isValidConnection:A,onConnect:H,onConnectStart:R,onConnectEnd:F,onReconnectEnd:z,updateConnection:T,getTransform:()=>m.getState().transform,getFromHandle:()=>m.getState().connection.fromHandle})},w=v=>x(v,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),_=v=>x(v,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),b=()=>h(!0),p=()=>h(!1);return g.jsxs(g.Fragment,{children:[(e===!0||e==="source")&&g.jsx(Lr,{position:a,centerX:o,centerY:r,radius:t,onMouseDown:w,onMouseEnter:b,onMouseOut:p,type:"source"}),(e===!0||e==="target")&&g.jsx(Lr,{position:c,centerX:s,centerY:i,radius:t,onMouseDown:_,onMouseEnter:b,onMouseOut:p,type:"target"})]})}function Lg({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:o,onClick:r,onDoubleClick:s,onContextMenu:i,onMouseEnter:a,onMouseMove:c,onMouseLeave:l,reconnectRadius:u,onReconnect:f,onReconnectStart:d,onReconnectEnd:h,rfId:m,edgeTypes:x,noPanClassName:w,onError:_,disableKeyboardA11y:b}){let p=Z(W=>W.edgeLookup.get(e));const v=Z(W=>W.defaultEdgeOptions);p=v?{...v,...p}:p;let S=p.type||"default",k=(x==null?void 0:x[S])||Hr[S];k===void 0&&(_==null||_("011",xe.error011(S)),S="default",k=Hr.default);const E=!!(p.focusable||t&&typeof p.focusable>"u"),A=typeof f<"u"&&(p.reconnectable||n&&typeof p.reconnectable>"u"),j=!!(p.selectable||o&&typeof p.selectable>"u"),D=I.useRef(null),[P,R]=I.useState(!1),[F,y]=I.useState(!1),$=ee(),{zIndex:N,sourceX:C,sourceY:T,targetX:M,targetY:z,sourcePosition:H,targetPosition:L}=Z(I.useCallback(W=>{const ne=W.nodeLookup.get(p.source),Q=W.nodeLookup.get(p.target);if(!ne||!Q)return{zIndex:p.zIndex,...Rr};const re=Df({id:e,sourceNode:ne,targetNode:Q,sourceHandle:p.sourceHandle||null,targetHandle:p.targetHandle||null,connectionMode:W.connectionMode,onError:_});return{zIndex:kf({selected:p.selected,zIndex:p.zIndex,sourceNode:ne,targetNode:Q,elevateOnSelect:W.elevateEdgesOnSelect}),...re||Rr}},[p.source,p.target,p.sourceHandle,p.targetHandle,p.selected,p.zIndex]),te),O=I.useMemo(()=>p.markerStart?`url('#${ro(p.markerStart,m)}')`:void 0,[p.markerStart,m]),V=I.useMemo(()=>p.markerEnd?`url('#${ro(p.markerEnd,m)}')`:void 0,[p.markerEnd,m]);if(p.hidden||C===null||T===null||M===null||z===null)return null;const Y=W=>{var ie;const{addSelectedEdges:ne,unselectNodesAndEdges:Q,multiSelectionActive:re}=$.getState();j&&($.setState({nodesSelectionActive:!1}),p.selected&&re?(Q({nodes:[],edges:[p]}),(ie=D.current)==null||ie.blur()):ne([e])),r&&r(W,p)},q=s?W=>{s(W,{...p})}:void 0,B=i?W=>{i(W,{...p})}:void 0,G=a?W=>{a(W,{...p})}:void 0,K=c?W=>{c(W,{...p})}:void 0,J=l?W=>{l(W,{...p})}:void 0,U=W=>{var ne;if(!b&&Es.includes(W.key)&&j){const{unselectNodesAndEdges:Q,addSelectedEdges:re}=$.getState();W.key==="Escape"?((ne=D.current)==null||ne.blur(),Q({edges:[p]})):re([e])}};return g.jsx("svg",{style:{zIndex:N},children:g.jsxs("g",{className:oe(["react-flow__edge",`react-flow__edge-${S}`,p.className,w,{selected:p.selected,animated:p.animated,inactive:!j&&!r,updating:P,selectable:j}]),onClick:Y,onDoubleClick:q,onContextMenu:B,onMouseEnter:G,onMouseMove:K,onMouseLeave:J,onKeyDown:E?U:void 0,tabIndex:E?0:void 0,role:E?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":p.ariaLabel===null?void 0:p.ariaLabel||`Edge from ${p.source} to ${p.target}`,"aria-describedby":E?`${ni}-${m}`:void 0,ref:D,children:[!F&&g.jsx(k,{id:e,source:p.source,target:p.target,type:p.type,selected:p.selected,animated:p.animated,selectable:j,deletable:p.deletable??!0,label:p.label,labelStyle:p.labelStyle,labelShowBg:p.labelShowBg,labelBgStyle:p.labelBgStyle,labelBgPadding:p.labelBgPadding,labelBgBorderRadius:p.labelBgBorderRadius,sourceX:C,sourceY:T,targetX:M,targetY:z,sourcePosition:H,targetPosition:L,data:p.data,style:p.style,sourceHandleId:p.sourceHandle,targetHandleId:p.targetHandle,markerStart:O,markerEnd:V,pathOptions:"pathOptions"in p?p.pathOptions:void 0,interactionWidth:p.interactionWidth}),A&&g.jsx(Fg,{edge:p,isReconnectable:A,reconnectRadius:u,onReconnect:f,onReconnectStart:d,onReconnectEnd:h,sourceX:C,sourceY:T,targetX:M,targetY:z,sourcePosition:H,targetPosition:L,setUpdateHover:R,setReconnecting:y})]})})}const Bg=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Ci({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:o,noPanClassName:r,onReconnect:s,onEdgeContextMenu:i,onEdgeMouseEnter:a,onEdgeMouseMove:c,onEdgeMouseLeave:l,onEdgeClick:u,reconnectRadius:f,onEdgeDoubleClick:d,onReconnectStart:h,onReconnectEnd:m,disableKeyboardA11y:x}){const{edgesFocusable:w,edgesReconnectable:_,elementsSelectable:b,onError:p}=Z(Bg,te),v=Cg(t);return g.jsxs("div",{className:"react-flow__edges",children:[g.jsx(Ag,{defaultColor:e,rfId:n}),v.map(S=>g.jsx(Lg,{id:S,edgesFocusable:w,edgesReconnectable:_,elementsSelectable:b,noPanClassName:r,onReconnect:s,onContextMenu:i,onMouseEnter:a,onMouseMove:c,onMouseLeave:l,onClick:u,reconnectRadius:f,onDoubleClick:d,onReconnectStart:h,onReconnectEnd:m,rfId:n,onError:p,edgeTypes:o,disableKeyboardA11y:x},S))]})}Ci.displayName="EdgeRenderer";const Vg=I.memo(Ci),Og=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Yg({children:e}){const t=Z(Og);return g.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function Xg(e){const t=He(),n=I.useRef(!1);I.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Wg=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function qg(e){const t=Z(Wg),n=ee();return I.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function Gg(e){return e.connection.inProgress?{...e.connection,to:kt(e.connection.to,e.transform)}:{...e.connection}}function Ug(e){return Gg}function Kg(e){const t=Ug();return Z(t,te)}const Zg=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Qg({containerStyle:e,style:t,type:n,component:o}){const{nodesConnectable:r,width:s,height:i,isValid:a,inProgress:c}=Z(Zg,te);return!(s&&r&&c)?null:g.jsx("svg",{style:e,width:s,height:i,className:"react-flow__connectionline react-flow__container",children:g.jsx("g",{className:oe(["react-flow__connection",Cs(a)]),children:g.jsx(Mi,{style:t,type:n,CustomComponent:o,isValid:a})})})}const Mi=({style:e,type:t=ke.Bezier,CustomComponent:n,isValid:o})=>{const{inProgress:r,from:s,fromNode:i,fromHandle:a,fromPosition:c,to:l,toNode:u,toHandle:f,toPosition:d}=Kg();if(!r)return;if(n)return g.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:i,fromHandle:a,fromX:s.x,fromY:s.y,toX:l.x,toY:l.y,fromPosition:c,toPosition:d,connectionStatus:Cs(o),toNode:u,toHandle:f});let h="";const m={sourceX:s.x,sourceY:s.y,sourcePosition:c,targetX:l.x,targetY:l.y,targetPosition:d};switch(t){case ke.Bezier:[h]=Fs(m);break;case ke.SimpleBezier:[h]=pi(m);break;case ke.Step:[h]=gn({...m,borderRadius:0});break;case ke.SmoothStep:[h]=gn(m);break;default:[h]=Vs(m)}return g.jsx("path",{d:h,fill:"none",className:"react-flow__connection-path",style:e})};Mi.displayName="ConnectionLine";const Jg={};function Br(e=Jg){I.useRef(e),ee(),I.useEffect(()=>{},[e])}function ep(){ee(),I.useRef(!1),I.useEffect(()=>{},[])}function ki({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:o,onEdgeClick:r,onNodeDoubleClick:s,onEdgeDoubleClick:i,onNodeMouseEnter:a,onNodeMouseMove:c,onNodeMouseLeave:l,onNodeContextMenu:u,onSelectionContextMenu:f,onSelectionStart:d,onSelectionEnd:h,connectionLineType:m,connectionLineStyle:x,connectionLineComponent:w,connectionLineContainerStyle:_,selectionKeyCode:b,selectionOnDrag:p,selectionMode:v,multiSelectionKeyCode:S,panActivationKeyCode:k,zoomActivationKeyCode:E,deleteKeyCode:A,onlyRenderVisibleElements:j,elementsSelectable:D,defaultViewport:P,translateExtent:R,minZoom:F,maxZoom:y,preventScrolling:$,defaultMarkerColor:N,zoomOnScroll:C,zoomOnPinch:T,panOnScroll:M,panOnScrollSpeed:z,panOnScrollMode:H,zoomOnDoubleClick:L,panOnDrag:O,onPaneClick:V,onPaneMouseEnter:Y,onPaneMouseMove:q,onPaneMouseLeave:B,onPaneScroll:G,onPaneContextMenu:K,paneClickDistance:J,nodeClickDistance:U,onEdgeContextMenu:W,onEdgeMouseEnter:ne,onEdgeMouseMove:Q,onEdgeMouseLeave:re,reconnectRadius:ie,onReconnect:Le,onReconnectStart:In,onReconnectEnd:$n,noDragClassName:ot,noWheelClassName:An,noPanClassName:rt,disableKeyboardA11y:st,nodeExtent:Tn,rfId:Be,viewport:Ve,onViewportChange:zt}){return Br(e),Br(t),ep(),Xg(n),qg(Ve),g.jsx(xg,{onPaneClick:V,onPaneMouseEnter:Y,onPaneMouseMove:q,onPaneMouseLeave:B,onPaneContextMenu:K,onPaneScroll:G,paneClickDistance:J,deleteKeyCode:A,selectionKeyCode:b,selectionOnDrag:p,selectionMode:v,onSelectionStart:d,onSelectionEnd:h,multiSelectionKeyCode:S,panActivationKeyCode:k,zoomActivationKeyCode:E,elementsSelectable:D,zoomOnScroll:C,zoomOnPinch:T,zoomOnDoubleClick:L,panOnScroll:M,panOnScrollSpeed:z,panOnScrollMode:H,panOnDrag:O,defaultViewport:P,translateExtent:R,minZoom:F,maxZoom:y,onSelectionContextMenu:f,preventScrolling:$,noDragClassName:ot,noWheelClassName:An,noPanClassName:rt,disableKeyboardA11y:st,onViewportChange:zt,isControlledViewport:!!Ve,children:g.jsxs(Yg,{children:[g.jsx(Vg,{edgeTypes:t,onEdgeClick:r,onEdgeDoubleClick:i,onReconnect:Le,onReconnectStart:In,onReconnectEnd:$n,onlyRenderVisibleElements:j,onEdgeContextMenu:W,onEdgeMouseEnter:ne,onEdgeMouseMove:Q,onEdgeMouseLeave:re,reconnectRadius:ie,defaultMarkerColor:N,noPanClassName:rt,disableKeyboardA11y:st,rfId:Be}),g.jsx(Qg,{style:x,type:m,component:w,containerStyle:_}),g.jsx("div",{className:"react-flow__edgelabel-renderer"}),g.jsx(Sg,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:c,onNodeMouseLeave:l,onNodeContextMenu:u,nodeClickDistance:U,onlyRenderVisibleElements:j,noPanClassName:rt,noDragClassName:ot,disableKeyboardA11y:st,nodeExtent:Tn,rfId:Be}),g.jsx("div",{className:"react-flow__viewport-portal"})]})})}ki.displayName="GraphView";const tp=I.memo(ki),Vr=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:s,fitView:i,fitViewOptions:a,minZoom:c=.5,maxZoom:l=2,nodeOrigin:u,nodeExtent:f}={})=>{const d=new Map,h=new Map,m=new Map,x=new Map,w=o??t??[],_=n??e??[],b=u??[0,0],p=f??wt;Ys(m,x,w);const v=so(_,d,h,{nodeOrigin:b,nodeExtent:p,elevateNodesOnSelect:!1});let S=[0,0,1];if(i&&r&&s){const k=Mt(d,{filter:D=>!!((D.width||D.initialWidth)&&(D.height||D.initialHeight))}),{x:E,y:A,zoom:j}=wo(k,r,s,c,l,(a==null?void 0:a.padding)??.1);S=[E,A,j]}return{rfId:"1",width:0,height:0,transform:S,nodes:_,nodesInitialized:v,nodeLookup:d,parentLookup:h,edges:w,edgeLookup:x,connectionLookup:m,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:o!==void 0,panZoom:null,minZoom:c,maxZoom:l,translateExtent:wt,nodeExtent:p,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Ke.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:b,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:i??!1,fitViewOptions:a,fitViewResolver:null,connection:{...Ss},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:Nf,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},np=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:s,fitView:i,fitViewOptions:a,minZoom:c,maxZoom:l,nodeOrigin:u,nodeExtent:f})=>bh((d,h)=>{async function m(){const{nodeLookup:x,panZoom:w,fitViewOptions:_,fitViewResolver:b,width:p,height:v,minZoom:S,maxZoom:k}=h();w&&(await _f({nodes:x,width:p,height:v,panZoom:w,minZoom:S,maxZoom:k},_),b==null||b.resolve(!0),d({fitViewResolver:null}))}return{...Vr({nodes:e,edges:t,width:r,height:s,fitView:i,fitViewOptions:a,minZoom:c,maxZoom:l,nodeOrigin:u,nodeExtent:f,defaultNodes:n,defaultEdges:o}),setNodes:x=>{const{nodeLookup:w,parentLookup:_,nodeOrigin:b,elevateNodesOnSelect:p,fitViewQueued:v}=h(),S=so(x,w,_,{nodeOrigin:b,nodeExtent:f,elevateNodesOnSelect:p,checkEquality:!0});v&&S?(m(),d({nodes:x,nodesInitialized:S,fitViewQueued:!1,fitViewOptions:void 0})):d({nodes:x,nodesInitialized:S})},setEdges:x=>{const{connectionLookup:w,edgeLookup:_}=h();Ys(w,_,x),d({edges:x})},setDefaultNodesAndEdges:(x,w)=>{if(x){const{setNodes:_}=h();_(x),d({hasDefaultNodes:!0})}if(w){const{setEdges:_}=h();_(w),d({hasDefaultEdges:!0})}},updateNodeInternals:x=>{const{triggerNodeChanges:w,nodeLookup:_,parentLookup:b,domNode:p,nodeOrigin:v,nodeExtent:S,debug:k,fitViewQueued:E}=h(),{changes:A,updatedInternals:j}=Bf(x,_,b,p,v,S);j&&(Rf(_,b,{nodeOrigin:v,nodeExtent:S}),E?(m(),d({fitViewQueued:!1,fitViewOptions:void 0})):d({}),(A==null?void 0:A.length)>0&&(k&&console.log("React Flow: trigger node changes",A),w==null||w(A)))},updateNodePositions:(x,w=!1)=>{const _=[],b=[],{nodeLookup:p,triggerNodeChanges:v}=h();for(const[S,k]of x){const E=p.get(S),A=!!(E!=null&&E.expandParent&&(E!=null&&E.parentId)&&(k!=null&&k.position)),j={id:S,type:"position",position:A?{x:Math.max(0,k.position.x),y:Math.max(0,k.position.y)}:k.position,dragging:w};A&&E.parentId&&_.push({id:S,parentId:E.parentId,rect:{...k.internals.positionAbsolute,width:k.measured.width??0,height:k.measured.height??0}}),b.push(j)}if(_.length>0){const{parentLookup:S,nodeOrigin:k}=h(),E=Eo(_,p,S,k);b.push(...E)}v(b)},triggerNodeChanges:x=>{const{onNodesChange:w,setNodes:_,nodes:b,hasDefaultNodes:p,debug:v}=h();if(x!=null&&x.length){if(p){const S=si(x,b);_(S)}v&&console.log("React Flow: trigger node changes",x),w==null||w(x)}},triggerEdgeChanges:x=>{const{onEdgesChange:w,setEdges:_,edges:b,hasDefaultEdges:p,debug:v}=h();if(x!=null&&x.length){if(p){const S=ii(x,b);_(S)}v&&console.log("React Flow: trigger edge changes",x),w==null||w(x)}},addSelectedNodes:x=>{const{multiSelectionActive:w,edgeLookup:_,nodeLookup:b,triggerNodeChanges:p,triggerEdgeChanges:v}=h();if(w){const S=x.map(k=>$e(k,!0));p(S);return}p(Xe(b,new Set([...x]),!0)),v(Xe(_))},addSelectedEdges:x=>{const{multiSelectionActive:w,edgeLookup:_,nodeLookup:b,triggerNodeChanges:p,triggerEdgeChanges:v}=h();if(w){const S=x.map(k=>$e(k,!0));v(S);return}v(Xe(_,new Set([...x]))),p(Xe(b,new Set,!0))},unselectNodesAndEdges:({nodes:x,edges:w}={})=>{const{edges:_,nodes:b,nodeLookup:p,triggerNodeChanges:v,triggerEdgeChanges:S}=h(),k=x||b,E=w||_,A=k.map(D=>{const P=p.get(D.id);return P&&(P.selected=!1),$e(D.id,!1)}),j=E.map(D=>$e(D.id,!1));v(A),S(j)},setMinZoom:x=>{const{panZoom:w,maxZoom:_}=h();w==null||w.setScaleExtent([x,_]),d({minZoom:x})},setMaxZoom:x=>{const{panZoom:w,minZoom:_}=h();w==null||w.setScaleExtent([_,x]),d({maxZoom:x})},setTranslateExtent:x=>{var w;(w=h().panZoom)==null||w.setTranslateExtent(x),d({translateExtent:x})},setPaneClickDistance:x=>{var w;(w=h().panZoom)==null||w.setClickDistance(x)},resetSelectedElements:()=>{const{edges:x,nodes:w,triggerNodeChanges:_,triggerEdgeChanges:b,elementsSelectable:p}=h();if(!p)return;const v=w.reduce((k,E)=>E.selected?[...k,$e(E.id,!1)]:k,[]),S=x.reduce((k,E)=>E.selected?[...k,$e(E.id,!1)]:k,[]);_(v),b(S)},setNodeExtent:x=>{const{nodes:w,nodeLookup:_,parentLookup:b,nodeOrigin:p,elevateNodesOnSelect:v,nodeExtent:S}=h();x[0][0]===S[0][0]&&x[0][1]===S[0][1]&&x[1][0]===S[1][0]&&x[1][1]===S[1][1]||(so(w,_,b,{nodeOrigin:p,nodeExtent:x,elevateNodesOnSelect:v,checkEquality:!1}),d({nodeExtent:x}))},panBy:x=>{const{transform:w,width:_,height:b,panZoom:p,translateExtent:v}=h();return Vf({delta:x,panZoom:p,transform:w,translateExtent:v,width:_,height:b})},cancelConnection:()=>{d({connection:{...Ss}})},updateConnection:x=>{d({connection:x})},reset:()=>d({...Vr()})}},Object.is);function Mo({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:o,initialWidth:r,initialHeight:s,initialMinZoom:i,initialMaxZoom:a,initialFitViewOptions:c,fitView:l,nodeOrigin:u,nodeExtent:f,children:d}){const[h]=I.useState(()=>np({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:s,fitView:l,minZoom:i,maxZoom:a,fitViewOptions:c,nodeOrigin:u,nodeExtent:f}));return g.jsx(Nh,{value:h,children:g.jsx(Wh,{children:d})})}function op({children:e,nodes:t,edges:n,defaultNodes:o,defaultEdges:r,width:s,height:i,fitView:a,fitViewOptions:c,minZoom:l,maxZoom:u,nodeOrigin:f,nodeExtent:d}){return I.useContext(Sn)?g.jsx(g.Fragment,{children:e}):g.jsx(Mo,{initialNodes:t,initialEdges:n,defaultNodes:o,defaultEdges:r,initialWidth:s,initialHeight:i,fitView:a,initialFitViewOptions:c,initialMinZoom:l,initialMaxZoom:u,nodeOrigin:f,nodeExtent:d,children:e})}const rp={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function sp({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:r,nodeTypes:s,edgeTypes:i,onNodeClick:a,onEdgeClick:c,onInit:l,onMove:u,onMoveStart:f,onMoveEnd:d,onConnect:h,onConnectStart:m,onConnectEnd:x,onClickConnectStart:w,onClickConnectEnd:_,onNodeMouseEnter:b,onNodeMouseMove:p,onNodeMouseLeave:v,onNodeContextMenu:S,onNodeDoubleClick:k,onNodeDragStart:E,onNodeDrag:A,onNodeDragStop:j,onNodesDelete:D,onEdgesDelete:P,onDelete:R,onSelectionChange:F,onSelectionDragStart:y,onSelectionDrag:$,onSelectionDragStop:N,onSelectionContextMenu:C,onSelectionStart:T,onSelectionEnd:M,onBeforeDelete:z,connectionMode:H,connectionLineType:L=ke.Bezier,connectionLineStyle:O,connectionLineComponent:V,connectionLineContainerStyle:Y,deleteKeyCode:q="Backspace",selectionKeyCode:B="Shift",selectionOnDrag:G=!1,selectionMode:K=vt.Full,panActivationKeyCode:J="Space",multiSelectionKeyCode:U=hn()?"Meta":"Control",zoomActivationKeyCode:W=hn()?"Meta":"Control",snapToGrid:ne,snapGrid:Q,onlyRenderVisibleElements:re=!1,selectNodesOnDrag:ie,nodesDraggable:Le,nodesConnectable:In,nodesFocusable:$n,nodeOrigin:ot=oi,edgesFocusable:An,edgesReconnectable:rt,elementsSelectable:st=!0,defaultViewport:Tn=zh,minZoom:Be=.5,maxZoom:Ve=2,translateExtent:zt=wt,preventScrolling:ea=!0,nodeExtent:jn,defaultMarkerColor:ta="#b1b1b7",zoomOnScroll:na=!0,zoomOnPinch:oa=!0,panOnScroll:ra=!1,panOnScrollSpeed:sa=.5,panOnScrollMode:ia=Pe.Free,zoomOnDoubleClick:aa=!0,panOnDrag:ca=!0,onPaneClick:la,onPaneMouseEnter:ua,onPaneMouseMove:da,onPaneMouseLeave:fa,onPaneScroll:ha,onPaneContextMenu:ga,paneClickDistance:Ao=0,nodeClickDistance:pa=0,children:ma,onReconnect:xa,onReconnectStart:ya,onReconnectEnd:wa,onEdgeContextMenu:va,onEdgeDoubleClick:_a,onEdgeMouseEnter:ba,onEdgeMouseMove:Na,onEdgeMouseLeave:Ea,reconnectRadius:Sa=10,onNodesChange:Ca,onEdgesChange:Ma,noDragClassName:ka="nodrag",noWheelClassName:Ia="nowheel",noPanClassName:To="nopan",fitView:jo,fitViewOptions:Po,connectOnClick:$a,attributionPosition:Aa,proOptions:Ta,defaultEdgeOptions:ja,elevateNodesOnSelect:Pa,elevateEdgesOnSelect:Da,disableKeyboardA11y:Do=!1,autoPanOnConnect:za,autoPanOnNodeDrag:Ha,autoPanSpeed:Ra,connectionRadius:Fa,isValidConnection:La,onError:Ba,style:Va,id:zo,nodeDragThreshold:Oa,viewport:Ya,onViewportChange:Xa,width:Wa,height:qa,colorMode:Ga="light",debug:Ua,onScroll:Ht,...Ka},Za){const Pn=zo||"1",Qa=Lh(Ga),Ja=I.useCallback(Ho=>{Ho.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Ht==null||Ht(Ho)},[Ht]);return g.jsx("div",{"data-testid":"rf__wrapper",...Ka,onScroll:Ja,style:{...Va,...rp},ref:Za,className:oe(["react-flow",r,Qa]),id:zo,children:g.jsxs(op,{nodes:e,edges:t,width:Wa,height:qa,fitView:jo,fitViewOptions:Po,minZoom:Be,maxZoom:Ve,nodeOrigin:ot,nodeExtent:jn,children:[g.jsx(tp,{onInit:l,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:b,onNodeMouseMove:p,onNodeMouseLeave:v,onNodeContextMenu:S,onNodeDoubleClick:k,nodeTypes:s,edgeTypes:i,connectionLineType:L,connectionLineStyle:O,connectionLineComponent:V,connectionLineContainerStyle:Y,selectionKeyCode:B,selectionOnDrag:G,selectionMode:K,deleteKeyCode:q,multiSelectionKeyCode:U,panActivationKeyCode:J,zoomActivationKeyCode:W,onlyRenderVisibleElements:re,defaultViewport:Tn,translateExtent:zt,minZoom:Be,maxZoom:Ve,preventScrolling:ea,zoomOnScroll:na,zoomOnPinch:oa,zoomOnDoubleClick:aa,panOnScroll:ra,panOnScrollSpeed:sa,panOnScrollMode:ia,panOnDrag:ca,onPaneClick:la,onPaneMouseEnter:ua,onPaneMouseMove:da,onPaneMouseLeave:fa,onPaneScroll:ha,onPaneContextMenu:ga,paneClickDistance:Ao,nodeClickDistance:pa,onSelectionContextMenu:C,onSelectionStart:T,onSelectionEnd:M,onReconnect:xa,onReconnectStart:ya,onReconnectEnd:wa,onEdgeContextMenu:va,onEdgeDoubleClick:_a,onEdgeMouseEnter:ba,onEdgeMouseMove:Na,onEdgeMouseLeave:Ea,reconnectRadius:Sa,defaultMarkerColor:ta,noDragClassName:ka,noWheelClassName:Ia,noPanClassName:To,rfId:Pn,disableKeyboardA11y:Do,nodeExtent:jn,viewport:Ya,onViewportChange:Xa}),g.jsx(Fh,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:h,onConnectStart:m,onConnectEnd:x,onClickConnectStart:w,onClickConnectEnd:_,nodesDraggable:Le,nodesConnectable:In,nodesFocusable:$n,edgesFocusable:An,edgesReconnectable:rt,elementsSelectable:st,elevateNodesOnSelect:Pa,elevateEdgesOnSelect:Da,minZoom:Be,maxZoom:Ve,nodeExtent:jn,onNodesChange:Ca,onEdgesChange:Ma,snapToGrid:ne,snapGrid:Q,connectionMode:H,translateExtent:zt,connectOnClick:$a,defaultEdgeOptions:ja,fitView:jo,fitViewOptions:Po,onNodesDelete:D,onEdgesDelete:P,onDelete:R,onNodeDragStart:E,onNodeDrag:A,onNodeDragStop:j,onSelectionDrag:$,onSelectionDragStart:y,onSelectionDragStop:N,onMove:u,onMoveStart:f,onMoveEnd:d,noPanClassName:To,nodeOrigin:ot,rfId:Pn,autoPanOnConnect:za,autoPanOnNodeDrag:Ha,autoPanSpeed:Ra,onError:Ba,connectionRadius:Fa,isValidConnection:La,selectNodesOnDrag:ie,nodeDragThreshold:Oa,onBeforeDelete:z,paneClickDistance:Ao,debug:Ua}),g.jsx(Dh,{onSelectionChange:F}),ma,g.jsx($h,{proOptions:Ta,position:Aa}),g.jsx(kh,{rfId:Pn,disableKeyboardA11y:Do})]})})}var ip=ai(sp);const ap=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__edgelabel-renderer")};function cp({children:e}){const t=Z(ap);return t?oc.createPortal(e,t):null}const lp=e=>e.nodes;function Ii(){return Z(lp,te)}function up(e){const[t,n]=I.useState(e),o=I.useCallback(r=>n(s=>si(r,s)),[]);return[t,n,o]}function dp(e){const[t,n]=I.useState(e),o=I.useCallback(r=>n(s=>ii(r,s)),[]);return[t,n,o]}function fp(e){return Z(I.useCallback(n=>{const o=[],r=Array.isArray(e),s=r?e:[e];for(const i of s){const a=n.nodeLookup.get(i);a&&o.push({id:a.id,type:a.type,data:a.data})}return r?o:o[0]??null},[e]),Of)}function hp({dimensions:e,lineWidth:t,variant:n,className:o}){return g.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:oe(["react-flow__background-pattern",n,o])})}function gp({radius:e,className:t}){return g.jsx("circle",{cx:e,cy:e,r:e,className:oe(["react-flow__background-pattern","dots",t])})}var Ie;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Ie||(Ie={}));const pp={[Ie.Dots]:1,[Ie.Lines]:1,[Ie.Cross]:6},mp=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function $i({id:e,variant:t=Ie.Dots,gap:n=20,size:o,lineWidth:r=1,offset:s=0,color:i,bgColor:a,style:c,className:l,patternClassName:u}){const f=I.useRef(null),{transform:d,patternId:h}=Z(mp,te),m=o||pp[t],x=t===Ie.Dots,w=t===Ie.Cross,_=Array.isArray(n)?n:[n,n],b=[_[0]*d[2]||1,_[1]*d[2]||1],p=m*d[2],v=Array.isArray(s)?s:[s,s],S=w?[p,p]:b,k=[v[0]*d[2]||1+S[0]/2,v[1]*d[2]||1+S[1]/2],E=`${h}${e||""}`;return g.jsxs("svg",{className:oe(["react-flow__background",l]),style:{...c,...Mn,"--xy-background-color-props":a,"--xy-background-pattern-color-props":i},ref:f,"data-testid":"rf__background",children:[g.jsx("pattern",{id:E,x:d[0]%b[0],y:d[1]%b[1],width:b[0],height:b[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${k[0]},-${k[1]})`,children:x?g.jsx(gp,{radius:p/2,className:u}):g.jsx(hp,{dimensions:S,lineWidth:r,variant:t,className:u})}),g.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${E})`})]})}$i.displayName="Background";const xp=I.memo($i);function yp(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:g.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function wp(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:g.jsx("path",{d:"M0 0h32v4.2H0z"})})}function vp(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:g.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function _p(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:g.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function bp(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:g.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Wt({children:e,className:t,...n}){return g.jsx("button",{type:"button",className:oe(["react-flow__controls-button",t]),...n,children:e})}const Np=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function Ai({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:r,onZoomIn:s,onZoomOut:i,onFitView:a,onInteractiveChange:c,className:l,children:u,position:f="bottom-left",orientation:d="vertical","aria-label":h="React Flow controls"}){const m=ee(),{isInteractive:x,minZoomReached:w,maxZoomReached:_}=Z(Np,te),{zoomIn:b,zoomOut:p,fitView:v}=He(),S=()=>{b(),s==null||s()},k=()=>{p(),i==null||i()},E=()=>{v(r),a==null||a()},A=()=>{m.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c==null||c(!x)},j=d==="horizontal"?"horizontal":"vertical";return g.jsxs(Cn,{className:oe(["react-flow__controls",j,l]),position:f,style:e,"data-testid":"rf__controls","aria-label":h,children:[t&&g.jsxs(g.Fragment,{children:[g.jsx(Wt,{onClick:S,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:_,children:g.jsx(yp,{})}),g.jsx(Wt,{onClick:k,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:w,children:g.jsx(wp,{})})]}),n&&g.jsx(Wt,{className:"react-flow__controls-fitview",onClick:E,title:"fit view","aria-label":"fit view",children:g.jsx(vp,{})}),o&&g.jsx(Wt,{className:"react-flow__controls-interactive",onClick:A,title:"toggle interactivity","aria-label":"toggle interactivity",children:x?g.jsx(bp,{}):g.jsx(_p,{})}),u]})}Ai.displayName="Controls";const Ep=I.memo(Ai);function Sp({id:e,x:t,y:n,width:o,height:r,style:s,color:i,strokeColor:a,strokeWidth:c,className:l,borderRadius:u,shapeRendering:f,selected:d,onClick:h}){const{background:m,backgroundColor:x}=s||{},w=i||m||x;return g.jsx("rect",{className:oe(["react-flow__minimap-node",{selected:d},l]),x:t,y:n,rx:u,ry:u,width:o,height:r,style:{fill:w,stroke:a,strokeWidth:c},shapeRendering:f,onClick:h?_=>h(_,e):void 0})}const Cp=I.memo(Sp),Mp=e=>e.nodes.map(t=>t.id),Xn=e=>e instanceof Function?e:()=>e;function kp({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:o=5,nodeStrokeWidth:r,nodeComponent:s=Cp,onClick:i}){const a=Z(Mp,te),c=Xn(t),l=Xn(e),u=Xn(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return g.jsx(g.Fragment,{children:a.map(d=>g.jsx($p,{id:d,nodeColorFunc:c,nodeStrokeColorFunc:l,nodeClassNameFunc:u,nodeBorderRadius:o,nodeStrokeWidth:r,NodeComponent:s,onClick:i,shapeRendering:f},d))})}function Ip({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:o,nodeBorderRadius:r,nodeStrokeWidth:s,shapeRendering:i,NodeComponent:a,onClick:c}){const{node:l,x:u,y:f,width:d,height:h}=Z(m=>{const{internals:x}=m.nodeLookup.get(e),w=x.userNode,{x:_,y:b}=x.positionAbsolute,{width:p,height:v}=Ee(w);return{node:w,x:_,y:b,width:p,height:v}},te);return!l||l.hidden||!js(l)?null:g.jsx(a,{x:u,y:f,width:d,height:h,style:l.style,selected:!!l.selected,className:o(l),color:t(l),borderRadius:r,strokeColor:n(l),strokeWidth:s,shapeRendering:i,onClick:c,id:l.id})}const $p=I.memo(Ip);var Ap=I.memo(kp);const Tp=200,jp=150,Pp=e=>!e.hidden,Dp=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Ts(Mt(e.nodeLookup,{filter:Pp}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},zp="react-flow__minimap-desc";function Ti({style:e,className:t,nodeStrokeColor:n,nodeColor:o,nodeClassName:r="",nodeBorderRadius:s=5,nodeStrokeWidth:i,nodeComponent:a,bgColor:c,maskColor:l,maskStrokeColor:u,maskStrokeWidth:f,position:d="bottom-right",onClick:h,onNodeClick:m,pannable:x=!1,zoomable:w=!1,ariaLabel:_="React Flow mini map",inversePan:b,zoomStep:p=10,offsetScale:v=5}){const S=ee(),k=I.useRef(null),{boundingRect:E,viewBB:A,rfId:j,panZoom:D,translateExtent:P,flowWidth:R,flowHeight:F}=Z(Dp,te),y=(e==null?void 0:e.width)??Tp,$=(e==null?void 0:e.height)??jp,N=E.width/y,C=E.height/$,T=Math.max(N,C),M=T*y,z=T*$,H=v*T,L=E.x-(M-E.width)/2-H,O=E.y-(z-E.height)/2-H,V=M+H*2,Y=z+H*2,q=`${zp}-${j}`,B=I.useRef(0),G=I.useRef();B.current=T,I.useEffect(()=>{if(k.current&&D)return G.current=Zf({domNode:k.current,panZoom:D,getTransform:()=>S.getState().transform,getViewScale:()=>B.current}),()=>{var U;(U=G.current)==null||U.destroy()}},[D]),I.useEffect(()=>{var U;(U=G.current)==null||U.update({translateExtent:P,width:R,height:F,inversePan:b,pannable:x,zoomStep:p,zoomable:w})},[x,w,b,p,P,R,F]);const K=h?U=>{var Q;const[W,ne]=((Q=G.current)==null?void 0:Q.pointer(U))||[0,0];h(U,{x:W,y:ne})}:void 0,J=m?I.useCallback((U,W)=>{const ne=S.getState().nodeLookup.get(W).internals.userNode;m(U,ne)},[]):void 0;return g.jsx(Cn,{position:d,style:{...e,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-stroke-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*T:void 0,"--xy-minimap-node-background-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof i=="number"?i:void 0},className:oe(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:g.jsxs("svg",{width:y,height:$,viewBox:`${L} ${O} ${V} ${Y}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":q,ref:k,onClick:K,children:[_&&g.jsx("title",{id:q,children:_}),g.jsx(Ap,{onClick:J,nodeColor:o,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:r,nodeStrokeWidth:i,nodeComponent:a}),g.jsx("path",{className:"react-flow__minimap-mask",d:`M${L-H},${O-H}h${V+H*2}v${Y+H*2}h${-V-H*2}z
        M${A.x},${A.y}h${A.width}v${A.height}h${-A.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Ti.displayName="MiniMap";I.memo(Ti);function Hp({nodeId:e,position:t,variant:n=ft.Handle,className:o,style:r={},children:s,color:i,minWidth:a=10,minHeight:c=10,maxWidth:l=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:f=!1,resizeDirection:d,shouldResize:h,onResizeStart:m,onResize:x,onResizeEnd:w}){const _=It(),b=typeof e=="string"?e:_,p=ee(),v=I.useRef(null),S=n===ft.Line?"right":"bottom-right",k=t??S,E=I.useRef(null);I.useEffect(()=>{if(!(!v.current||!b))return E.current||(E.current=fh({domNode:v.current,nodeId:b,getStoreItems:()=>{const{nodeLookup:P,transform:R,snapGrid:F,snapToGrid:y,nodeOrigin:$,domNode:N}=p.getState();return{nodeLookup:P,transform:R,snapGrid:F,snapToGrid:y,nodeOrigin:$,paneDomNode:N}},onChange:(P,R)=>{const{triggerNodeChanges:F,nodeLookup:y,parentLookup:$,nodeOrigin:N}=p.getState(),C=[],T={x:P.x,y:P.y},M=y.get(b);if(M&&M.expandParent&&M.parentId){const z=M.origin??N,H=P.width??M.measured.width??0,L=P.height??M.measured.height??0,O={id:M.id,parentId:M.parentId,rect:{width:H,height:L,...Ps({x:P.x??M.position.x,y:P.y??M.position.y},{width:H,height:L},M.parentId,y,z)}},V=Eo([O],y,$,N);C.push(...V),T.x=P.x?Math.max(z[0]*H,P.x):void 0,T.y=P.y?Math.max(z[1]*L,P.y):void 0}if(T.x!==void 0&&T.y!==void 0){const z={id:b,type:"position",position:{...T}};C.push(z)}if(P.width!==void 0&&P.height!==void 0){const H={id:b,type:"dimensions",resizing:!0,setAttributes:d?d==="horizontal"?"width":"height":!0,dimensions:{width:P.width,height:P.height}};C.push(H)}for(const z of R){const H={...z,type:"position"};C.push(H)}F(C)},onEnd:({width:P,height:R})=>{const F={id:b,type:"dimensions",resizing:!1,dimensions:{width:P,height:R}};p.getState().triggerNodeChanges([F])}})),E.current.update({controlPosition:k,boundaries:{minWidth:a,minHeight:c,maxWidth:l,maxHeight:u},keepAspectRatio:f,resizeDirection:d,onResizeStart:m,onResize:x,onResizeEnd:w,shouldResize:h}),()=>{var P;(P=E.current)==null||P.destroy()}},[k,a,c,l,u,f,m,x,w,h]);const A=k.split("-"),j=n===ft.Line?"borderColor":"backgroundColor",D=i?{...r,[j]:i}:r;return g.jsx("div",{className:oe(["react-flow__resize-control","nodrag",...A,n,o]),ref:v,style:D,children:s})}I.memo(Hp);function ji(e){return[I.useRef(e).current]}function Pi(e,t){const n=t(),o=se(()=>{!e||!n||Object.keys(n).forEach(r=>{e[r]=n[r]})});I.useEffect(o,[n,o])}const ko="default_source_handle",Io="default_target_handle",co="start-id",Rp={id:co,type:"start",data:{formData:{}},position:{x:0,y:0}},Di=I.createContext({}),zi=I.createContext({}),Fp=()=>ji({getData:()=>null}),Hi=()=>ji({getData:()=>null}),pe=()=>I.useContext(Di),Ri=()=>I.useContext(zi),Fi=()=>{const e=It(),{openDetail:t}=pe(),{addEdges:n,addNodes:o,getNodes:r}=He(),s=se(()=>{var f;const c=r().find(d=>d.id===e);let l=(c==null?void 0:c.position.x)||0;const u=(c==null?void 0:c.position.y)||0;return l=l+(((f=c==null?void 0:c.measured)==null?void 0:f.width)||0)+80,{x:l,y:u}});return[se(a=>{const c=nn(),l=a.triggerId,u=a.nodeType;o({id:c,data:a,type:u,position:s()}),e&&n({id:nn(),source:e,target:c,sourceHandle:l,targetHandle:Io}),u==="step"&&t(c)})]},Lp=()=>{const{detailId:e}=pe();return Ii().find(n=>n.id===e)},Bp=()=>{const e=Lp();return e==null?void 0:e.data};function Vp(){const e=It(),t=fp(e);return t==null?void 0:t.data}function Re(){const e=Vp();return e==null?void 0:e.formData}const Op="_form_svv3s_1",Yp={form:Op},Xp=e=>{var r;const{onSubmit:t}=e,[n]=Hc(),[o]=Ro.useForm();return Rc(async()=>{const s=await(o==null?void 0:o.validateFields());s&&await t(s),n()}),g.jsx(Ro,{form:o,submitter:!1,className:Yp.form,initialValues:e.formData,children:(r=e.children)==null?void 0:r.call(e,o)})},Li=e=>{const{children:t,onSubmit:n,formData:o,...r}=e;return g.jsx(Pc,{...r,children:g.jsx(Xp,{formData:o,onSubmit:n,children:t})})},Wp=e=>{const{nodeId:t,tools:n}=e,{editForm:o}=n,{top:r}=Ri(),{openDetail:s}=pe(),{setNodes:i,updateNodeData:a,setEdges:c}=He(),l=Re(),u=se(()=>{i(m=>m.filter(x=>x.id!==t)),c(m=>m.filter(x=>x.source!==t&&x.target!==t))}),f=se(async m=>{a(t,{formData:m})}),d=se(()=>{s(t)}),h=m=>o?g.jsx(Li,{centered:!0,okText:"Save",destroyOnHidden:!0,trigger:m,formData:l,width:o.width,onSubmit:f,title:o.title||"Edit Node",children:x=>g.jsx(o.Component,{form:x})}):null;return g.jsxs(hc,{size:16,children:[r&&g.jsx(qt,{icon:gc,onClick:d}),h(g.jsx(qt,{icon:mc})),g.jsx(qt,{icon:pc,onClick:u})]})},qp="_atom_node_fh105_1",Gp="_atom_icon_fh105_11",Up="_atom_content_fh105_21",Kp="_atom_title_fh105_24",Zp="_atom_desc_fh105_30",ct={atom_node:qp,atom_icon:Gp,atom_content:Up,atom_title:Kp,atom_desc:Zp},Or=e=>{const{Icon:t,...n}=e;return g.jsxs("div",{onClick:e.onClick,className:ct.atom_node,children:[g.jsx("div",{className:ct.atom_icon,children:g.jsx(t,{})}),g.jsxs("div",{className:ct.atom_content,children:[g.jsx("div",{className:ct.atom_title,children:n.title}),g.jsx("div",{className:ct.atom_desc,children:n.desc})]})]})},Qp=e=>{const{triggerId:t,onChange:n,closeDrawer:o}=e,r=Ii(),{top:s}=Ri();return g.jsx(I.Fragment,{children:Ki.filter(i=>i.limit!==void 0?r.filter(c=>c.type===i.type).length<i.limit:s?i.top:!i.top).map(i=>{const{type:a,Component:c,...l}=i,u=c.Icon,f=c.Form,d=async(h={})=>{o(),n==null||n({nodeType:a,triggerId:t,formData:h})};return f?g.jsx(Li,{centered:!0,okText:"Add Node",onSubmit:d,width:c.modalWdith,title:`Add ${l.title} Node`,children:h=>g.jsx(f,{form:h}),trigger:g.jsx(Or,{...l,Icon:u})},a):I.createElement(Or,{...l,Icon:u,key:a,onClick:d})})})},Bi=e=>{const{children:t,...n}=e,{open:o,trigger:r,onClose:s}=Dc(t);return g.jsxs(g.Fragment,{children:[r,g.jsx(xc,{open:o,destroyOnHidden:!0,onClose:s,rootClassName:"shopify",title:"What triggers this workflow?",children:g.jsx(Qp,{...n,closeDrawer:s})})]})},Jp="_wrapper_zt6zj_4",em="_tools_zt6zj_4",tm="_inner_zt6zj_15",nm="_content_zt6zj_23",om="_handle_zt6zj_27",rm="_handle_source_zt6zj_28",sm="_branch_zt6zj_48",im="_branch_item_zt6zj_52",am="_branch_label_zt6zj_60",ve={wrapper:Jp,tools:em,inner:tm,content:nm,handle:om,handle_source:rm,branch:sm,branch_item:im,branch_label:am},Yr=e=>{const{id:t,onChange:n}=e;return g.jsx(Bi,{triggerId:t,onChange:n,children:g.jsx(et,{id:t,type:"source",position:X.Right,className:ve.handle_source})})},cm=e=>{const{branch:t=[],onChange:n}=e;return t.length?g.jsx("div",{className:ve.branch,children:t.map(o=>g.jsxs("div",{className:ve.branch_item,children:[g.jsx("div",{className:ve.branch_label,children:o.label}),g.jsx(Yr,{id:o.id,onChange:n})]},o.id))}):g.jsx(Yr,{id:ko,onChange:n})},Fe=e=>{const{tools:t,branch:n=[],enableHandle:o}=e,{source:r=!0,target:s=!0}=o||{},i=It(),[a]=Fi();return g.jsxs("div",{className:ve.wrapper,children:[g.jsx("div",{className:ve.tools,children:!!t&&i&&g.jsx(Wp,{nodeId:i,tools:t})}),g.jsxs("div",{className:ve.inner,children:[s&&g.jsx(et,{type:"target",id:Io,position:X.Left,className:ve.handle,isConnectableStart:!1}),g.jsx("div",{className:ve.content,children:e.children}),r&&g.jsx(cm,{branch:n,onChange:a})]})]})},lm="_title_1tfkx_1",um="_description_1tfkx_6",Wn={title:lm,description:um},nt=e=>g.jsxs("div",{className:Wn.node_desc,children:[g.jsx("div",{className:Wn.title,children:e.title}),g.jsx("div",{className:Wn.description,children:e.desc})]}),dm=e=>{const{inputParams:t=[]}=e;return t.map(n=>{const o=n.options,r={label:n.label,name:n.name,disabled:n.disabled,readonly:n.readonly,initialValue:n.initialValue,rules:[{required:n.required}]};return g.jsx(I.Fragment,{children:o!=null&&o.length?g.jsx(ht,{...r,options:o}):g.jsx(fe,{...r})},n.name)})},Vi=e=>{const{uiComponents:t=[]}=pe(),n=t.map(s=>({label:s.componentName,value:s.componentTag})),o=s=>t.find(i=>i.componentTag===s),r=se(s=>{var c,l;const i=o(s),a=(c=i==null?void 0:i.input)==null?void 0:c.reduce((u,f)=>({...u,[f.name]:f.initialValue}),{});(l=e.form)==null||l.setFieldsValue(a)});return g.jsxs(I.Fragment,{children:[g.jsx(ht,{label:"Component",name:"name",options:n,rules:[{required:!0}],fieldProps:{onChange:r}}),g.jsx(tt,{label:"Text",name:"text",rules:[{required:!0}]}),g.jsx(Jt,{name:["name"],children:({name:s})=>{const i=t.find(a=>a.componentTag===s);return g.jsx(dm,{inputParams:i==null?void 0:i.input})}})]})},$t=()=>{const e=Re(),{uiComponents:t=[]}=pe(),n=t.find(o=>o.componentTag===(e==null?void 0:e.name));return g.jsx(Fe,{tools:{editForm:{Component:Vi,title:"Edit Ui node",width:$t.modalWdith}},children:g.jsx(nt,{title:n==null?void 0:n.componentName,desc:e==null?void 0:e.text})})};$t.Form=Vi;$t.modalWdith=560;$t.Icon=yc;const fm="_container_12b9h_1",hm="_icon_12b9h_7",gm="_text_12b9h_12",qn={container:fm,icon:hm,text:gm},Oi=()=>g.jsx(Fe,{enableHandle:{target:!1},children:g.jsxs("div",{className:qn.container,children:[g.jsx("div",{className:qn.icon,children:g.jsx(Xr,{})}),g.jsx("div",{className:qn.text,children:"Start"})]})});Oi.Icon=Xr;const Yi=()=>{const e=I.useRef(void 0);return g.jsxs(I.Fragment,{children:[g.jsx(fe,{name:"name",label:"Name",rules:[{required:!0}]}),g.jsx(tt,{label:"Text",name:"text",rules:[{required:!1}]}),g.jsxs(en,{label:"Condition",name:"branch",copyIconProps:!1,actionRef:e,alwaysShowItemLabel:!0,className:"custom_form_list",actionGuard:{beforeAddRow:()=>{var n;const t=nn();return(n=e.current)==null||n.add({id:t}),!1}},children:[g.jsx(fe,{name:"id",hidden:!0}),g.jsxs(Wr,{gutter:16,children:[g.jsx(tn,{span:12,children:g.jsx(fe,{label:"Label",name:"label",rules:[{required:!0}]})}),g.jsx(tn,{span:12,children:g.jsx(fe,{label:"Value",name:"value",rules:[{required:!0}]})})]})]})]})},At=()=>{const e=Re();return g.jsx(Fe,{branch:e==null?void 0:e.branch,tools:{editForm:{width:At.modalWdith,title:"Edit Branch node",Component:Yi}},children:g.jsx(nt,{title:e==null?void 0:e.name,desc:e==null?void 0:e.text})})};At.Form=Yi;At.modalWdith=560;At.Icon=wc;var Xi=(e=>(e.Prompt="prompt",e.Text="text",e))(Xi||{});const lo={prompt:"Prompt",text:"Text"},Wi=()=>g.jsxs(I.Fragment,{children:[g.jsx(vc.Group,{label:"Type",name:"type",initialValue:Xi.Prompt,valueEnum:lo,rules:[{required:!0}]}),g.jsx(Jt,{name:["type"],children:({type:e})=>e?g.jsx(tt,{label:lo[e],name:"text",rules:[{required:!0}]}):null})]}),Tt=()=>{const e=Re(),t=e==null?void 0:e.type;return g.jsx(Fe,{tools:{editForm:{width:Tt.modalWdith,title:"Edit Prompt node",Component:Wi}},children:g.jsx(nt,{title:t&&lo[t],desc:e==null?void 0:e.text})})};Tt.Form=Wi;Tt.modalWdith=560;Tt.Icon=_c;const qi=()=>{const{actions:e=[],transformTools:t}=pe(),n=I.useMemo(()=>e.map(r=>({value:r.name,label:r.description})),[e]),o=r=>t==null?void 0:t.find(s=>s.value===r);return g.jsxs(I.Fragment,{children:[g.jsx(ht,{label:"Action",name:"type",options:n,rules:[{required:!0}]}),g.jsx(tt,{label:"Text",name:"text",rules:[{required:!1}]}),g.jsx(Jt,{name:["type"],children:({type:r})=>r?g.jsxs(I.Fragment,{children:[g.jsx(bc,{children:"Transform"}),g.jsx(en,{name:"transform",alwaysShowItemLabel:!0,className:"custom_form_list",creatorButtonProps:{creatorButtonText:"Add Transform"},children:(s,i,a)=>g.jsxs(g.Fragment,{children:[g.jsx(ht,{label:"Type",name:"type",options:t,rules:[{required:!0}],fieldProps:{onChange(c){const l=o(c);a.setCurrentRowData({attrs:[],value:l==null?void 0:l.subValue})}}}),g.jsx(fe,{hidden:!0,name:"value"}),g.jsx(Jt,{name:["attrs"],children:({attrs:c=[]})=>{const l=a.getCurrentRowData(),u=o(l.type),f=(u==null?void 0:u.maxAttrs)??100,d=c.length>=f;return g.jsx(en,{name:"attrs",label:"Attributes",alwaysShowItemLabel:!0,className:"custom_form_list",creatorButtonProps:{disabled:d,creatorButtonText:"Add Attribute"},children:g.jsx(fe,{name:"attr",label:"Attribute",rules:[{required:!0}]})})}})]})})]}):null})]})},jt=()=>{const{actions:e=[]}=pe(),t=Re(),n=I.useMemo(()=>e.find(o=>(t==null?void 0:t.type)===o.name),[e,t==null?void 0:t.type]);return g.jsx(Fe,{tools:{editForm:{Component:qi,title:"Edit Action node",width:jt.modalWdith}},children:g.jsx(nt,{title:n==null?void 0:n.name,desc:t==null?void 0:t.text})})};jt.Form=qi;jt.modalWdith=560;jt.Icon=Nc;const Gi=()=>{const{transformTools:e=[]}=pe();return g.jsxs(I.Fragment,{children:[g.jsx(ht,{options:e,label:"Type",name:"type",rules:[{required:!0}]}),g.jsx(tt,{label:"Text",name:"text",rules:[{required:!0}]}),g.jsx(en,{name:"attrs",label:"Attributes",creatorButtonProps:{creatorButtonText:"Add Attribute"},children:g.jsxs(Wr,{gutter:16,children:[g.jsx(tn,{span:12,children:g.jsx(fe,{label:"From",name:"from",rules:[{required:!0}]})}),g.jsx(tn,{span:12,children:g.jsx(fe,{label:"To",name:"to",rules:[{required:!0}]})})]})})]})},Pt=()=>{const{transformTools:e=[]}=pe(),t=Re(),n=I.useMemo(()=>e.find(o=>o.value===(t==null?void 0:t.type)),[e,t==null?void 0:t.type]);return g.jsx(Fe,{tools:{editForm:{width:Pt.modalWdith,title:"Edit Transform node",Component:Gi}},children:g.jsx(nt,{title:n==null?void 0:n.label,desc:t==null?void 0:t.text})})};Pt.Form=Gi;Pt.modalWdith=560;Pt.Icon=Ec;const Ui=()=>g.jsxs(I.Fragment,{children:[g.jsx(fe,{label:"Name",name:"name",rules:[{required:!0}]}),g.jsx(tt,{label:"Description",name:"description",rules:[{required:!1}]}),g.jsx(fe,{name:"branch",hidden:!0})]}),Dt=()=>{const e=Re();return g.jsx(Fe,{branch:e==null?void 0:e.branch,tools:{editForm:{Component:Ui,title:"Edit Step node",width:Dt.modalWdith}},children:g.jsx(nt,{title:e==null?void 0:e.name,desc:e==null?void 0:e.description})})};Dt.Form=Ui;Dt.modalWdith=560;Dt.Icon=Sc;const Ki=[{limit:1,top:!0,type:"start",title:"Start",desc:"The starting node of a workflow.",Component:Oi},{top:!0,type:"step",title:"Step",desc:"Execute the corresponding process according to the different branches created.",Component:Dt},{type:"ui",title:"UI",desc:"The UI components within the AI assistant can be used as a data source to obtain data.",Component:$t},{type:"branch",title:"Branch",desc:"Execute the corresponding process according to the different branches created.",Component:At},{type:"message",title:"Prompt",desc:"Prompt the AI what to do or say.",Component:Tt},{type:"action",title:"Action",desc:"Execute the corresponding process according to the different branches created.",Component:jt},{type:"transform",title:"Transform",desc:"Convert the input data.",Component:Pt}],pm=e=>{const{stroke:t}=e;return g.jsx("defs",{children:g.jsx("marker",{id:e.id,refX:"0",refY:"0",markerWidth:"12.5",markerHeight:"12.5",viewBox:"-10 -10 20 20",markerUnits:"strokeWidth",orient:"auto-start-reverse",style:{stroke:t,fill:t,strokeWidth:1},children:g.jsx("polyline",{strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})})})},mm="_del_btn_1ph8o_1",xm={del_btn:mm},ym=e=>{const{id:t,selected:n,sourceX:o,sourceY:r,targetX:s,targetY:i,sourcePosition:a,targetPosition:c}=e,{setEdges:l}=He(),[u,f,d]=gn({sourceX:o,sourceY:r,targetX:s,targetY:i}),h=I.useMemo(()=>`translate(-50%, -50%) 
      translate(${f}px,${d}px)`,[f,d]),m=n?"#f40":"#0143EC",x=se(()=>{l(w=>w.filter(_=>_.id!==t))});return g.jsxs(I.Fragment,{children:[g.jsx(pm,{stroke:m,id:t}),g.jsx(Co,{sourceX:o,sourceY:r,targetX:s,targetY:i,markerEnd:`url(#${t})`,sourcePosition:a,targetPosition:c,style:{stroke:m,strokeWidth:3}}),g.jsx(cp,{children:n?g.jsx("div",{style:{transform:h},onClick:x,className:xm.del_btn,children:g.jsx(Cc,{})}):null})]})},wm={"step-edge":ym},vm="_add_button_cw4d1_1",_m={add_button:vm},bm=()=>{const[e]=Fi();return g.jsx(Bi,{onChange:e,children:g.jsx("div",{className:_m.add_button,children:g.jsx(Mc,{})})})},Nm=e=>{const{fromX:t,fromY:n,toX:o,toY:r}=e,s=(t+o)/2,i=`M${t},${n} H${s} V${r} H${o}`;return g.jsxs("g",{children:[g.jsx("path",{fill:"none",d:i,strokeWidth:3,stroke:"#0143EC",className:"animated"}),g.jsx("circle",{cx:o,cy:r,fill:"#fff",r:3,stroke:"#0143EC",strokeWidth:3})]})},Em=Ki.reduce((e,t)=>({...e,[t.type]:t.Component}),{}),Zi=e=>{const{canvas:t,top:n=!0,defaultNodes:o=[],defaultEdges:r=[]}=e,s=I.useMemo(()=>o.length?o:[Gn(Rp)],[o]),[i,a,c]=dp(r),[l,u,f]=up(s),d=i.map(x=>({...x,type:"step-edge"})),h=se(x=>a(w=>Bs(x,w))),m=se(()=>Gn({edges:i,nodes:l,_v_:1}));return Pi(t,()=>({getData:m})),g.jsx(zi,{value:{top:n},children:g.jsxs(ip,{fitView:!0,minZoom:.5,nodes:l,edges:d,edgeTypes:wm,nodeTypes:Em,onConnect:h,onNodesChange:f,onEdgesChange:c,onBeforeDelete:async x=>!x.nodes.length,connectionLineComponent:Nm,children:[g.jsx(xp,{size:2,color:"#ccc",bgColor:"#f6f6f6"}),g.jsx(Ep,{}),g.jsx(bm,{})]})})},Qi=e=>{const t=new Map;for(const n of e){const o=n.source,r=t.get(o)||[];t.set(o,[...r,n])}return t},Sm=(e,t="")=>({id:nn(),source:e,target:t,sourceHandle:ko,targetHandle:Io}),Cm=e=>{const t=[];for(const n of e){t.push(n);const o=n.target;e.find(r=>r.source===o)||t.push(Sm(o))}return t};function Mm(e){e=Cm(e);const t=e.find(i=>i.source===co);if(!t)return e;const n=Qi(e),o=[t];let r=t.target;const s=i=>n.get(i)||[];for(;s(r).length;){const[i]=s(r);o.push(i),r=i.target;const a=s(r).filter(c=>c.id!==i.id);n.set(r,a)}for(const i of e)o.some(a=>a.id===i.id)||o.push(i);return o.filter(i=>i.source!==co)}const km=(e,t)=>[...Qi(e)].map(([o,r])=>{const[s]=r,i=s.target,a=t(s.source);let c=[];const l={id:o,node:a},u=f=>{var h,m;return(((m=(h=a==null?void 0:a.data)==null?void 0:h.formData)==null?void 0:m.branch)||[]).find(x=>x.id===f)};return r.forEach(f=>{const d=f.target,h=f.sourceHandle;if(h===ko)l.nextStep=d;else if(a){const m=u(h);m&&c.push({id:m.id,label:m.label,condition:m.value,nextStep:d})}}),c.length?l.conditions=c:l.nextStep=i,l});function $o(e,t=[]){const n=new Map,o=e.nodes||[],r=e.edges||[];for(const c of o)n.set(c.id,c);const s=c=>n.get(c),i=Mm(r);return km(i,s).map(c=>{const{node:l,...u}=c,f=l==null?void 0:l.data,{branch:d,...h}={...f==null?void 0:f.formData},m={...Gn(u),type:l==null?void 0:l.type,formData:h};if(d!=null&&d.length){const x=c.conditions||t;m.conditions=d.map(w=>{const _=x.find(b=>b.id===w.id);return{id:w.id,label:w.label,condition:w.value,nextStep:_==null?void 0:_.nextStep}})}return f!=null&&f.details&&(m.details=$o(f==null?void 0:f.details,m.conditions)),m})}const Im=e=>{var r;const t=[],o=$o(e).filter(s=>!s.nextStep);for(const s of o)(r=s.conditions)!=null&&r.length&&s.conditions.forEach(i=>{i.nextStep||t.push({id:i.id,label:i.label,value:i.condition})});return t},$m="_detail_1b2w4_1",Am="_show_1b2w4_14",Tm="_layer_1b2w4_19",jm="_layer_content_1b2w4_25",Pm="_layer_header_1b2w4_28",Dm="_close_btn_1b2w4_35",zm="_title_1b2w4_38",Ae={detail:$m,show:Am,layer:Tm,layer_content:jm,layer_header:Pm,close_btn:Dm,title:zm},Hm=()=>{var d;const e=Bp(),[t]=Hi(),{updateNodeData:n}=He(),[o,r]=kc.useModal(),{closeDetail:s,detailId:i}=pe(),a=e==null?void 0:e.details,c=a==null?void 0:a.nodes,l=a==null?void 0:a.edges,u=se(()=>{const h=t.getData(),m=Im(h),x={...e==null?void 0:e.formData,branch:m};n(i,{details:h,formData:x}),s()}),f=se(()=>{o.confirm({title:"Are you sure you want to leave?",content:"The data on this page will be lost after leaving.",okText:"Yes",okButtonProps:{className:"shopify"},cancelButtonProps:{className:"shopify gray"},onOk:s})});return g.jsxs("div",{className:Ae.layer,children:[g.jsxs("div",{className:Ae.layer_header,children:[g.jsx(qt,{children:"Back",icon:Ic,onClick:f,className:Ae.close_btn}),g.jsx("div",{className:Ae.title,children:(d=e==null?void 0:e.formData)==null?void 0:d.name}),g.jsx(qr,{type:"primary",onClick:u,children:"Save"})]}),g.jsx("div",{className:Ae.layer_content,children:g.jsx(Mo,{children:g.jsx(Zi,{top:!1,canvas:t,defaultNodes:c,defaultEdges:l})})}),r]})},Rm=()=>{const{detailId:e}=pe(),[t,n]=uo(!1),o=se(()=>n(!0)),r=se(()=>n(!1));rc(()=>{e?o():setTimeout(r,400)},[e]);const s=$c(Ae.detail,!!e&&Ae.show);return g.jsx("div",{className:s,children:t&&g.jsx(Hm,{})})},Fm=e=>{const{children:t,...n}=e,[o,r]=uo(),s=se(a=>{r(a)}),i=se(()=>{r(void 0)});return g.jsx(Di.Provider,{value:{...n,detailId:o,openDetail:s,closeDetail:i},children:t})},Lm=e=>{const[t]=Hi(),n=se(()=>{const o=t.getData();return{realDetails:o,assembleData:$o(o)}});return Pi(e.flow,()=>({getData:n})),g.jsx(Mo,{children:g.jsxs(Fm,{...e,children:[g.jsx(Zi,{...e,canvas:t}),g.jsx(Rm,{})]})})},Bm=(e={})=>Object.keys(e).reduce((t,n)=>{var r,s;let o=(r=e[n])==null?void 0:r.value;if(n==="conditions"){n="branch";const i=o;o=(s=i==null?void 0:i.map)==null?void 0:s.call(i,a=>({label:a.condition,value:a.condition}))}return{...t,[n]:o}},{}),Ji=e=>{if(e!=null&&e._v_)return e;let t=(e==null?void 0:e.nodes)||[];return t=t.map(n=>{var r;const o=(r=n==null?void 0:n.data)==null?void 0:r.values;return{...n,data:{nodeType:o==null?void 0:o.nodeType,formData:Bm(o==null?void 0:o.formData),details:Ji(o==null?void 0:o.stepRealData)}}}),{...e,nodes:t}},Vm=e=>e.map(t=>{const n=[...t.parameters,{name:"waitFor",parameter:t.wait_for}];return{componentName:t.tag_name,componentTag:t.tag_name,componentId:t.ui_component_uuid,componentType:t.ui_component_type,input:n.map(o=>{let r=o.parameter;return r&&(r=`{${r}}`),{required:!0,label:o.name,name:o.name,initialValue:r}})}}),Om=e=>e.reduce((n,o)=>[...n,...o.tools],[]).map(n=>({name:n.name,description:n.description})),Ym=()=>[{label:"Summarize",value:"summarize",maxAttrs:1},{label:"Full content",value:"full_content",maxAttrs:1},{label:"Structure input",value:"structure_input",subValue:"data_collect_dataset"}],Xm="_loading_1rv3u_1",Wm="_container_1rv3u_7",qm="_page_title_1rv3u_12",Gm="_update_time_1rv3u_15",Qt={loading:Xm,container:Wm,page_title:qm,update_time:Gm},Um=e=>{const{promptTemplate:t,flowRelationship:n}=e.detail,o=Om(t.mcp_servers),r=Ym(),s=Vm(t.ui_components),i=I.useMemo(()=>{const a=n?JSON.parse(n):{};return Ji(a)},[n,s]);return g.jsx(Ac,{className:"shopify full-content",children:g.jsx("div",{className:Qt.container,children:g.jsx(Lm,{flow:e.flow,actions:o,uiComponents:s,transformTools:r,defaultEdges:i.edges,defaultNodes:i.nodes})})})};function c0(){var f;const{message:e}=Tc.useApp(),[t]=Fp(),[n]=sc(),o=ic(),r=ac(),[s,i]=uo(!1),{data:a}=cc(async()=>(await uc({flowSnippetUuid:o.uid,flowSnippetVersionUuid:o.vid})).flowSnippet),c=(f=a==null?void 0:a.promptTemplate)==null?void 0:f.prompt_uuid,l=se(async()=>{const d=t.getData(),{flowSnippetVersionUuid:h,...m}=a,x=n.get("type"),w={};x==="new"&&(w.flowSnippetVersionUuid=h),i(!0),await dc({...m,...w,promptUuid:c,flowContext:JSON.stringify(d.assembleData),flowRelationship:JSON.stringify(d.realDetails)}),e.success("Workflow saved successfully"),i(!1)}),u=()=>{if(!a)return"";const d=a.updatedAt;return`Last updated on ${lc(d).format("YYYY/MM/DD HH:mm:ss")}`};return g.jsx(jc,{title:g.jsxs("div",{className:Qt.page_title,children:[(a==null?void 0:a.flowName)||"Workflow Details",g.jsx("div",{className:Qt.update_time,children:u()})]}),className:"shopify full-screen",loading:!a&&g.jsx("div",{className:Qt.loading,children:g.jsx(zc,{size:48})}),onBack:()=>r(-1),extra:a?g.jsx(qr,{type:"primary",className:"shopify",onClick:l,children:"Save"}):null,children:g.jsx(Fc,{loading:s,children:!!a&&g.jsx(Um,{flow:t,detail:a})})})}export{c0 as default};
