import{k as t,K as g}from"../chunks/vendor-BASRo5BV.js";import{b as f,f as d}from"../assets/index-BJk3dTtz.js";import{T as p}from"../chunks/index-CDz1kTjP.js";import{P as h,K as x,g as o,v as c,f as j,S as u,B as y}from"../chunks/ui-CrIkMfD8.js";import{I as m}from"../chunks/index-CNAIOIDt.js";import{L as s}from"../chunks/index-8Ay-V5LL.js";import{g as k}from"../chunks/generate-C_joZJHY.js";import"../chunks/utils-BMDVF5td.js";import"../chunks/index-7RUIiB2k.js";const _={},I=i=>{const n=i.value||[];return t.jsx("div",{className:_.messages,children:t.jsx(h,{options:!1,search:!1,dataSource:n,pagination:{pageSize:5},className:"shopify",columns:[{title:"Role",key:"role",render:(r,{message:e})=>(e==null?void 0:e.role)||"-"},{title:"Prompt Tokens",key:"prompt_tokens",render:(r,{message:e})=>{var a;return((a=e==null?void 0:e.run)==null?void 0:a.prompt_tokens)||"-"}},{title:"Completion Tokens",key:"completion_tokens",render:(r,{message:e})=>{var a;return((a=e==null?void 0:e.run)==null?void 0:a.completion_tokens)||"-"}},{title:"Total Tokens",key:"total_tokens",render:(r,{message:e})=>{var a;return((a=e==null?void 0:e.run)==null?void 0:a.total_tokens)||"-"}},{title:"Actions",key:"action",width:"80px",render:(r,{message:e})=>t.jsx(p,{width:620,hasFooter:!1,title:"Message Content",trigger:t.jsx(m,{icon:x}),children:t.jsx("div",{style:{padding:"24px 0"},children:t.jsx(s,{pre:!0,value:e==null?void 0:e.content})})})}]})})},A=i=>{const{formData:n}=i,[r]=o.useForm();return t.jsxs(o,{form:r,submitter:!1,initialValues:n,style:{padding:"0 0 24px 0"},children:[t.jsx(c,{orientation:"left",children:"Agent details"}),t.jsx(o.Item,{label:"Agent UUID",name:["agent","agent_uuid"],children:t.jsx(s,{})}),t.jsx(o.Item,{label:"Agent Name",name:["agent","agent_name"],children:t.jsx(s,{})}),t.jsx(o.Item,{label:"Agent Description",name:["agent","agent_description"],children:t.jsx(s,{})}),t.jsx(c,{orientation:"left",children:"Messages"}),t.jsx(o.Item,{name:"messages",children:t.jsx(I,{})})]})},T=async i=>{const n=await k({type:"Query",name:"threadList"});return f.graphql({query:n,variables:i})},U=()=>{const i=g();return t.jsx(j,{title:"Message Threads",extra:t.jsx(u,{children:t.jsx(y,{className:"shopify gray",onClick:()=>i("/async-tasks"),children:"Async Tasks"})}),children:t.jsx(h,{pagination:{pageSize:5},search:!1,options:!1,rowKey:"threadUuid",className:"shopify",scroll:{x:"max-content"},request:async n=>{const{current:r,pageSize:e,...a}=n,{threadList:l}=await T({limit:e,pageNumber:r,...a});return{total:l.total,data:l.threadList}},columns:[{title:"Thread UUID",dataIndex:"threadUuid"},{title:"Agent",key:"agentUuid",render:(n,r)=>{const e=r.agent;return e?`${e.agent_name}`:"-"}},{title:"Create at",dataIndex:"createdAt",hideInSearch:!0,render:(n,r)=>d(r.createdAt)},{title:"Last updated",dataIndex:"updatedAt",hideInSearch:!0,render:(n,r)=>d(r.updatedAt)},{width:"80px",key:"action",title:"Action",fixed:"right",hideInSearch:!0,render:(n,r)=>t.jsx(u,{children:t.jsx(p,{width:620,hasFooter:!1,destroyOnHidden:!0,className:"shopify",title:"Message thread Details",trigger:t.jsx(m,{icon:x}),children:t.jsx(A,{formData:r})})})}]})})};export{U as default};
