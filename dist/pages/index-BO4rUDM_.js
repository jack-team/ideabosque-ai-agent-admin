import{r as S,k as e,K as j,D as p,f as h}from"../chunks/vendor-BASRo5BV.js";import{I as f}from"../chunks/index-CNAIOIDt.js";import{g as x,A as v,W as u,l as M,R as g,a as y,f as b,P as A,S as I,m as P,i as _}from"../chunks/ui-CrIkMfD8.js";import"../assets/index-a3n_qMTh.js";import{b as D,u as w}from"../chunks/hooks-CKqr3Hp3.js";import{c as T,e as k}from"../chunks/workflow-Ceki6VW7.js";import{T as q}from"../chunks/index-BSDmC2OP.js";import{S as B}from"../chunks/index-B4mFbccR.js";import"../chunks/utils-BMDVF5td.js";import"../chunks/generate-BNkr4RNj.js";const F=i=>{const{tools:a,headers:s,...n}=i,o=Object.keys(s).reduce((d,r)=>[...d,{key:r,value:s[r]}],[]);return{...n,headers:o}},L=i=>{const{headers:a,...s}=i,n=a.reduce((o,d)=>({...o,[d.key]:d.value}),{});return{...s,headers:n,updatedBy:"admin"}},H="_edit_form_18m45_1",N={edit_form:H},U=i=>{const{formData:a,onSuccess:s}=i,[n]=x.useForm(),{message:o}=v.useApp(),[d]=D(),r=S.useMemo(()=>{if(a)return F(a)},[a]);return w(async()=>{const t=await n.validateFields(),l=L(t);try{await T(l),d(),s==null||s(),o.success(`Successfully ${a?"updated":"created"} Mcp server.`)}catch(c){return o.error(c.message),Promise.reject(c)}}),e.jsxs(x,{form:n,submitter:!1,scrollToFirstError:!0,initialValues:r,className:N.edit_form,children:[e.jsx(u,{hidden:!0,name:"mcpServerUuid"}),e.jsx(u,{label:"Mcp label",name:"mcpLabel",rules:[{required:!0}]}),e.jsx(u,{name:"mcpServerUrl",label:"Mcp server url",rules:[{required:!0,type:"url"}]}),e.jsx(M,{required:!0,label:"Headers",name:"headers",initialValue:[{}],alwaysShowItemLabel:!0,className:"custom_form_list",creatorButtonProps:{creatorButtonText:"Add Header"},rules:[{validator:(t,l=[],c)=>{if(!l.length){c("Please add Header");return}c()}}],children:e.jsxs(g,{gutter:16,children:[e.jsx(y,{span:12,children:e.jsx(u,{required:!0,label:"Key",name:"key",rules:[{required:!0}]})}),e.jsx(y,{span:12,children:e.jsx(u,{required:!0,label:"Value",name:"value",rules:[{required:!0}]})})]})})]})},G=()=>{const{modal:i}=v.useApp(),a=S.useRef(null),s=j(),n=p(()=>{var r;(r=a.current)==null||r.reload()}),o=(r,t)=>e.jsx(q,{width:620,destroyOnHidden:!0,trigger:r,title:`${t?"Edit":"Add"} Mcp server`,children:e.jsx(U,{formData:t,onSuccess:n})}),d=p(r=>{i.confirm({title:"Are you sure you want to delete the component?",okText:"Delete",cancelButtonProps:{className:"shopify gray"},okButtonProps:{className:"shopify",danger:!0},onOk:async()=>{}})});return e.jsx(b,{className:"shopify",title:"Mcp Servers",onBack:()=>s(-1),extra:o(e.jsx(B,{type:"primary",children:"Add Mcp Server"})),children:e.jsx(A,{className:"shopify",actionRef:a,rowKey:"mcpServerUuid",options:!1,search:!1,pagination:{defaultPageSize:5},columns:[{dataIndex:"mcpLabel",title:"Mcp label"},{dataIndex:"mcpServerUrl",title:"Mcp Server Url",hideInSearch:!0},{dataIndex:"createdAt",title:"Created At",hideInSearch:!0,render:(r,t)=>h(t.createdAt).format("YYYY/MM/DD HH:mm:ss")},{dataIndex:"updatedAt",title:"Updated at",hideInSearch:!0,render:(r,t)=>h(t.updatedAt).format("YYYY/MM/DD HH:mm:ss")},{dataIndex:"updatedBy",title:"Updated by",hideInSearch:!0},{key:"action",title:"Action",width:"100px",align:"center",hideInSearch:!0,fixed:"right",render:(r,t)=>e.jsxs(I,{children:[o(e.jsx(f,{icon:_}),t),e.jsx(f,{icon:P,onClick:()=>d(t)})]})}],scroll:{x:"max-content"},request:async r=>{const{current:t=1,pageSize:l=10,...c}=r,{mcpServerList:m}=await k({pageNumber:t,limit:l,...c});return{total:m.total,data:m.mcpServerList}}})})};export{G as default};
