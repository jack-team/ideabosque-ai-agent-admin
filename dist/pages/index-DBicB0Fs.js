import{k as e,K as I,r as w,D as c,f as x}from"../chunks/vendor-BASRo5BV.js";import{I as f}from"../chunks/index-CNAIOIDt.js";import{g as h,A as g,W as i,h as _,l as S,R as b,a as y,f as P,P as T,S as N,m as U,i as v}from"../chunks/ui-CrIkMfD8.js";import"../assets/index-a3n_qMTh.js";import{b as M,u as D}from"../chunks/hooks-CKqr3Hp3.js";import{a as F,d as k,b as E}from"../chunks/workflow-Ceki6VW7.js";import{T as Y}from"../chunks/index-BSDmC2OP.js";import{S as q}from"../chunks/index-B4mFbccR.js";import"../chunks/utils-BMDVF5td.js";import"../chunks/generate-BNkr4RNj.js";var l=(r=>(r.wizardGroup="wizard_group",r.externalIntegration="external_integration",r))(l||{});const C={[l.wizardGroup]:"Wizard group",[l.externalIntegration]:"External integration"},B="_edit_form_k8an2_1",z={edit_form:B},H=r=>{const{formData:d,onSuccess:n}=r,[o]=h.useForm(),{message:s}=g.useApp(),[m]=M();return D(async()=>{const u=await o.validateFields();try{await F({...u,updatedBy:"Admin"}),m(),n==null||n(),s.success(`Successfully ${d?"updated":"created"} UI component.`)}catch(t){return s.error(t.message),Promise.reject(t)}}),e.jsxs(h,{form:o,submitter:!1,initialValues:d,className:z.edit_form,children:[e.jsx(i,{hidden:!0,name:"uiComponentUuid"}),e.jsx(i,{label:"Tag name",name:"tagName",rules:[{required:!0}]}),e.jsx(_,{name:"uiComponentType",label:"Component type",rules:[{required:!0}],valueEnum:C}),e.jsx(i,{name:"waitFor",label:"Wait for",rules:[{required:!0}]}),e.jsx(S,{label:"Parameters",name:"parameters",alwaysShowItemLabel:!0,className:"custom_form_list",required:!0,rules:[{validator:(u,t=[],a)=>{if(!t.length){a("Please add parameter");return}a()}}],children:e.jsxs(b,{gutter:16,children:[e.jsx(y,{span:12,children:e.jsx(i,{name:"name",label:"Name",rules:[{required:!0}]})}),e.jsx(y,{span:12,children:e.jsx(i,{name:"parameter",label:"Parameter",rules:[{required:!0}]})})]})})]})},X=()=>{const r=I(),{modal:d,message:n}=g.useApp(),o=w.useRef(null),s=c(()=>{var t;(t=o.current)==null||t.reload()}),m=(t,a)=>e.jsx(Y,{width:620,destroyOnHidden:!0,trigger:t,title:`${a?"Edit":"Add"} Component`,children:e.jsx(H,{formData:a,onSuccess:s})}),u=c(t=>{d.confirm({title:"Are you sure you want to delete the component?",okText:"Delete",cancelButtonProps:{className:"shopify"},okButtonProps:{className:"shopify gray",danger:!0},onOk:async()=>{await k({uiComponentType:t.uiComponentType,uiComponentUuid:t.uiComponentUuid}),s(),n.success("Component deleted successfully.")}})});return e.jsx(P,{className:"shopify",title:"Ui Components",onBack:()=>r(-1),extra:m(e.jsx(q,{type:"primary",children:"Add Component"})),children:e.jsx(T,{className:"shopify",actionRef:o,rowKey:"uiComponentUuid",options:!1,search:!1,columns:[{dataIndex:"tagName",title:"Tag Name"},{dataIndex:"uiComponentType",title:"Component Type",valueEnum:C},{dataIndex:"createdAt",title:"Created At",hideInSearch:!0,render:(t,a)=>x(a.createdAt).format("YYYY/MM/DD HH:mm:ss")},{dataIndex:"updatedAt",title:"Updated at",hideInSearch:!0,render:(t,a)=>x(a.updatedAt).format("YYYY/MM/DD HH:mm:ss")},{dataIndex:"updatedBy",title:"Updated by",hideInSearch:!0},{key:"action",title:"Action",width:"100px",align:"center",hideInSearch:!0,fixed:"right",render:(t,a)=>e.jsxs(N,{children:[m(e.jsx(f,{icon:v}),a),e.jsx(f,{icon:U,onClick:()=>u(a)})]})}],scroll:{x:"max-content"},request:async t=>{const{current:a=1,pageSize:j=10,...A}=t,{uiComponentList:p}=await E({pageNumber:a,limit:j,...A});return{total:p.total,data:p.uiComponentList}}})})};export{X as default};
